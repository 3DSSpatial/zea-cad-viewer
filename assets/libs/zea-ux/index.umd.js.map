{"version":3,"file":"index.umd.js","sources":["../src/Handles/Handle.js","../src/Handles/BaseLinearMovementHandle.js","../src/UndoRedo/UndoRedoManager.js","../src/UndoRedo/Change.js","../src/UndoRedo/Changes/ParameterValueChange.js","../src/Handles/Shaders/HandleShader.js","../src/Handles/transformVertices.js","../src/Handles/LinearMovementHandle.js","../src/Handles/BaseAxialRotationHandle.js","../src/Handles/AxialRotationHandle.js","../src/Handles/PlanarMovementHandle.js","../src/Handles/XfoPlanarMovementHandle.js","../src/Handles/XfoHandle.js","../src/SelectionGroupXfoOperator.js","../src/SelectionGroup.js","../src/UndoRedo/Changes/SelectionChange.js","../src/UndoRedo/Changes/SelectionVisibilityChange.js","../src/SelectionManager.js","../src/UndoRedo/Changes/TreeItemAddChange.js","../src/UndoRedo/Changes/TreeItemMoveChange.js","../src/UndoRedo/Changes/TreeItemsRemoveChange.js","../src/Tools/SelectionTool.js","../src/Tools/VRTools/dom-to-image.js","../src/Tools/VRTools/VRControllerUI.js","../src/Tools/VRTools/VRUITool.js","../src/Tools/VRTools/VRHoldObjectsTool.js","../src/Tools/BaseCreateTool.js","../src/Tools/CreateTools/CreateGeomTool.js","../src/Tools/CreateTools/Change/CreateGeomChange.js","../src/Tools/CreateTools/Change/CreateLineChange.js","../src/Tools/CreateTools/CreateLineTool.js","../src/Tools/CreateTools/Change/CreateConeChange.js","../src/Tools/CreateTools/CreateConeTool.js","../src/Tools/CreateTools/Change/CreateCircleChange.js","../src/Tools/CreateTools/CreateCircleTool.js","../src/Tools/CreateTools/Change/CreateRectChange.js","../src/Tools/CreateTools/CreateRectTool.js","../src/Tools/CreateTools/Change/CreateFreehandLineChange.js","../src/Tools/CreateTools/CreateFreehandLineTool.js","../src/Tools/CreateTools/Change/CreateSphereChange.js","../src/Tools/CreateTools/CreateSphereTool.js","../src/Tools/CreateTools/Change/CreateCuboidChange.js","../src/Tools/CreateTools/CreateCuboidTool.js","../src/Tools/ToolManager.js","../src/Handles/SliderHandle.js","../src/Handles/ArcSlider.js","../src/Handles/ScreenSpaceMovementHandle.js","../src/Measurement/MeasureDistance.js","../src/Measurement/MeasureAngle.js","../src/Measurement/MeasurementChange.js","../src/Measurement/MeasureDistanceTool.js","../src/Measurement/MeasureCenterDistancesTool.js","../src/Measurement/MeasureRadiusTool.js","../src/Measurement/MeasureAngleTool.js"],"sourcesContent":["import { TreeItem, Ray, ColorParameter, Color } from '@zeainc/zea-engine'\r\n\r\n/**\r\n * A Handle is an UI widget that lives in the scene, it translates a series of pointer events into a higher level interaction.\r\n *\r\n * **Parameters**\r\n * * **Color(`ColorParameter`):** Specifies the color of the handle.\r\n * * **HighlightColor(`ColorParameter`):** Specifies the highlight color of the handle.\r\n *\r\n * @extends TreeItem\r\n */\r\nclass Handle extends TreeItem {\r\n  /**\r\n   * Creates an instance of Handle.\r\n   *\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n\r\n    this.captured = false\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', new Color()))\r\n    this.highlightColorParam = this.addParameter(new ColorParameter('HighlightColor', new Color(1, 1, 1)))\r\n  }\r\n\r\n  /**\r\n   * Applies a special shinning shader to the handle to illustrate interaction with it.\r\n   */\r\n  highlight() {\r\n    this.emit('highlight')\r\n  }\r\n\r\n  /**\r\n   * Removes the shining shader from the handle.\r\n   */\r\n  unhighlight() {\r\n    this.emit('unhighlight')\r\n  }\r\n\r\n  /**\r\n   * Returns the manipulation plane of the handle, denoting a start and a direction.\r\n   *\r\n   * @return {Ray} The return value.\r\n   */\r\n  getManipulationPlane() {\r\n    const xfo = this.getParameter('GlobalXfo').getValue()\r\n    return new Ray(xfo.tr, xfo.ori.getZaxis())\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Mouse events\r\n\r\n  /**\r\n   * Event fired when a pointing device is initially moved within the space of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onPointerEnter(event) {\r\n    this.highlight()\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device moves outside of the space of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onPointerLeave(event) {\r\n    this.unhighlight()\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is pressed while the pointer is over the handle element.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onPointerDown(event) {\r\n    event.setCapture(this)\r\n    event.stopPropagation()\r\n    this.captured = true\r\n\r\n    if (event.changedTouches) {\r\n      this.highlight()\r\n    }\r\n\r\n    if (event.viewport) this.handlePointerDown(event)\r\n    else if (event.vrviewport) this.onVRControllerButtonDown(event)\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device is moved while the cursor's hotspot is over the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onPointerMove(event) {\r\n    if (this.captured) {\r\n      event.stopPropagation()\r\n      if (event.viewport) this.handlePointerMove(event)\r\n      else if (event.vrviewport) this.onVRPoseChanged(event)\r\n    }\r\n\r\n    event.preventDefault()\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is released while the pointer is over the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onPointerUp(event) {\r\n    if (this.captured) {\r\n      event.releaseCapture()\r\n      event.stopPropagation()\r\n      this.captured = false\r\n      if (event.changedTouches) {\r\n        this.unhighlight()\r\n      }\r\n      if (event.viewport) this.handlePointerUp(event)\r\n      else if (event.vrviewport) this.onVRControllerButtonUp(event)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user rotates the pointing device wheel over the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onWheel(event) {}\r\n\r\n  /**\r\n   * Handles mouse down interaction with the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  handlePointerDown(event) {\r\n    this.gizmoRay = this.getManipulationPlane()\r\n    const ray = event.pointerRay\r\n    const dist = ray.intersectRayPlane(this.gizmoRay)\r\n    event.grabPos = ray.pointAtDist(dist)\r\n    this.onDragStart(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move interaction with the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param\r\n   * @return { boolean } - The return value\r\n   */\r\n  handlePointerMove(event) {\r\n    const ray = event.pointerRay\r\n    const dist = ray.intersectRayPlane(this.gizmoRay)\r\n    event.holdPos = ray.pointAtDist(dist)\r\n    this.onDrag(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Handles mouse up interaction with the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  handlePointerUp(event) {\r\n    const ray = event.pointerRay\r\n    if (ray) {\r\n      const dist = ray.intersectRayPlane(this.gizmoRay)\r\n      event.releasePos = ray.pointAtDist(dist)\r\n    }\r\n\r\n    this.onDragEnd(event)\r\n    return true\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * Event fired when a VR controller button is pressed over the handle.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRControllerButtonDown(event) {\r\n    this.activeController = event.controller\r\n    const xfo = this.activeController.getTipXfo().clone()\r\n\r\n    const gizmoRay = this.getManipulationPlane()\r\n    const offset = xfo.tr.subtract(gizmoRay.start)\r\n    const grabPos = xfo.tr.subtract(gizmoRay.dir.scale(offset.dot(gizmoRay.dir)))\r\n    event.grabPos = grabPos\r\n    this.onDragStart(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * The onVRPoseChanged method.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  onVRPoseChanged(event) {\r\n    if (this.activeController) {\r\n      const xfo = this.activeController.getTipXfo()\r\n      const gizmoRay = this.getManipulationPlane()\r\n      const offset = xfo.tr.subtract(gizmoRay.start)\r\n      const holdPos = xfo.tr.subtract(gizmoRay.dir.scale(offset.dot(gizmoRay.dir)))\r\n      event.holdPos = holdPos\r\n      this.onDrag(event)\r\n      return true\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a VR controller button is released over the handle.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  onVRControllerButtonUp(event) {\r\n    if (this.activeController == event.controller) {\r\n      const xfo = this.activeController.getTipXfo()\r\n      this.onDragEnd(event, xfo.tr)\r\n      this.activeController = undefined\r\n      return true\r\n    }\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Interaction events\r\n\r\n  /**\r\n   * Handles the initially drag of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    console.warn('@Handle#onDragStart - Implement me!', event)\r\n  }\r\n\r\n  /**\r\n   * Handles drag action of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    console.warn('@Handle#onDrag - Implement me!', event)\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    console.warn('@Handle#onDragEnd - Implement me!', event)\r\n  }\r\n}\r\n\r\nexport default Handle\r\nexport { Handle }\r\n","import Handle from './Handle'\r\n\r\n/**\r\n * Class representing a base linear movement scene widget.\r\n *\r\n * @extends Handle\r\n */\r\nclass BaseLinearMovementHandle extends Handle {\r\n  /**\r\n   * Create base linear movement scene widget.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Mouse events\r\n\r\n  /**\r\n   * Handles mouse down interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  handlePointerDown(event) {\r\n    this.gizmoRay = this.getManipulationPlane()\r\n    const ray = event.pointerRay\r\n    this.grabDist = ray.intersectRayVector(this.gizmoRay)[1]\r\n    const grabPos = this.gizmoRay.pointAtDist(this.grabDist)\r\n    event.grabDist = this.grabDist\r\n    event.grabPos = grabPos\r\n    this.onDragStart(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param\r\n   */\r\n  handlePointerMove(event) {\r\n    const ray = event.pointerRay\r\n    const dist = ray.intersectRayVector(this.gizmoRay)[1]\r\n    const holdPos = this.gizmoRay.pointAtDist(dist)\r\n    event.holdDist = dist\r\n    event.holdPos = holdPos\r\n    event.value = dist\r\n    event.delta = dist - this.grabDist\r\n    this.onDrag(event)\r\n  }\r\n\r\n  /**\r\n   * Handles mouse up interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  handlePointerUp(event) {\r\n    const ray = event.pointerRay\r\n    if (ray) {\r\n      const dist = ray.intersectRayVector(this.gizmoRay)[1]\r\n      const releasePos = this.gizmoRay.pointAtDist(dist)\r\n      event.releasePos = releasePos\r\n    }\r\n\r\n    this.onDragEnd(event)\r\n    return true\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * Event fired when a VR controller button is pressed over the handle.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRControllerButtonDown(event) {\r\n    this.gizmoRay = this.getManipulationPlane()\r\n\r\n    this.activeController = event.controller\r\n    const xfo = this.activeController.getTipXfo()\r\n    this.grabDist = xfo.tr.subtract(this.gizmoRay.start).dot(this.gizmoRay.dir)\r\n    const grabPos = this.gizmoRay.start.add(this.gizmoRay.dir.scale(this.grabDist))\r\n    event.grabPos = grabPos\r\n    this.onDragStart(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * The onVRPoseChanged method.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRPoseChanged(event) {\r\n    const xfo = this.activeController.getTipXfo()\r\n    const dist = xfo.tr.subtract(this.gizmoRay.start).dot(this.gizmoRay.dir)\r\n    const holdPos = this.gizmoRay.start.add(this.gizmoRay.dir.scale(dist))\r\n    event.value = dist\r\n    event.holdPos = holdPos\r\n    event.delta = dist - this.grabDist\r\n    this.onDrag(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Event fired when a VR controller button is released over the handle.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  onVRControllerButtonUp(event) {\r\n    if (this.activeController == event.controller) {\r\n      // const xfo = this.activeController.getTipXfo()\r\n      this.onDragEnd()\r\n      this.activeController = undefined\r\n      return true\r\n    }\r\n  }\r\n}\r\n\r\nexport default BaseLinearMovementHandle\r\nexport { BaseLinearMovementHandle }\r\n","import { EventEmitter, Registry } from '@zeainc/zea-engine'\r\n\r\n/**\r\n * `UndoRedoManager` is a mixture of the [Factory Design Pattern](https://en.wikipedia.org/wiki/Factory_method_pattern) and the actual changes stacks manager.\r\n * This is the heart of the Undo/Redo System, letting you navigate through the changes history you've saved.\r\n *\r\n * **Events**\r\n * * **changeAdded:** Triggered when a change is added.\r\n * * **changeUpdated:** Triggered when the last change added updates its state.\r\n * * **changeUndone:** Triggered when the `undo` method is called, after removing the last change from the stack.\r\n * * **changeRedone:** Triggered when the `redo` method is called, after restoring the last change removed from the undo stack.\r\n * */\r\nclass UndoRedoManager extends EventEmitter {\r\n  /**\r\n   * It doesn't have any parameters, but under the hood it uses [EventsEmitter]() to notify subscribers when something happens.\r\n   * The implementation is really simple, just initialize it like any other class.\r\n   */\r\n  constructor() {\r\n    super()\r\n    this.__undoStack = []\r\n    this.__redoStack = []\r\n    this.__currChange = null\r\n\r\n    this.__currChangeUpdated = this.__currChangeUpdated.bind(this)\r\n  }\r\n\r\n  /**\r\n   * As the name indicates, it empties undo/redo stacks permanently, losing all stored actions.\r\n   * Right now, before flushing the stacks it calls the `destroy` method on all changes, ensure to at least declare it.\r\n   */\r\n  flush() {\r\n    for (const change of this.__undoStack) change.destroy()\r\n    this.__undoStack = []\r\n    for (const change of this.__redoStack) change.destroy()\r\n    this.__redoStack = []\r\n    if (this.__currChange) {\r\n      this.__currChange.off('updated', this.__currChangeUpdated)\r\n      this.__currChange = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Receives an instance of a class that extends or has the same structure as `Change` class.\r\n   * When this action happens, the last added change update notifications will get disconnected.\r\n   * Which implies that any future updates to changes that are not the last one, would need a new call to the `addChange` method.\r\n   * Also, resets the redo stack(Calls destroy method when doing it).\r\n   *\r\n   * @param {Change} change - The change param.\r\n   */\r\n  addChange(change) {\r\n    // console.log(\"AddChange:\", change.name)\r\n    if (this.__currChange && this.__currChange.off) {\r\n      this.__currChange.off('updated', this.__currChangeUpdated)\r\n    }\r\n\r\n    this.__undoStack.push(change)\r\n    this.__currChange = change\r\n    if (this.__currChange.on) this.__currChange.on('updated', this.__currChangeUpdated)\r\n\r\n    for (const change of this.__redoStack) change.destroy()\r\n    this.__redoStack = []\r\n\r\n    this.emit('changeAdded', { change })\r\n  }\r\n\r\n  /**\r\n   * Returns the last change added to the undo stack, but in case it is empty a `null` is returned.\r\n   *\r\n   * @return {Change|null} The return value.\r\n   */\r\n  getCurrentChange() {\r\n    return this.__currChange\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   * @param {object|any} updateData\r\n   */\r\n  __currChangeUpdated(updateData) {\r\n    this.emit('changeUpdated', updateData)\r\n  }\r\n\r\n  /**\r\n   * Rollback the latest action, passing it to the redo stack in case you wanna recover it later on.\r\n   *\r\n   * @param {boolean} pushOnRedoStack - The pushOnRedoStack param.\r\n   */\r\n  undo(pushOnRedoStack = true) {\r\n    if (this.__undoStack.length > 0) {\r\n      if (this.__currChange) {\r\n        this.__currChange.off('updated', this.__currChangeUpdated)\r\n        this.__currChange = null\r\n      }\r\n\r\n      const change = this.__undoStack.pop()\r\n      // console.log(\"undo:\", change.name)\r\n      change.undo()\r\n      if (pushOnRedoStack) {\r\n        this.__redoStack.push(change)\r\n        this.emit('changeUndone')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method to cancel the current change added to the UndoRedoManager.\r\n   * Reverts the change and discards it.\r\n   */\r\n  cancel() {\r\n    if (this.__undoStack.length > 0) {\r\n      if (this.__currChange) {\r\n        this.__currChange.off('updated', this.__currChangeUpdated)\r\n        this.__currChange = null\r\n      }\r\n\r\n      const change = this.__undoStack.pop()\r\n      change.undo()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Rollbacks the `undo` action by moving the change from the `redo` stack to the `undo` stack.\r\n   * Emits the `changeRedone` event, if you want to subscribe to it.\r\n   */\r\n  redo() {\r\n    if (this.__redoStack.length > 0) {\r\n      const change = this.__redoStack.pop()\r\n      // console.log(\"redo:\", change.name)\r\n      change.redo()\r\n      this.__undoStack.push(change)\r\n      this.emit('changeRedone')\r\n    }\r\n  }\r\n\r\n  // //////////////////////////////////\r\n  // User Synchronization\r\n\r\n  /**\r\n   * Basically returns a new instance of the derived `Change` class. This is why we need the `name` attribute.\r\n   *\r\n   * @param {string} className - The className param.\r\n   * @return {Change} - The return value.\r\n   */\r\n  constructChange(className) {\r\n    return Registry.constructClass(className)\r\n  }\r\n\r\n  /**\r\n   * Checks if a class of an instantiated object is registered in the UndoRedo Factory.\r\n   *\r\n   * @param {Change} inst - The instance of the Change class.\r\n   * @return {boolean} - Returns 'true' if the class has been registered.\r\n   */\r\n  static isChangeClassRegistered(inst) {\r\n    try {\r\n      const name = Registry.getBlueprintName(inst)\r\n      return true\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Very simple method that returns the name of the instantiated class, checking first in the registry and returning if found,\r\n   * if not then checks the `name` attribute declared in constructor.\r\n   *\r\n   * @param {Change} inst - The instance of the Change class.\r\n   * @return {string} - The return value.\r\n   */\r\n  static getChangeClassName(inst) {\r\n    return Registry.getBlueprintName(inst)\r\n  }\r\n\r\n  /**\r\n   * Registers the class in the UndoRedoManager Factory.\r\n   * Why do we need to specify the name of the class?\r\n   * Because when the code is transpiled, the defined class names change, so it won't be known as we declared it anymore.\r\n   *\r\n   * @param {string} name - The name param.\r\n   * @param {Change} cls - The cls param.\r\n   */\r\n  static registerChange(name, cls) {\r\n    Registry.register(name, cls)\r\n  }\r\n\r\n  static getInstance() {\r\n    if (!inst) {\r\n      inst = new UndoRedoManager()\r\n    }\r\n    return inst\r\n  }\r\n}\r\n\r\nlet inst\r\n\r\nexport default UndoRedoManager\r\nexport { UndoRedoManager }\r\n","import { EventEmitter } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager } from './UndoRedoManager.js'\r\n\r\n/**\r\n * Kind of an abstract class, that represents the mandatory structure of a change classes that are used in the [`UndoRedoManager`]().\r\n *\r\n * @note If you don't extend this class, ensure to implement all methods specified in here.\r\n * @extends {EventEmitter}\r\n */\r\nclass Change extends EventEmitter {\r\n  /**\r\n   * Every class that extends from `Change` must contain a global `name` attribute.\r\n   * It is used by the `UndoRedoManager` factory to re-construct the class of the specific implementation of the `Change` class.\r\n   *\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super()\r\n    this.name = name ? name : UndoRedoManager.getChangeClassName(this)\r\n  }\r\n\r\n  /**\r\n   * Called by the `UndoRedoManager` in the `undo` method, and contains the code you wanna run when the undo action is triggered,\r\n   * of course it depends on what you're doing.\r\n   *\r\n   * @note This method needs to be implemented, otherwise it will throw an Error.\r\n   */\r\n  undo() {\r\n    throw new Error('Implement me')\r\n  }\r\n\r\n  /**\r\n   * Called by the `UndoRedoManager` in the `redo` method, and is the same as the `undo` method, contains the specific code you wanna run.\r\n   *\r\n   * @note This method needs to be implemented, otherwise it will throw an Error.\r\n   */\r\n  redo() {\r\n    throw new Error('Implement me')\r\n  }\r\n\r\n  /**\r\n   * Use this method to update the state of your `Change` class.\r\n   *\r\n   * @note This method needs to be implemented, otherwise it will throw an Error.\r\n   *\r\n   * @param {object|string|any} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    throw new Error('Implement me')\r\n  }\r\n\r\n  /**\r\n   * Serializes the `Change` instance as a JSON object, allowing persistence/replication\r\n   *\r\n   * @note This method needs to be implemented, otherwise it will return an empty object.\r\n   *\r\n   * @param {object} context - The appData param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    return {}\r\n  }\r\n\r\n  /**\r\n   * The counterpart of the `toJSON` method, restoring `Change` instance's state with the specified JSON object.\r\n   * Each `Change` class must implement the logic for reconstructing itself.\r\n   * Very often used to restore from persisted/replicated JSON.\r\n   *\r\n   * @note This method needs to be implemented, otherwise it will do nothing.\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(j, context) {}\r\n\r\n  /**\r\n   * Useful method to update the state of an existing identified `Change` through replication.\r\n   *\r\n   * @note By default it calls the `update` method in the `Change` class, but you can override this if you need to.\r\n   *\r\n   * @param {object} j - The j param.\r\n   */\r\n  updateFromJSON(j) {\r\n    // Many change objects can load json directly\r\n    // in the update method.\r\n    this.update(j)\r\n  }\r\n\r\n  /**\r\n   * Method destined to clean up things that would need to be cleaned manually.\r\n   * It is executed when flushing the undo/redo stacks or adding a new change to the undo stack,\r\n   * so it is require in any class that represents a change.\r\n   *\r\n   */\r\n  destroy() {}\r\n}\r\n\r\nexport default Change\r\nexport { Change }\r\n","import { Parameter } from '@zeainc/zea-engine'\r\nimport UndoRedoManager from '../UndoRedoManager'\r\nimport Change from '../Change'\r\n\r\n/**\r\n * Represents a `Change` class for storing `Parameter` values.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the `ParameterValueChange` value is updated.\r\n *\r\n * @extends Change\r\n */\r\nclass ParameterValueChange extends Change {\r\n  /**\r\n   * Creates an instance of ParameterValueChange.\r\n   *\r\n   * @param {Parameter} param - The param value.\r\n   * @param {object|string|number|any} newValue - The newValue value.\r\n   */\r\n  constructor(param, newValue) {\r\n    if (param) {\r\n      super(param ? param.getName() + ' Changed' : 'ParameterValueChange')\r\n      this.__prevValue = param.getValue()\r\n      this.__param = param\r\n      if (newValue != undefined) {\r\n        this.__nextValue = newValue\r\n        this.__param.setValue(this.__nextValue)\r\n      }\r\n    } else {\r\n      super()\r\n    }\r\n\r\n    this.suppressPrimaryChange = false\r\n    this.secondaryChanges = []\r\n  }\r\n\r\n  /**\r\n   * Rollbacks the value of the parameter to the previous one, passing it to the redo stack in case you wanna recover it later on.\r\n   */\r\n  undo() {\r\n    if (!this.__param) return\r\n\r\n    if (!this.suppressPrimaryChange) this.__param.setValue(this.__prevValue)\r\n\r\n    this.secondaryChanges.forEach((change) => change.undo())\r\n  }\r\n\r\n  /**\r\n   * Rollbacks the `undo` action by moving the change from the `redo` stack to the `undo` stack\r\n   * and updating the parameter with the new value.\r\n   */\r\n  redo() {\r\n    if (!this.__param) return\r\n    if (!this.suppressPrimaryChange) this.__param.setValue(this.__nextValue)\r\n\r\n    this.secondaryChanges.forEach((change) => change.redo())\r\n  }\r\n\r\n  /**\r\n   * Updates the state of the current parameter change value.\r\n   *\r\n   * @param {Parameter} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    if (!this.__param) return\r\n    this.__nextValue = updateData.value\r\n    this.__param.setValue(this.__nextValue)\r\n    this.emit('updated', updateData)\r\n  }\r\n\r\n  /**\r\n   * Serializes `Parameter` instance value as a JSON object, allowing persistence/replication.\r\n   *\r\n   * @param {object} context - The context param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const j = {\r\n      name: this.name,\r\n      paramPath: this.__param.getPath(),\r\n    }\r\n\r\n    if (this.__nextValue != undefined) {\r\n      if (this.__nextValue.toJSON) {\r\n        j.value = this.__nextValue.toJSON()\r\n      } else {\r\n        j.value = this.__nextValue\r\n      }\r\n    }\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores `Parameter` instance's state with the specified JSON object.\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(j, context) {\r\n    const param = context.appData.scene.getRoot().resolvePath(j.paramPath, 1)\r\n    if (!param || !(param instanceof Parameter)) {\r\n      console.warn('resolvePath is unable to resolve', j.paramPath)\r\n      return\r\n    }\r\n    this.__param = param\r\n    this.__prevValue = this.__param.getValue()\r\n    if (this.__prevValue.clone) this.__nextValue = this.__prevValue.clone()\r\n    else this.__nextValue = this.__prevValue\r\n\r\n    this.name = j.name\r\n    if (j.value != undefined) this.updateFromJSON(j)\r\n  }\r\n\r\n  /**\r\n   * Updates the state of an existing identified `Parameter` through replication.\r\n   *\r\n   * @param {object} j - The j param.\r\n   */\r\n  updateFromJSON(j) {\r\n    if (!this.__param) return\r\n    if (this.__nextValue.fromJSON) this.__nextValue.fromJSON(j.value)\r\n    else this.__nextValue = j.value\r\n    this.__param.setValue(this.__nextValue)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('ParameterValueChange', ParameterValueChange)\r\n\r\nexport default ParameterValueChange\r\nexport { ParameterValueChange }\r\n","import { Color, Registry, shaderLibrary, GLShader } from '@zeainc/zea-engine'\r\n\r\n/**\r\n * Class representing Handle Shader.\r\n *\r\n * @extends {GLShader}\r\n */\r\nclass HandleShader extends GLShader {\r\n  /**\r\n   * Creates an instance of HandleShader.\r\n   *\r\n   * @param {*} gl - The gl value\r\n   */\r\n  constructor(gl) {\r\n    super(gl)\r\n\r\n    this.__shaderStages['VERTEX_SHADER'] = shaderLibrary.parseShader(\r\n      'HandleShader.vertexShader',\r\n      `\r\nprecision highp float;\r\n\r\nattribute vec3 positions;\r\n#ifdef ENABLE_TEXTURES\r\nattribute vec2 texCoords;\r\n#endif\r\n\r\n<%include file=\"GLSLUtils.glsl\"/>\r\n<%include file=\"stack-gl/transpose.glsl\"/>\r\n<%include file=\"drawItemId.glsl\"/>\r\n<%include file=\"drawItemTexture.glsl\"/>\r\n<%include file=\"modelMatrix.glsl\"/>\r\n\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\n\r\n#ifdef ENABLE_MULTI_DRAW\r\n<%include file=\"materialparams.glsl\"/>\r\n#else\r\nuniform int MaintainScreenSize;\r\nuniform float Overlay;\r\n#endif\r\n\r\n/* VS Outputs */\r\nvarying float v_drawItemId;\r\nvarying vec4 v_geomItemData;\r\nvarying vec3 v_viewPos;\r\n#ifdef ENABLE_TEXTURES\r\nvarying vec2 v_textureCoord;\r\n#endif\r\n\r\nvoid main(void) {\r\n  int drawItemId = getDrawItemId();\r\n  v_drawItemId = float(drawItemId);\r\n  v_geomItemData  = getInstanceData(drawItemId);\r\n  mat4 modelMatrix = getModelMatrix(drawItemId);\r\n  mat4 modelViewMatrix = viewMatrix * modelMatrix;\r\n\r\n  //////////////////////////////////////////////\r\n  // Material\r\n\r\n#ifdef ENABLE_MULTI_DRAW\r\n  vec2 materialCoords = v_geomItemData.zw;\r\n  vec4 materialValue1 = getMaterialValue(materialCoords, 1);\r\n  int maintainScreenSize = int(materialValue1.x + 0.5);\r\n  float overlay = materialValue1.y;\r\n#else\r\n  int maintainScreenSize = MaintainScreenSize;\r\n  float overlay = Overlay;\r\n#endif\r\n\r\n  //////////////////////////////////////////////\r\n  \r\n  if (maintainScreenSize != 0) {\r\n    float dist = modelViewMatrix[3][2];\r\n    float sc = abs(dist); // Note: items in front of the camera will have a negative value here.\r\n    mat4 scmat = mat4(\r\n      sc, 0.0, 0.0, 0.0,\r\n      0.0, sc, 0.0, 0.0,\r\n      0.0, 0.0, sc, 0.0,\r\n      0.0, 0.0, 0.0, 1.0\r\n    );\r\n    modelViewMatrix = modelViewMatrix * scmat;\r\n  }\r\n\r\n  vec4 viewPos = modelViewMatrix * vec4(positions, 1.0);\r\n  gl_Position = projectionMatrix * viewPos;\r\n\r\n  if(overlay > 0.0){\r\n    gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);\r\n  }\r\n\r\n  v_viewPos = viewPos.xyz;\r\n  v_textureCoord = texCoords;\r\n  v_textureCoord.y = 1.0 - v_textureCoord.y;// Flip y\r\n}\r\n`\r\n    )\r\n\r\n    this.__shaderStages['FRAGMENT_SHADER'] = shaderLibrary.parseShader(\r\n      'HandleShader.fragmentShader',\r\n      `\r\nprecision highp float;\r\n\r\n<%include file=\"GLSLUtils.glsl\"/>\r\n<%include file=\"math/constants.glsl\"/>\r\n<%include file=\"drawItemTexture.glsl\"/>\r\n<%include file=\"stack-gl/gamma.glsl\"/>\r\n<%include file=\"materialparams.glsl\"/>\r\n\r\n\r\n#if defined(DRAW_COLOR)\r\n\r\nuniform color BaseColor;\r\n\r\n#ifdef ENABLE_TEXTURES\r\nuniform sampler2D BaseColorTex;\r\nuniform int BaseColorTexType;\r\n#endif\r\n\r\n#elif defined(DRAW_GEOMDATA)\r\n\r\nuniform int floatGeomBuffer;\r\nuniform int passId;\r\n\r\n<%include file=\"GLSLBits.glsl\"/>\r\n\r\n#elif defined(DRAW_HIGHLIGHT)\r\n\r\n#ifdef ENABLE_FLOAT_TEXTURES\r\nvec4 getHighlightColor(int id) {\r\n  return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 4);\r\n}\r\n#else // ENABLE_FLOAT_TEXTURES\r\n\r\nuniform vec4 highlightColor;\r\n\r\nvec4 getHighlightColor() {\r\n    return highlightColor;\r\n}\r\n\r\n#endif // ENABLE_FLOAT_TEXTURES\r\n\r\n#endif // DRAW_HIGHLIGHT\r\n\r\n/* VS Outputs */\r\nvarying float v_drawItemId;\r\nvarying vec4 v_geomItemData;\r\nvarying vec3 v_viewPos;\r\n#ifdef ENABLE_TEXTURES\r\nvarying vec2 v_textureCoord;\r\n#endif\r\n\r\n\r\n#ifdef ENABLE_ES3\r\n  out vec4 fragColor;\r\n#endif\r\nvoid main(void) {\r\n#ifndef ENABLE_ES3\r\n  vec4 fragColor;\r\n#endif\r\n\r\n  int drawItemId = int(v_drawItemId + 0.5);\r\n\r\n  //////////////////////////////////////////////\r\n  // Color\r\n#if defined(DRAW_COLOR)\r\n\r\n\r\n#ifdef ENABLE_MULTI_DRAW\r\n\r\n  vec2 materialCoords = v_geomItemData.zw;\r\n  vec4 baseColor = toLinear(getMaterialValue(materialCoords, 0));\r\n\r\n#else // ENABLE_MULTI_DRAW\r\n\r\n#ifndef ENABLE_TEXTURES\r\n  vec4 baseColor = toLinear(BaseColor);\r\n#else\r\n  vec4 baseColor = getColorParamValue(BaseColor, BaseColorTex, BaseColorTexType, v_textureCoord);\r\n#endif // ENABLE_TEXTURES\r\n\r\n#endif // ENABLE_MULTI_DRAW\r\n\r\n  fragColor = baseColor;\r\n\r\n#ifdef ENABLE_INLINE_GAMMACORRECTION\r\n  fragColor.rgb = toGamma(fragColor.rgb);\r\n#endif\r\n\r\n  //////////////////////////////////////////////\r\n  // GeomData\r\n#elif defined(DRAW_GEOMDATA)\r\n\r\n  float viewDist = length(v_viewPos);\r\n\r\n  if(floatGeomBuffer != 0) {\r\n    fragColor.r = float(passId); \r\n    fragColor.g = float(v_drawItemId);\r\n    fragColor.b = 0.0;// TODO: store poly-id or something.\r\n    fragColor.a = viewDist;\r\n  } else {\r\n    ///////////////////////////////////\r\n    // UInt8 buffer\r\n    fragColor.r = mod(v_drawItemId, 256.) / 256.;\r\n    fragColor.g = (floor(v_drawItemId / 256.) + (float(passId) * 64.)) / 256.;\r\n\r\n    // encode the dist as a 16 bit float\r\n    vec2 float16bits = encode16BitFloatInto2xUInt8(viewDist);\r\n    fragColor.b = float16bits.x;\r\n    fragColor.a = float16bits.y;\r\n  }\r\n\r\n  //////////////////////////////////////////////\r\n  // Highlight\r\n#elif defined(DRAW_HIGHLIGHT)\r\n  \r\n  fragColor = getHighlightColor(drawItemId);\r\n\r\n#endif // DRAW_HIGHLIGHT\r\n\r\n#ifndef ENABLE_ES3\r\n  gl_FragColor = fragColor;\r\n#endif\r\n}\r\n`\r\n    )\r\n\r\n    this.finalize()\r\n  }\r\n\r\n  /**\r\n   * Returns parameter declarations\r\n   *\r\n   * @static\r\n   * @return {array} - Params declarations\r\n   */\r\n  static getParamDeclarations() {\r\n    const paramDescs = super.getParamDeclarations()\r\n    paramDescs.push({\r\n      name: 'BaseColor',\r\n      defaultValue: new Color(1.0, 1.0, 0.5),\r\n    })\r\n    paramDescs.push({\r\n      name: 'MaintainScreenSize',\r\n      defaultValue: 0,\r\n    })\r\n    paramDescs.push({ name: 'Overlay', defaultValue: 0.0 })\r\n    return paramDescs\r\n  }\r\n\r\n  /**\r\n   * The getPackedMaterialData method.\r\n   * @param {any} material - The material param.\r\n   * @return {any} - The return value.\r\n   */\r\n  static getPackedMaterialData(material) {\r\n    const matData = new Float32Array(8)\r\n    const baseColor = material.getParameter('BaseColor').getValue()\r\n    matData[0] = baseColor.r\r\n    matData[1] = baseColor.g\r\n    matData[2] = baseColor.b\r\n    matData[3] = baseColor.a\r\n    matData[4] = material.getParameter('MaintainScreenSize').getValue()\r\n    matData[5] = material.getParameter('Overlay').getValue()\r\n    return matData\r\n  }\r\n\r\n  /**\r\n   * Returns whether the shader's overlay is true or not.\r\n   *\r\n   * @static\r\n   * @return {boolean} - The overlay value\r\n   */\r\n  static isOverlay() {\r\n    return true\r\n  }\r\n}\r\n\r\nRegistry.register('HandleShader', HandleShader)\r\n\r\nexport default HandleShader\r\nexport { HandleShader }\r\n","const transformVertices = (geometry, xfo) => {\r\n  geometry.update()\r\n\r\n  const positions = geometry.getVertexAttribute('positions')\r\n  for (let i = 0; i < positions.length; i++) {\r\n    const v = positions.getValueRef(i)\r\n    const v2 = xfo.transformVec3(v)\r\n    v.set(v2.x, v2.y, v2.z)\r\n  }\r\n}\r\n\r\nexport default transformVertices\r\n","import { Color, Xfo, GeomItem, Material, Cylinder, Cone } from '@zeainc/zea-engine'\r\nimport BaseLinearMovementHandle from './BaseLinearMovementHandle'\r\nimport ParameterValueChange from '../UndoRedo/Changes/ParameterValueChange'\r\nimport './Shaders/HandleShader'\r\nimport transformVertices from './transformVertices'\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\n\r\n/**\r\n * Class representing a linear movement scene widget.\r\n *\r\n * @extends BaseLinearMovementHandle\r\n */\r\nclass LinearMovementHandle extends BaseLinearMovementHandle {\r\n  /**\r\n   * Create a linear movement scene widget.\r\n   *\r\n   * @param {string} name - The name value.\r\n   * @param {number} length - The length value.\r\n   * @param {number} thickness - The thickness value.\r\n   * @param {Color} color - The color value.\r\n   */\r\n  constructor(name, length = 0.1, thickness = 0.003, color = new Color()) {\r\n    super(name)\r\n    this.colorParam.setValue(color)\r\n\r\n    this.handleMat = new Material('handle', 'HandleShader')\r\n    this.handleMat.getParameter('BaseColor').setValue(color)\r\n    this.handleMat.getParameter('MaintainScreenSize').setValue(1)\r\n    this.handleMat.getParameter('Overlay').setValue(0.9)\r\n\r\n    const handleGeom = new Cylinder(thickness, length, 64)\r\n    handleGeom.getParameter('BaseZAtZero').setValue(true)\r\n    const tipGeom = new Cone(thickness * 4, thickness * 10, 64, true)\r\n    const handle = new GeomItem('handle', handleGeom, this.handleMat)\r\n\r\n    const tip = new GeomItem('tip', tipGeom, this.handleMat)\r\n    const tipXfo = new Xfo()\r\n    tipXfo.tr.set(0, 0, length)\r\n\r\n    transformVertices(tipGeom, tipXfo)\r\n\r\n    this.colorParam.on('valueChanged', () => {\r\n      this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    })\r\n\r\n    this.addChild(handle)\r\n    this.addChild(tip)\r\n  }\r\n\r\n  /**\r\n   * Applies a special shinning shader to the handle to illustrate interaction with it.\r\n   */\r\n  highlight() {\r\n    super.highlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.highlightColorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Removes the shining shader from the handle.\r\n   */\r\n  unhighlight() {\r\n    super.unhighlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Sets global xfo target parameter.\r\n   *\r\n   * @param {Parameter} param - The video param.\r\n   * @param {boolean} track - The track param.\r\n   */\r\n  setTargetParam(param, track = true) {\r\n    this.param = param\r\n    if (track) {\r\n      const __updateGizmo = () => {\r\n        this.getParameter('GlobalXfo').setValue(param.getValue())\r\n      }\r\n      __updateGizmo()\r\n      param.on('valueChanged', __updateGizmo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns target's global xfo parameter.\r\n   *\r\n   * @return {Parameter} - returns handle's target global Xfo.\r\n   */\r\n  getTargetParam() {\r\n    return this.param ? this.param : this.getParameter('GlobalXfo')\r\n  }\r\n\r\n  /**\r\n   * Handles the initially drag of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    this.grabPos = event.grabPos\r\n    const param = this.getTargetParam()\r\n    this.baseXfo = param.getValue()\r\n\r\n    this.change = new ParameterValueChange(param)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n  }\r\n\r\n  /**\r\n   * Handles drag action of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    const dragVec = event.holdPos.subtract(this.grabPos)\r\n\r\n    const newXfo = this.baseXfo.clone()\r\n    newXfo.tr.addInPlace(dragVec)\r\n\r\n    this.change.update({\r\n      value: newXfo,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    this.change = null\r\n  }\r\n}\r\n\r\nexport default LinearMovementHandle\r\nexport { LinearMovementHandle }\r\n","import { MathFunctions, Vec3, Xfo } from '@zeainc/zea-engine'\r\nimport Handle from './Handle'\r\nimport ParameterValueChange from '../UndoRedo/Changes/ParameterValueChange'\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\n\r\n/**\r\n * Class representing an axial rotation scene widget.\r\n *\r\n * @extends Handle\r\n */\r\nclass BaseAxialRotationHandle extends Handle {\r\n  /**\r\n   * Create an axial rotation scene widget.\r\n   *\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n  }\r\n\r\n  /**\r\n   * Sets global xfo target parameter\r\n   *\r\n   * @param {Parameter} param - The param param.\r\n   * @param {boolean} track - The track param.\r\n   */\r\n  setTargetParam(param, track = true) {\r\n    this.param = param\r\n    if (track) {\r\n      const __updateGizmo = () => {\r\n        this.getParameter('GlobalXfo').setValue(param.getValue())\r\n      }\r\n      __updateGizmo()\r\n      param.on('valueChanged', __updateGizmo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns target's global xfo parameter.\r\n   *\r\n   * @return {Parameter} - returns handle's target global Xfo.\r\n   */\r\n  getTargetParam() {\r\n    return this.param ? this.param : this.getParameter('GlobalXfo')\r\n  }\r\n\r\n  /**\r\n   * Handles the initially drag of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    this.baseXfo = this.getParameter('GlobalXfo').getValue().clone()\r\n    this.baseXfo.sc.set(1, 1, 1)\r\n    this.deltaXfo = new Xfo()\r\n\r\n    const param = this.getTargetParam()\r\n    const paramXfo = param.getValue()\r\n    this.offsetXfo = this.baseXfo.inverse().multiply(paramXfo)\r\n\r\n    this.vec0 = event.grabPos.subtract(this.baseXfo.tr)\r\n    this.grabCircleRadius = this.vec0.length()\r\n    this.vec0.normalizeInPlace()\r\n\r\n    this.change = new ParameterValueChange(param)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n  }\r\n\r\n  /**\r\n   * Handles drag action of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    const vec1 = event.holdPos.subtract(this.baseXfo.tr)\r\n    // const dragCircleRadius = vec1.length()\r\n    vec1.normalizeInPlace()\r\n\r\n    // modulate the angle by the radius the mouse moves\r\n    // away from the center of the handle.\r\n    // This makes it possible to rotate the object more than\r\n    // 180 degrees in a single movement.\r\n    // Note: this modulator made rotations quite unpredictable\r\n    // especially when the angle between the ray and the plane is acute.\r\n    // disabling for now.\r\n    const modulator = 1.0 //dragCircleRadius / this.grabCircleRadius\r\n    let angle = this.vec0.angleTo(vec1) * modulator\r\n    if (this.vec0.cross(vec1).dot(this.baseXfo.ori.getZaxis()) < 0) angle = -angle\r\n\r\n    if (this.range) {\r\n      angle = MathFunctions.clamp(angle, this.range[0], this.range[1])\r\n    }\r\n\r\n    if (event.shiftKey) {\r\n      // modulat the angle to X degree increments.\r\n      const increment = Math.degToRad(22.5)\r\n      angle = Math.floor(angle / increment) * increment\r\n    }\r\n\r\n    this.deltaXfo.ori.setFromAxisAndAngle(new Vec3(0, 0, 1), angle)\r\n\r\n    const newXfo = this.baseXfo.multiply(this.deltaXfo)\r\n    const value = newXfo.multiply(this.offsetXfo)\r\n\r\n    this.change.update({\r\n      value,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    this.change = null\r\n  }\r\n}\r\n\r\nexport default BaseAxialRotationHandle\r\nexport { BaseAxialRotationHandle }\r\n","import { Color, Xfo, NumberParameter, GeomItem, Material, Torus } from '@zeainc/zea-engine'\r\nimport BaseAxialRotationHandle from './BaseAxialRotationHandle'\r\nimport './Shaders/HandleShader'\r\n\r\n/**\r\n * Class representing an axial rotation scene widget. It has a `Torus` shape and is used to rotate objects around the specified axes.\r\n * You can do it by specifying the localXfo orientation:\r\n *\r\n * ```javascript\r\n * const xfo1 = new Xfo()\r\n * // This is rotation over `Y` axis\r\n * xfo1.ori.setFromAxisAndAngle(new Vec3(0, 1, 0), Math.PI * 0.5)\r\n * axialRotationHandle.getParameter('LocalXfo').setValue(xfo1)\r\n * ```\r\n * **Parameters**\r\n * * **Radius(`NumberParameter`):** Specifies the radius of the handler.\r\n *\r\n * @extends BaseAxialRotationHandle\r\n */\r\nclass AxialRotationHandle extends BaseAxialRotationHandle {\r\n  /**\r\n   * Create an axial rotation scene widget.\r\n   *\r\n   * @param {string} name - The name value.\r\n   * @param {number} radius - The radius value.\r\n   * @param {number} thickness - The thickness value.\r\n   * @param {Color} color - The color value.\r\n   */\r\n  constructor(name, radius, thickness, color = new Color(1, 1, 0)) {\r\n    super(name)\r\n\r\n    this.radiusParam = this.addParameter(new NumberParameter('Radius', radius))\r\n    this.colorParam.setValue(color)\r\n\r\n    this.handleMat = new Material('handle', 'HandleShader')\r\n    this.handleMat.getParameter('BaseColor').setValue(color)\r\n    this.handleMat.getParameter('MaintainScreenSize').setValue(1)\r\n    this.handleMat.getParameter('Overlay').setValue(0.9)\r\n\r\n    // const handleGeom = new Cylinder(radius, thickness * 2, 64, 2, false);\r\n    const handleGeom = new Torus(thickness, radius, 64, Math.PI * 0.5)\r\n    this.handle = new GeomItem('handle', handleGeom, this.handleMat)\r\n    this.handleXfo = new Xfo()\r\n\r\n    this.radiusParam.on('valueChanged', () => {\r\n      radius = this.radiusParam.getValue()\r\n      handleGeom.getParameter('OuterRadius').setValue(radius)\r\n      handleGeom.getParameter('InnerRadius').setValue(radius * 0.02)\r\n    })\r\n\r\n    this.colorParam.on('valueChanged', () => {\r\n      this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    })\r\n\r\n    this.addChild(this.handle)\r\n  }\r\n\r\n  /**\r\n   * Applies a special shinning shader to the handle to illustrate interaction with it.\r\n   */\r\n  highlight() {\r\n    super.highlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.highlightColorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Removes the shining shader from the handle.\r\n   */\r\n  unhighlight() {\r\n    super.unhighlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Returns handle's global Xfo\r\n   *\r\n   * @return {Xfo} - The Xfo value\r\n   */\r\n  getBaseXfo() {\r\n    return this.getParameter('GlobalXfo').getValue()\r\n  }\r\n\r\n  /**\r\n   * Handles the initially drag interaction of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    super.onDragStart(event)\r\n  }\r\n\r\n  /**\r\n   * Handles drag interaction of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    super.onDrag(event)\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    super.onDragEnd(event)\r\n  }\r\n}\r\n\r\nexport default AxialRotationHandle\r\nexport { AxialRotationHandle }\r\n","import Handle from './Handle'\r\nimport ParameterValueChange from '../UndoRedo/Changes/ParameterValueChange'\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\n\r\n/**\r\n * Class representing a planar movement scene widget.\r\n *\r\n * @extends Handle\r\n */\r\nclass PlanarMovementHandle extends Handle {\r\n  /**\r\n   * Create a planar movement scene widget.\r\n   *\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n    this.fullXfoManipulationInVR = true\r\n  }\r\n\r\n  /**\r\n   * Sets global xfo target parameter.\r\n   *\r\n   * @param {Parameter} param - The video param.\r\n   * @param {boolean} track - The track param.\r\n   */\r\n  setTargetParam(param, track = true) {\r\n    this.param = param\r\n    if (track) {\r\n      const __updateGizmo = () => {\r\n        this.getParameter('GlobalXfo').setValue(param.getValue())\r\n      }\r\n      __updateGizmo()\r\n      param.on('valueChanged', __updateGizmo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns target's global xfo parameter.\r\n   *\r\n   * @return {Parameter} - returns handle's target global Xfo.\r\n   */\r\n  getTargetParam() {\r\n    return this.param ? this.param : this.getParameter('GlobalXfo')\r\n  }\r\n\r\n  /**\r\n   * Handles the initially drag of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    this.grabPos = event.grabPos\r\n    const param = this.getTargetParam()\r\n    this.baseXfo = param.getValue()\r\n\r\n    this.change = new ParameterValueChange(param)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n  }\r\n\r\n  /**\r\n   * Handles drag action of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    const dragVec = event.holdPos.subtract(this.grabPos)\r\n\r\n    const newXfo = this.baseXfo.clone()\r\n    newXfo.tr.addInPlace(dragVec)\r\n\r\n    this.change.update({\r\n      value: newXfo,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    this.change = null\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * Event fired when a VR controller button is pressed over the handle.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRControllerButtonDown(event) {\r\n    if (this.fullXfoManipulationInVR) {\r\n      this.activeController = event.controller\r\n      const xfo = this.activeController.getTipXfo()\r\n      const handleXfo = this.getParameter('GlobalXfo').getValue()\r\n      this.grabOffset = xfo.inverse().multiply(handleXfo)\r\n    } else {\r\n      super.onVRControllerButtonDown(event)\r\n    }\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * The onVRPoseChanged method.\r\n   *\r\n   * @param {object} event - The event param.\r\n   */\r\n  onVRPoseChanged(event) {\r\n    if (this.fullXfoManipulationInVR) {\r\n      const xfo = this.activeController.getTipXfo()\r\n      const newXfo = xfo.multiply(this.grabOffset)\r\n      if (this.change) {\r\n        this.change.update({\r\n          value: newXfo,\r\n        })\r\n      } else {\r\n        const param = this.getTargetParam()\r\n        param.setValue(newXfo)\r\n      }\r\n    } else {\r\n      super.onVRPoseChanged(event)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a VR controller button is released over the handle.\r\n   *\r\n   * @param {object} event - The event param.\r\n   */\r\n  onVRControllerButtonUp(event) {\r\n    if (this.fullXfoManipulationInVR) {\r\n      this.change = null\r\n    } else {\r\n      super.onVRControllerButtonUp(event)\r\n    }\r\n  }\r\n}\r\n\r\nexport default PlanarMovementHandle\r\nexport { PlanarMovementHandle }\r\n","import { Color, Xfo, NumberParameter, GeomItem, Material, Cuboid } from '@zeainc/zea-engine'\r\nimport PlanarMovementHandle from './PlanarMovementHandle'\r\nimport './Shaders/HandleShader'\r\nimport transformVertices from './transformVertices'\r\n\r\n/**\r\n * Class representing a planar movement scene widget.\r\n *\r\n * **Parameters**\r\n * * **Size(`NumberParameter`):** Specifies the size of the plane handle.\r\n *\r\n * @extends Handle\r\n */\r\nclass XfoPlanarMovementHandle extends PlanarMovementHandle {\r\n  /**\r\n   * Create a planar movement scene widget.\r\n   * @param {string} name - The name value.\r\n   * @param {number} size - The size value.\r\n   * @param {Vec3} offset - The offset value.\r\n   * @param {Color} color - The color value.\r\n   */\r\n  constructor(name, size, offset, color = new Color()) {\r\n    super(name)\r\n\r\n    this.sizeParam = this.addParameter(new NumberParameter('Size', size))\r\n    this.colorParam.setValue(color)\r\n\r\n    this.handleMat = new Material('handle', 'HandleShader')\r\n    this.handleMat.getParameter('BaseColor').setValue(color)\r\n    this.handleMat.getParameter('MaintainScreenSize').setValue(1)\r\n    this.handleMat.getParameter('Overlay').setValue(0.9)\r\n\r\n    const handleGeom = new Cuboid(size, size, size * 0.02)\r\n\r\n    const handleGeomXfo = new Xfo()\r\n    handleGeomXfo.tr = offset\r\n    transformVertices(handleGeom, handleGeomXfo)\r\n    this.handle = new GeomItem('handle', handleGeom, this.handleMat)\r\n\r\n    this.sizeParam.on('valueChanged', () => {\r\n      size = this.sizeParam.getValue()\r\n      handleGeom.getParameter('X').setValue(size)\r\n      handleGeom.getParameter('Y').setValue(size)\r\n      handleGeom.getParameter('Z').setValue(size * 0.02)\r\n    })\r\n\r\n    this.colorParam.on('valueChanged', () => {\r\n      this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    })\r\n    this.addChild(this.handle)\r\n  }\r\n\r\n  /**\r\n   * Applies a special shinning shader to the handle to illustrate interaction with it.\r\n   */\r\n  highlight() {\r\n    super.highlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.highlightColorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Removes the shining shader from the handle.\r\n   */\r\n  unhighlight() {\r\n    super.unhighlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n  }\r\n}\r\n\r\nexport default XfoPlanarMovementHandle\r\nexport { XfoPlanarMovementHandle }\r\n","import { Color, Vec3, Xfo, EulerAngles, TreeItem, ColorParameter } from '@zeainc/zea-engine'\r\nimport Handle from './Handle'\r\nimport LinearMovementHandle from './LinearMovementHandle'\r\nimport AxialRotationHandle from './AxialRotationHandle'\r\nimport LinearScaleHandle from './LinearScaleHandle'\r\nimport SphericalRotationHandle from './SphericalRotationHandle'\r\nimport './Shaders/HandleShader'\r\nimport XfoPlanarMovementHandle from './XfoPlanarMovementHandle'\r\n\r\n/**\r\n * Class representing a xfo handle. Base transformations for objects in the scene\r\n *\r\n * **Parameters**\r\n * * **HighlightColor(`ColorParameter`):** Specifies the highlight color of the handle.\r\n *\r\n * @extends TreeItem\r\n */\r\nclass XfoHandle extends TreeItem {\r\n  /**\r\n   * Create an axial rotation scene widget.\r\n   *\r\n   * @param {number} size - The size value.\r\n   * @param {number} thickness - The thickness value.\r\n   */\r\n  constructor(size = 0.1, thickness = 0.003) {\r\n    super('XfoHandle')\r\n\r\n    this.highlightColorParam = this.addParameter(new ColorParameter('HighlightColor', new Color(1, 1, 1)))\r\n\r\n    this.highlightColorParam.on('valueChanged', () => {\r\n      const color = this.highlightColorParam.getValue()\r\n\r\n      this.traverse((item) => {\r\n        if (item instanceof Handle) item.getParameter('HighlightColor').setValue(color)\r\n      })\r\n    })\r\n    // ////////////////////////////////\r\n    // LinearMovementHandle\r\n\r\n    const translationHandles = new TreeItem('Translate')\r\n    // translationHandles.setVisible(false)\r\n    this.addChild(translationHandles)\r\n\r\n    const red = new Color(1, 0.1, 0.1)\r\n    const green = new Color('#32CD32') // limegreen https://www.rapidtables.com/web/color/green-color.html\r\n    const blue = new Color('#1E90FF') // dodgerblue https://www.rapidtables.com/web/color/blue-color.html\r\n    red.a = 1\r\n    green.a = 1\r\n    blue.a = 1\r\n\r\n    {\r\n      const linearXWidget = new LinearMovementHandle('linearX', size, thickness, red)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(0, 1, 0), Math.PI * 0.5)\r\n      linearXWidget.getParameter('LocalXfo').setValue(xfo)\r\n      translationHandles.addChild(linearXWidget)\r\n    }\r\n    {\r\n      const linearYWidget = new LinearMovementHandle('linearY', size, thickness, green)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * -0.5)\r\n      linearYWidget.getParameter('LocalXfo').setValue(xfo)\r\n      translationHandles.addChild(linearYWidget)\r\n    }\r\n    {\r\n      const linearZWidget = new LinearMovementHandle('linearZ', size, thickness, blue)\r\n      translationHandles.addChild(linearZWidget)\r\n    }\r\n\r\n    // ////////////////////////////////\r\n    // planarXYWidget\r\n    const planarSize = size * 0.35\r\n    {\r\n      const planarXYWidget = new XfoPlanarMovementHandle(\r\n        'planarXY',\r\n        planarSize,\r\n        new Vec3(planarSize * 0.5, planarSize * 0.5, 0.0),\r\n        blue\r\n      )\r\n      const xfo = new Xfo()\r\n      planarXYWidget.getParameter('LocalXfo').setValue(xfo)\r\n      translationHandles.addChild(planarXYWidget)\r\n    }\r\n    {\r\n      const planarYZWidget = new XfoPlanarMovementHandle(\r\n        'planarYZ',\r\n        planarSize,\r\n        new Vec3(planarSize * -0.5, planarSize * 0.5, 0.0),\r\n        red\r\n      )\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(0, 1, 0), Math.PI * 0.5)\r\n      planarYZWidget.getParameter('LocalXfo').setValue(xfo)\r\n      translationHandles.addChild(planarYZWidget)\r\n    }\r\n    {\r\n      const planarXZWidget = new XfoPlanarMovementHandle(\r\n        'planarXZ',\r\n        planarSize,\r\n        new Vec3(planarSize * 0.5, planarSize * 0.5, 0.0),\r\n        green\r\n      )\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * 0.5)\r\n      planarXZWidget.getParameter('LocalXfo').setValue(xfo)\r\n      translationHandles.addChild(planarXZWidget)\r\n    }\r\n\r\n    // ////////////////////////////////\r\n    // Rotation\r\n    const rotationHandles = new TreeItem('Rotate')\r\n    // rotationHandles.setVisible(false)\r\n    this.addChild(rotationHandles)\r\n    // {\r\n    //   const rotationWidget = new SphericalRotationHandle('rotation', size - thickness, new Color(1, 1, 1, 0))\r\n    //   rotationHandles.addChild(rotationWidget)\r\n    // }\r\n    {\r\n      const rotationXWidget = new AxialRotationHandle('rotationX', size * 0.75, thickness, red)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromEulerAngles(new EulerAngles(Math.PI * -0.5, Math.PI * -0.5, 0))\r\n      rotationXWidget.getParameter('LocalXfo').setValue(xfo)\r\n      rotationHandles.addChild(rotationXWidget)\r\n    }\r\n    {\r\n      const rotationYWidget = new AxialRotationHandle('rotationY', size * 0.75, thickness, green)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * -0.5)\r\n      rotationYWidget.getParameter('LocalXfo').setValue(xfo)\r\n      rotationHandles.addChild(rotationYWidget)\r\n    }\r\n    {\r\n      const rotationZWidget = new AxialRotationHandle('rotationZ', size * 0.75, thickness, blue)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(0, 0, 1), Math.PI * 0.5)\r\n      rotationZWidget.getParameter('LocalXfo').setValue(xfo)\r\n      rotationHandles.addChild(rotationZWidget)\r\n    }\r\n    /*\r\n    // ////////////////////////////////\r\n    // Scale - Not supported\r\n    const scaleHandles = new TreeItem('Scale')\r\n    scaleHandles.setVisible(false)\r\n    this.addChild(scaleHandles)\r\n\r\n    const scaleHandleLength = size * 0.95\r\n    {\r\n      const scaleXWidget = new LinearScaleHandle('scaleX', scaleHandleLength, thickness, red)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(0, 1, 0), Math.PI * 0.5)\r\n      scaleXWidget.getParameter('LocalXfo').setValue(xfo)\r\n      scaleHandles.addChild(scaleXWidget)\r\n    }\r\n    {\r\n      const scaleYWidget = new LinearScaleHandle('scaleY', scaleHandleLength, thickness, green)\r\n      const xfo = new Xfo()\r\n      xfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * -0.5)\r\n      scaleYWidget.getParameter('LocalXfo').setValue(xfo)\r\n      scaleHandles.addChild(scaleYWidget)\r\n    }\r\n    {\r\n      const scaleZWidget = new LinearScaleHandle('scaleZ', scaleHandleLength, thickness, blue)\r\n      scaleHandles.addChild(scaleZWidget)\r\n    }\r\n    */\r\n  }\r\n\r\n  /**\r\n   * Calculate the global Xfo for the handles.\r\n   *\r\n   * @return {Xfo} - The Xfo value\r\n   * @private\r\n   */\r\n  _cleanGlobalXfo() {\r\n    const parentItem = this.getParentItem()\r\n    if (parentItem !== undefined) {\r\n      const parentXfo = parentItem.getParameter('GlobalXfo').getValue().clone()\r\n      parentXfo.sc.set(1, 1, 1)\r\n      return parentXfo.multiply(this.__localXfoParam.getValue())\r\n    } else return this.__localXfoParam.getValue()\r\n  }\r\n\r\n  /**\r\n   * Displays handles depending on the specified mode(Move, Rotate, Scale).\r\n   * If nothing is specified, it hides all of them.\r\n   * @deprecated\r\n   * @param {string} handleManipulationMode - The mode of the Xfo parameter\r\n   */\r\n  showHandles(handleManipulationMode) {\r\n    this.setVisible(true)\r\n  }\r\n\r\n  /**\r\n   * Sets global xfo target parameter.\r\n   *\r\n   * @param {Parameter} param - The video param.\r\n   */\r\n  setTargetParam(param) {\r\n    this.param = param\r\n    this.traverse((item) => {\r\n      if (item instanceof Handle) item.setTargetParam(param, false)\r\n    })\r\n  }\r\n}\r\n\r\nexport default XfoHandle\r\nexport { XfoHandle }\r\n","import { Xfo, Group, Operator, OperatorInput, OperatorOutput } from '@zeainc/zea-engine'\r\n\r\n/**\r\n * An operator for aiming items at targets.\r\n *\r\n * @extends {Operator}\r\n */\r\nclass SelectionGroupXfoOperator extends Operator {\r\n  /**\r\n   * Creates an instance of SelectionGroupXfoOperator.\r\n   *\r\n   * @param {number} initialXfoModeParam - Initial XFO Mode, check `INITIAL_XFO_MODES` in `Group` documentation\r\n   * @param {XfoParameter} globalXfoParam - The GlobalXfo param found on the Group.\r\n   */\r\n  constructor(initialXfoModeParam, globalXfoParam) {\r\n    super()\r\n    this.addInput(new OperatorInput('InitialXfoMode')).setParam(initialXfoModeParam)\r\n    this.addOutput(new OperatorOutput('GroupGlobalXfo')).setParam(globalXfoParam)\r\n\r\n    this.currGroupXfo = new Xfo()\r\n  }\r\n\r\n  /**\r\n   * Updates operator inputs(`OperatorInput`) of current `Operator` using the specified `TreeItem`.\r\n   *\r\n   * @param {TreeItem} item - The tree item being added\r\n   */\r\n  addItem(item) {\r\n    this.addInput(new OperatorInput('MemberGlobalXfo' + this.getNumInputs())).setParam(item.getParameter('GlobalXfo'))\r\n    this.setDirty()\r\n  }\r\n\r\n  /**\r\n   * Finds and removes the `OperatorInput` of the specified `TreeItem` from current`Operator`.\r\n   *\r\n   * @param {TreeItem} item - The Bind Xfo calculated from the initial Transforms of the Group Members.\r\n   */\r\n  removeItem(item) {\r\n    // The first input it the 'InitialXfoMode', so remove the input for the specified item.\r\n    const xfoParam = item.getParameter('GlobalXfo')\r\n    for (let i = 1; i < this.getNumInputs(); i++) {\r\n      const input = this.getInputByIndex(i)\r\n      if (input.getParam() == xfoParam) {\r\n        this.removeInput(input)\r\n        this.setDirty()\r\n        return\r\n      }\r\n    }\r\n    throw new Error('Item not found in SelectionGroupXfoOperator')\r\n  }\r\n\r\n  /**\r\n   * Move the group. When the selection group is manipulated, this method is called.\r\n   * Here we propagate the delta to each of the selection members.\r\n   *\r\n   * @param {Xfo} xfo - The new value being set to the Groups GlobalXfo param.\r\n   */\r\n  backPropagateValue(xfo) {\r\n    const invXfo = this.currGroupXfo.inverse()\r\n    const delta = xfo.multiply(invXfo)\r\n    delta.ori.normalizeInPlace()\r\n\r\n    // During interactive manipulation, it is possible on heavy scenes\r\n    // that multiple backPropagateValue calls occur between renders.\r\n    // Note: that the currGroupXfo would not be re-computed in that time,\r\n    // and to this means that we cannot calculate the delta based on the current\r\n    // Value of the output. ('GroupGlobalXfo')\r\n    // By updating the cache of the currGroupXfo value, a successive call to\r\n    // backPropagateValue will apply to the result of the previous call to backPropagateValue\r\n    this.currGroupXfo = delta.multiply(this.currGroupXfo)\r\n    for (let i = 1; i < this.getNumInputs(); i++) {\r\n      const input = this.getInputByIndex(i)\r\n      const currXfo = input.getValue()\r\n      const result = delta.multiply(currXfo)\r\n      input.setValue(result)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculates a new Xfo for the group based on the members.\r\n   */\r\n  evaluate() {\r\n    const groupTransformOutput = this.getOutput('GroupGlobalXfo')\r\n    this.currGroupXfo = new Xfo()\r\n\r\n    if (this.getNumInputs() == 1) {\r\n      groupTransformOutput.setClean(this.currGroupXfo)\r\n      return\r\n    }\r\n\r\n    const initialXfoMode = this.getInput('InitialXfoMode').getValue()\r\n    if (initialXfoMode == Group.INITIAL_XFO_MODES.manual) {\r\n      // The xfo is manually set by the current global xfo.\r\n      this.currGroupXfo = groupTransformOutput.getValue().clone()\r\n      return\r\n    } else if (initialXfoMode == Group.INITIAL_XFO_MODES.first) {\r\n      const itemXfo = this.getInputByIndex(1).getValue()\r\n      this.currGroupXfo.tr = itemXfo.tr.clone()\r\n      this.currGroupXfo.ori = itemXfo.ori.clone()\r\n    } else if (initialXfoMode == Group.INITIAL_XFO_MODES.average) {\r\n      this.currGroupXfo.ori.set(0, 0, 0, 0)\r\n      let numTreeItems = 0\r\n      for (let i = 1; i < this.getNumInputs(); i++) {\r\n        const itemXfo = this.getInputByIndex(i).getValue()\r\n        this.currGroupXfo.tr.addInPlace(itemXfo.tr)\r\n\r\n        // Note: Averaging rotations causes weird and confusing GizmoRotation.\r\n        if (numTreeItems == 0) this.currGroupXfo.ori.addInPlace(itemXfo.ori)\r\n        numTreeItems++\r\n      }\r\n      this.currGroupXfo.tr.scaleInPlace(1 / numTreeItems)\r\n      // this.currGroupXfo.sc.scaleInPlace(1 / numTreeItems);\r\n    } else if (initialXfoMode == Group.INITIAL_XFO_MODES.globalOri) {\r\n      let numTreeItems = 0\r\n      for (let i = 1; i < this.getNumInputs(); i++) {\r\n        const itemXfo = this.getInputByIndex(i).getValue()\r\n        this.currGroupXfo.tr.addInPlace(itemXfo.tr)\r\n        numTreeItems++\r\n      }\r\n      this.currGroupXfo.tr.scaleInPlace(1 / numTreeItems)\r\n    } else {\r\n      throw new Error('Invalid Group.INITIAL_XFO_MODES.')\r\n    }\r\n    this.currGroupXfo.ori.normalizeInPlace()\r\n    groupTransformOutput.setClean(this.currGroupXfo)\r\n  }\r\n}\r\n\r\nexport default SelectionGroupXfoOperator\r\nexport { SelectionGroupXfoOperator }\r\n","import { Color, ColorParameter, BaseItem, TreeItem, SelectionSet, MultiChoiceParameter } from '@zeainc/zea-engine'\r\nimport SelectionGroupXfoOperator from './SelectionGroupXfoOperator.js'\r\n\r\nconst GROUP_XFO_MODES = {\r\n  disabled: 0,\r\n  manual: 1,\r\n  first: 2,\r\n  average: 3,\r\n  globalOri: 4,\r\n}\r\n\r\n/**\r\n * A specific type of `Group` class that contains/handles selection of one or more items from the scene.\r\n *\r\n * **Option parameter values**\r\n *\r\n * | Option | type | default | Description |\r\n * | --- | --- | --- | --- |\r\n * | selectionOutlineColor | `Color` | `new Color('#03e3ac'))`  and opacity of `0.1` | See `Color` documentation |\r\n * | branchSelectionOutlineColor | `Color` | `new Color('#81f1d5')` and opacity of `0.55` | See `Color` documentation |\r\n *\r\n * @extends {Group}\r\n */\r\nclass SelectionGroup extends SelectionSet {\r\n  /**\r\n   * Creates an instance of SelectionGroup.\r\n   *\r\n   *\r\n   * **Parameters**\r\n   * @param {object} options - Custom options for selection\r\n   */\r\n  constructor(options) {\r\n    super()\r\n\r\n    let selectionColor\r\n    let subtreeColor\r\n    options.selectionOutlineColor\r\n      ? (selectionColor = options.selectionOutlineColor)\r\n      : (selectionColor = new Color(3 / 255, 227 / 255, 172 / 255, 0.1))\r\n\r\n    if (options.branchSelectionOutlineColor) subtreeColor = options.branchSelectionOutlineColor\r\n    else {\r\n      subtreeColor = selectionColor.lerp(new Color('white'), 0.5)\r\n      subtreeColor.a = 0.1\r\n    }\r\n\r\n    this.getParameter('HighlightColor').setValue(selectionColor)\r\n    this.addParameter(new ColorParameter('SubtreeHighlightColor', subtreeColor))\r\n\r\n    this.__itemsParam.setFilterFn((item) => item instanceof BaseItem)\r\n\r\n    this.__initialXfoModeParam = this.addParameter(\r\n      new MultiChoiceParameter('InitialXfoMode', GROUP_XFO_MODES.average, ['manual', 'first', 'average', 'global'])\r\n    )\r\n\r\n    this.selectionGroupXfoOp = new SelectionGroupXfoOperator(\r\n      this.getParameter('InitialXfoMode'),\r\n      this.getParameter('GlobalXfo')\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Returns enum of available xfo modes.\r\n   *\r\n   * | Name | Default |\r\n   * | --- | --- |\r\n   * | manual | <code>0</code> |\r\n   * | first | <code>1</code> |\r\n   * | average | <code>2</code> |\r\n   * | globalOri | <code>3</code> |\r\n   */\r\n  static get INITIAL_XFO_MODES() {\r\n    return GROUP_XFO_MODES\r\n  }\r\n\r\n  /**\r\n   * Constructs a new selection group by copying the values from current one and returns it.\r\n   *\r\n   * @return {SelectionGroup} - Cloned selection group.\r\n   */\r\n  clone() {\r\n    const cloned = new SelectionGroup()\r\n    cloned.copyFrom(this)\r\n    return cloned\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {TreeItem} item -\r\n   * @param {number} index -\r\n   * @private\r\n   */\r\n  __bindItem(item, index) {\r\n    if (item instanceof TreeItem) {\r\n      const highlightColor = this.getParameter('HighlightColor').getValue()\r\n      highlightColor.a = this.getParameter('HighlightFill').getValue()\r\n      item.addHighlight('selected' + this.getId(), highlightColor, false)\r\n\r\n      const subTreeColor = this.getParameter('SubtreeHighlightColor').getValue()\r\n      item.getChildren().forEach((childItem) => {\r\n        if (childItem instanceof TreeItem) {\r\n          childItem.addHighlight('branchselected' + this.getId(), subTreeColor, true)\r\n        }\r\n      })\r\n\r\n      this.selectionGroupXfoOp.addItem(item, index)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {TreeItem} item -\r\n   * @param {number} index -\r\n   * @private\r\n   */\r\n  __unbindItem(item, index) {\r\n    if (item instanceof TreeItem) {\r\n      item.removeHighlight('selected' + this.getId())\r\n      item.getChildren().forEach((childItem) => {\r\n        if (childItem instanceof TreeItem) {\r\n          childItem.removeHighlight('branchselected' + this.getId(), true)\r\n        }\r\n      })\r\n\r\n      this.selectionGroupXfoOp.removeItem(item, index)\r\n    }\r\n  }\r\n}\r\n\r\nexport default SelectionGroup\r\nexport { SelectionGroup }\r\n","import UndoRedoManager from '../UndoRedoManager'\r\nimport Change from '../Change'\r\n\r\n/**\r\n * Represents a `Change` class for storing `Selection` values.\r\n *\r\n * @extends Change\r\n */\r\nclass SelectionChange extends Change {\r\n  /**\r\n   * Creates an instance of SelectionChange.\r\n   *\r\n   * @param {SelectionManager} selectionManager - The selectionManager value.\r\n   * @param {Set} prevSelection - The prevSelection value.\r\n   * @param {Set} newSelection - The newSelection value.\r\n   */\r\n  constructor(selectionManager, prevSelection, newSelection) {\r\n    super('SelectionChange')\r\n    this.__selectionManager = selectionManager\r\n    this.__prevSelection = prevSelection\r\n    this.__newSelection = newSelection\r\n  }\r\n\r\n  /**\r\n   * Sets the state of selections to the previous list of items selected.\r\n   */\r\n  undo() {\r\n    this.__selectionManager.setSelection(this.__prevSelection, false)\r\n  }\r\n\r\n  /**\r\n   * Restores the state of the selections to the latest the list of items selected.\r\n   */\r\n  redo() {\r\n    this.__selectionManager.setSelection(this.__newSelection, false)\r\n  }\r\n\r\n  /**\r\n   * Serializes selection values as a JSON object, allowing persistence/replication.\r\n   *\r\n   * @param {object} context - The appData param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n\r\n    const itemPaths = []\r\n    for (const treeItem of this.__newSelection) {\r\n      itemPaths.push(treeItem.getPath())\r\n    }\r\n    j.itemPaths = itemPaths\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores selection state from a JSON object.\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n\r\n    this.__selectionManager = context.appData.selectionManager\r\n    this.__prevSelection = new Set(this.__selectionManager.getSelection())\r\n\r\n    const sceneRoot = context.appData.scene.getRoot()\r\n    const newSelection = new Set()\r\n    for (const itemPath of j.itemPaths) {\r\n      newSelection.add(sceneRoot.resolvePath(itemPath, 1))\r\n    }\r\n    this.__newSelection = newSelection\r\n\r\n    this.__selectionManager.setSelection(this.__newSelection, false)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('SelectionChange', SelectionChange)\r\n\r\nexport default SelectionChange\r\nexport { SelectionChange }\r\n","import UndoRedoManager from '../UndoRedoManager'\r\nimport Change from '../Change'\r\n\r\n/**\r\n * Class representing a change of visibility state for selected items.\r\n *\r\n * @extends Change\r\n */\r\nclass SelectionVisibilityChange extends Change {\r\n  /**\r\n   * Create a toggle selection visibility.\r\n   *\r\n   * @param {Set} selection - The selection value.\r\n   * @param {boolean} state - The state value.\r\n   */\r\n  constructor(selection, state) {\r\n    super('Selection Visibility Change')\r\n    this.selection = selection\r\n    this.state = state\r\n    this._changeItemsVisibility(this.state)\r\n  }\r\n\r\n  /**\r\n   * Restores previous visibility status of the selected items\r\n   */\r\n  undo() {\r\n    this._changeItemsVisibility(!this.state)\r\n  }\r\n\r\n  /**\r\n   * Recreates previous visibility status of the selected items\r\n   */\r\n  redo() {\r\n    this._changeItemsVisibility(this.state)\r\n  }\r\n\r\n  /**\r\n   * Changes items visibility.\r\n   *\r\n   * @param {boolean} state - The state param.\r\n   * @private\r\n   */\r\n  _changeItemsVisibility(state) {\r\n    for (const treeItem of this.selection) {\r\n      treeItem.getParameter('Visible').setValue(state)\r\n    }\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('ToggleSelectionVisibility', SelectionVisibilityChange)\r\n\r\nexport default SelectionVisibilityChange\r\nexport { SelectionVisibilityChange }\r\n","import { EventEmitter, Color } from '@zeainc/zea-engine'\r\nimport XfoHandle from './Handles/XfoHandle'\r\nimport SelectionGroup from './SelectionGroup'\r\nimport SelectionChange from './UndoRedo/Changes/SelectionChange'\r\nimport SelectionVisibilityChange from './UndoRedo/Changes/SelectionVisibilityChange'\r\nimport UndoRedoManager from './UndoRedo/UndoRedoManager'\r\n\r\n/**\r\n * Class representing a selection manager\r\n *\r\n * **Events**\r\n * **leadSelectionChanged:** Triggered when selecting one item.\r\n * **selectionChanged:** Triggered when the selected objects change.\r\n *\r\n * @extends {EventEmitter}\r\n */\r\nclass SelectionManager extends EventEmitter {\r\n  /**\r\n   * Creates an instance of SelectionManager.\r\n   *\r\n   * @param {object} appData - The options object.\r\n   * @param {object} [options={}] - The appData value.\r\n   *  enableXfoHandles - enables display Xfo Gizmo handles when items are selected.\r\n   *  selectionOutlineColor - enables highlight color to use to outline selected items.\r\n   *  branchSelectionOutlineColor - enables highlight color to use to outline selected items.\r\n   */\r\n  constructor(appData, options = {}) {\r\n    super()\r\n    this.appData = appData\r\n    this.leadSelection = undefined\r\n    this.selectionGroup = new SelectionGroup(options)\r\n\r\n    if (options.enableXfoHandles === true) {\r\n      const size = 0.1\r\n      const thickness = size * 0.02\r\n      this.xfoHandle = new XfoHandle(size, thickness)\r\n      this.xfoHandle.setTargetParam(this.selectionGroup.getParameter('GlobalXfo'), false)\r\n      this.xfoHandle.setVisible(false)\r\n      this.xfoHandle.getParameter('HighlightColor').setValue(new Color(1, 1, 0))\r\n      this.xfoHandleVisible = true\r\n\r\n      this.selectionGroup.addChild(this.xfoHandle)\r\n    }\r\n\r\n    if (this.appData.renderer) {\r\n      this.setRenderer(this.appData.renderer)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds specified the renderer to the `SelectionManager` and attaches the `SelectionGroup`.\r\n   *\r\n   * @param {GLBaseRenderer} renderer - The renderer param.\r\n   */\r\n  setRenderer(renderer) {\r\n    if (this.__renderer == renderer) {\r\n      console.warn(`Renderer already set on SelectionManager`)\r\n      return\r\n    }\r\n    this.__renderer = renderer\r\n    this.__renderer.addTreeItem(this.selectionGroup)\r\n  }\r\n\r\n  /**\r\n   * Sets initial Xfo mode of the selection group.\r\n   *\r\n   * @see `Group` class documentation\r\n   *\r\n   * @param {number} mode - The Xfo mode\r\n   */\r\n  setXfoMode(mode) {\r\n    if (this.xfoHandle) {\r\n      this.selectionGroup.getParameter('InitialXfoMode').setValue(mode)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Displays handles depending on the specified mode(Move, Rotate, Scale).\r\n   * If nothing is specified, it hides all of them.\r\n   * @deprecated\r\n   * @param {boolean} enabled - The mode of the Xfo parameter\r\n   */\r\n  showHandles(enabled) {\r\n    this.xfoHandleVisible = enabled\r\n  }\r\n\r\n  /**\r\n   * Determines if the Xfo Manipulation handle should be displayed or not.\r\n   */\r\n  updateHandleVisibility() {\r\n    if (!this.xfoHandle) return\r\n    const selection = this.selectionGroup.getItems()\r\n    const visible = Array.from(selection).length > 0\r\n    this.xfoHandle.setVisible(visible && this.xfoHandleVisible)\r\n    this.__renderer.requestRedraw()\r\n  }\r\n\r\n  /**\r\n   * Returns an array with the selected items.\r\n   *\r\n   * @return {array} - The return value.\r\n   */\r\n  getSelection() {\r\n    return this.selectionGroup.getItems()\r\n  }\r\n\r\n  /**\r\n   * Sets a new selection of items in the `SelectionManager`\r\n   *\r\n   * @param {Set} newSelection - The newSelection param\r\n   * @param {boolean} [createUndo=true] - The createUndo param\r\n   */\r\n  setSelection(newSelection, createUndo = true) {\r\n    const selection = new Set(this.selectionGroup.getItems())\r\n    const prevSelection = new Set(selection)\r\n    for (const treeItem of newSelection) {\r\n      if (!selection.has(treeItem)) {\r\n        treeItem.setSelected(true)\r\n        selection.add(treeItem)\r\n      }\r\n    }\r\n    for (const treeItem of selection) {\r\n      if (!newSelection.has(treeItem)) {\r\n        treeItem.setSelected(false)\r\n        selection.delete(treeItem)\r\n      }\r\n    }\r\n\r\n    this.selectionGroup.setItems(selection)\r\n\r\n    // Deselecting can change the lead selected item.\r\n    if (selection.size > 0) this.__setLeadSelection(selection.values().next().value)\r\n    else this.__setLeadSelection()\r\n    this.updateHandleVisibility()\r\n\r\n    if (createUndo) {\r\n      const change = new SelectionChange(this, prevSelection, selection)\r\n      UndoRedoManager.getInstance().addChange(change)\r\n    }\r\n\r\n    this.emit('selectionChanged', { prevSelection, selection })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {TreeItem} treeItem - The treeItem value\r\n   * @private\r\n   */\r\n  __setLeadSelection(treeItem) {\r\n    if (this.leadSelection != treeItem) {\r\n      this.leadSelection = treeItem\r\n      this.emit('leadSelectionChanged', { treeItem })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The toggleItemSelection method.\r\n   *\r\n   * @param {TreeItem} treeItem - The treeItem param.\r\n   * @param {boolean} replaceSelection - The replaceSelection param.\r\n   */\r\n  toggleItemSelection(treeItem, replaceSelection = true) {\r\n    const selection = new Set(this.selectionGroup.getItems())\r\n    const prevSelection = new Set(selection)\r\n\r\n    // Avoid clearing the selection when we have the\r\n    // item already selected and are deselecting it.\r\n    // (to clear all selection)\r\n    if (replaceSelection && !(selection.size == 1 && selection.has(treeItem))) {\r\n      let clear = true\r\n      if (selection.has(treeItem)) {\r\n        let count = 1\r\n        treeItem.traverse((subTreeItem) => {\r\n          if (selection.has(subTreeItem)) {\r\n            count++\r\n          }\r\n        })\r\n        // Note: In some cases, the item is currently selected, and\r\n        // its children make up all the selected items. In that case\r\n        // the user intends to deselect the item and all its children.\r\n        // Avoid cleaning here, so the deselection can occur.\r\n        clear = count != selection.size\r\n      }\r\n\r\n      if (clear) {\r\n        Array.from(selection).forEach((item) => {\r\n          item.setSelected(false)\r\n        })\r\n        selection.clear()\r\n      }\r\n    }\r\n\r\n    let sel\r\n    if (!selection.has(treeItem)) {\r\n      treeItem.setSelected(true)\r\n      selection.add(treeItem)\r\n      sel = true\r\n    } else {\r\n      treeItem.setSelected(false)\r\n      selection.delete(treeItem)\r\n      sel = false\r\n    }\r\n\r\n    // const preExpandSelSize = selection.size;\r\n\r\n    // Now expand the selection to the subtree.\r\n    // treeItem.traverse((subTreeItem)=>{\r\n    //   if (sel) {\r\n    //     if(!selection.has(subTreeItem)) {\r\n    //       // subTreeItem.setSelected(true);\r\n    //       selection.add(subTreeItem);\r\n    //       // this.selectionGroup.addItem(treeItem);\r\n    //     }\r\n    //   }\r\n    //   else {\r\n    //     if(selection.has(subTreeItem)) {\r\n    //       subTreeItem.setSelected(false);\r\n    //       selection.delete(subTreeItem);\r\n    //       // this.selectionGroup.removeItem(treeItem);\r\n    //     }\r\n    //   }\r\n    // })\r\n\r\n    this.selectionGroup.setItems(selection)\r\n\r\n    if (sel && selection.size === 1) {\r\n      this.__setLeadSelection(treeItem)\r\n    } else if (!sel) {\r\n      // Deselecting can change the lead selected item.\r\n      if (selection.size === 1) this.__setLeadSelection(selection.values().next().value)\r\n      else if (selection.size === 0) this.__setLeadSelection()\r\n    }\r\n\r\n    const change = new SelectionChange(this, prevSelection, selection)\r\n    UndoRedoManager.getInstance().addChange(change)\r\n\r\n    this.updateHandleVisibility()\r\n    this.emit('selectionChanged', { prevSelection, selection })\r\n  }\r\n\r\n  /**\r\n   * Clears selection state by removing previous selected items and the Xfo handlers.\r\n   *\r\n   * @param {boolean} newChange - The newChange param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  clearSelection(newChange = true) {\r\n    const selection = new Set(this.selectionGroup.getItems())\r\n    if (selection.size == 0) return false\r\n    let prevSelection\r\n    if (newChange) {\r\n      prevSelection = new Set(selection)\r\n    }\r\n    for (const treeItem of selection) {\r\n      treeItem.setSelected(false)\r\n    }\r\n    selection.clear()\r\n    this.selectionGroup.setItems(selection)\r\n    this.updateHandleVisibility()\r\n    if (newChange) {\r\n      const change = new SelectionChange(this, prevSelection, selection)\r\n      UndoRedoManager.getInstance().addChange(change)\r\n      this.emit('selectionChanged', { selection, prevSelection })\r\n    }\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Selects the specified items replacing previous selection or concatenating new items to it.\r\n   *\r\n   * @param {array} treeItems - The treeItems param.\r\n   * @param {boolean} replaceSelection - The replaceSelection param.\r\n   */\r\n  selectItems(treeItems, replaceSelection = true) {\r\n    const selection = new Set(this.selectionGroup.getItems())\r\n    const prevSelection = new Set(selection)\r\n\r\n    if (replaceSelection) {\r\n      selection.clear()\r\n    }\r\n\r\n    for (const treeItem of treeItems) {\r\n      if (!selection.has(treeItem)) {\r\n        treeItem.setSelected(true)\r\n        selection.add(treeItem)\r\n      }\r\n    }\r\n\r\n    const change = new SelectionChange(this, prevSelection, selection)\r\n\r\n    UndoRedoManager.getInstance().addChange(change)\r\n\r\n    this.selectionGroup.setItems(selection)\r\n    if (selection.size === 1) {\r\n      this.__setLeadSelection(selection.values().next().value)\r\n    } else if (selection.size === 0) {\r\n      this.__setLeadSelection()\r\n    }\r\n    this.updateHandleVisibility()\r\n    this.emit('selectionChanged', { prevSelection, selection })\r\n  }\r\n\r\n  /**\r\n   * Deselects the specified items from the selection group.\r\n   *\r\n   * @param {array} treeItems - The treeItems param.\r\n   */\r\n  deselectItems(treeItems) {\r\n    const selection = new Set(this.selectionGroup.getItems())\r\n    const prevSelection = new Set(selection)\r\n\r\n    for (const treeItem of treeItems) {\r\n      if (selection.has(treeItem)) {\r\n        treeItem.setSelected(false)\r\n        selection.delete(treeItem)\r\n      }\r\n    }\r\n\r\n    this.selectionGroup.setItems(selection)\r\n    const change = new SelectionChange(this, prevSelection, selection)\r\n\r\n    UndoRedoManager.getInstance().addChange(change)\r\n\r\n    if (selection.size === 1) {\r\n      this.__setLeadSelection(selection.values().next().value)\r\n    } else if (selection.size === 0) {\r\n      this.__setLeadSelection()\r\n    }\r\n    this.updateHandleVisibility()\r\n    this.emit('selectionChanged', { prevSelection, selection })\r\n  }\r\n\r\n  /**\r\n   * Toggles selection visibility, if the visibility is `true`then sets it to `false` and vice versa.\r\n   */\r\n  toggleSelectionVisibility() {\r\n    if (this.leadSelection) {\r\n      const selection = this.selectionGroup.getItems()\r\n      const state = !this.leadSelection.getVisible()\r\n      const change = new SelectionVisibilityChange(selection, state)\r\n      UndoRedoManager.getInstance().addChange(change)\r\n    }\r\n  }\r\n\r\n  // ////////////////////////////////////\r\n  /**\r\n   * The startPickingMode method.\r\n   *\r\n   * @param {string} label - The label param.\r\n   * @param {function} fn - The fn param.\r\n   * @param {function} filterFn - The filterFn param.\r\n   * @param {number} count - The count param.\r\n   */\r\n  startPickingMode(label, fn, filterFn, count) {\r\n    // Display this in a status bar.\r\n    console.log(label)\r\n    this.__pickCB = fn\r\n    this.__pickFilter = filterFn\r\n    this.__pickCount = count\r\n    this.__picked = []\r\n  }\r\n\r\n  /**\r\n   * The pickingFilter method.\r\n   *\r\n   * @param {TreeItem} item - The item param.\r\n   * @return {any} The return value.\r\n   */\r\n  pickingFilter(item) {\r\n    return this.__pickFilter(item)\r\n  }\r\n\r\n  /**\r\n   * The pickingModeActive method.\r\n   *\r\n   * @return {boolean} The return value.\r\n   */\r\n  pickingModeActive() {\r\n    return this.__pickCB != undefined\r\n  }\r\n\r\n  /**\r\n   * The cancelPickingMode method.\r\n   */\r\n  cancelPickingMode() {\r\n    this.__pickCB = undefined\r\n  }\r\n\r\n  /**\r\n   * The pick method.\r\n   * @param {TreeItem} item - The item param.\r\n   */\r\n  pick(item) {\r\n    if (this.__pickCB) {\r\n      if (Array.isArray(item)) {\r\n        if (this.__pickFilter) this.__picked = this.__picked.concat(item.filter(this.__pickFilter))\r\n        else this.__picked = this.__picked.concat(item)\r\n      } else {\r\n        if (this.__pickFilter && !this.__pickFilter(item)) return\r\n        this.__picked.push(item)\r\n      }\r\n      if (this.__picked.length == this.__pickCount) {\r\n        this.__pickCB(this.__picked)\r\n        this.__pickCB = undefined\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default SelectionManager\r\nexport { SelectionManager }\r\n","import { TreeItem, Operator, Registry } from '@zeainc/zea-engine'\r\nimport UndoRedoManager from '../UndoRedoManager.js'\r\nimport Change from '../Change.js'\r\n\r\n/**\r\n * Class representing an `Add TreeItem` Change. Meaning that this should be called when you add a new `TreeItem` to the scene.\r\n *\r\n * @extends Change\r\n */\r\nclass TreeItemAddChange extends Change {\r\n  /**\r\n   * Creates an instance of TreeItemAddChange.\r\n   *\r\n   * @param {TreeItem} treeItem -\r\n   * @param {TreeItem} owner -\r\n   * @param {SelectionManager} selectionManager -\r\n   */\r\n  constructor(treeItem, owner, selectionManager) {\r\n    if (treeItem) {\r\n      super(treeItem.getName() + ' Added')\r\n      this.treeItem = treeItem\r\n      this.owner = owner\r\n      this.selectionManager = selectionManager\r\n      this.prevSelection = new Set(this.selectionManager.getSelection())\r\n      this.treeItemIndex = this.owner.addChild(this.treeItem)\r\n      this.selectionManager.setSelection(new Set([this.treeItem]), false)\r\n\r\n      this.treeItem.addRef(this)\r\n    } else {\r\n      super()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes the newly added TreeItem from its owner.\r\n   */\r\n  undo() {\r\n    if (this.treeItem instanceof Operator) {\r\n      const op = this.treeItem\r\n      op.detach()\r\n    } else if (this.treeItem instanceof TreeItem) {\r\n      this.treeItem.traverse((subTreeItem) => {\r\n        if (subTreeItem instanceof Operator) {\r\n          const op = subTreeItem\r\n          op.detach()\r\n        }\r\n      }, false)\r\n    }\r\n    this.owner.removeChild(this.treeItemIndex)\r\n    if (this.selectionManager) this.selectionManager.setSelection(this.prevSelection, false)\r\n  }\r\n\r\n  /**\r\n   * Restores undone `TreeItem`.\r\n   */\r\n  redo() {\r\n    // Now re-attach all the detached operators.\r\n    if (this.treeItem instanceof Operator) {\r\n      const op = this.treeItem\r\n      op.reattach()\r\n    } else if (subTreeItem instanceof TreeItem) {\r\n      this.treeItem.traverse((subTreeItem) => {\r\n        if (subTreeItem instanceof Operator) {\r\n          const op = subTreeItem\r\n          op.reattach()\r\n        }\r\n      }, false)\r\n    }\r\n    this.owner.addChild(this.treeItem)\r\n    if (this.selectionManager) this.selectionManager.setSelection(new Set([this.treeItem]), false)\r\n  }\r\n\r\n  /**\r\n   * Serializes `TreeItem` like instanced class into a JSON object.\r\n   *\r\n   * @param {object} context - The context treeItem\r\n   * @return {object} - JSON object\r\n   */\r\n  toJSON(context) {\r\n    const j = {\r\n      name: this.name,\r\n      treeItem: this.treeItem.toJSON(context),\r\n      treeItemPath: this.treeItem.getPath(),\r\n      treeItemIndex: this.treeItemIndex,\r\n    }\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Reconstructs `TreeItem` like parameter from JSON object.\r\n   *\r\n   * @param {object} j -The j treeItem\r\n   * @param {object} context - The context treeItem\r\n   */\r\n  fromJSON(j, context) {\r\n    const treeItem = Registry.constructClass(j.treeItem.type)\r\n    if (!treeItem) {\r\n      console.warn('resolvePath is unable to construct', j.treeItem)\r\n      return\r\n    }\r\n    this.name = j.name\r\n    this.treeItem = treeItem\r\n    this.treeItem.addRef(this)\r\n\r\n    this.treeItem.fromJSON(j.treeItem, context)\r\n    this.treeItemIndex = this.owner.addChild(this.treeItem, false, false)\r\n  }\r\n\r\n  /**\r\n   * Removes reference of the `TreeItem` from current change.\r\n   */\r\n  destroy() {\r\n    this.treeItem.removeRef(this)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('TreeItemAddChange', TreeItemAddChange)\r\n\r\nexport { TreeItemAddChange }\r\n","import UndoRedoManager from '../UndoRedoManager.js'\r\nimport Change from '../Change.js'\r\n\r\n/**\r\n * Class representing a `Move TreeItem` Change(Moving a TreeItem from one parent to another).\r\n *\r\n * @extends Change\r\n */\r\nclass TreeItemMoveChange extends Change {\r\n  /**\r\n   * Creates an instance of TreeItemMoveChange.\r\n   *\r\n   * @param {TreeItem} treeItem - The item to move.\r\n   * @param {TreeItem} newOwner - The new owner item.\r\n   * @memberof TreeItemMoveChange\r\n   */\r\n  constructor(treeItem, newOwner) {\r\n    if (treeItem) {\r\n      super(treeItem.getName() + ' Moved')\r\n      this.treeItem = treeItem\r\n      this.oldOwner = this.treeItem.getOwner()\r\n      this.oldOwnerIndex = this.oldOwner.getChildIndex(this.treeItem)\r\n      this.newOwner = newOwner\r\n      this.newOwner.addChild(this.treeItem, true)\r\n    } else {\r\n      super()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Inserts back the moved TreeItem in the old owner item(Rollbacks the move action).\r\n   */\r\n  undo() {\r\n    this.oldOwner.insertChild(this.treeItem, this.oldOwnerIndex, true)\r\n  }\r\n\r\n  /**\r\n   * Executes the move action inserting the TreeItem back to the new owner item.\r\n   */\r\n  redo() {\r\n    this.newOwner.addChild(this.treeItem, true)\r\n  }\r\n\r\n  /**\r\n   * Returns a JSON object with the specifications of the change(Typically used for replication).\r\n   *\r\n   * @param {object} context - The context value\r\n   * @return {object} - JSON object of the change\r\n   */\r\n  toJSON(context) {\r\n    const j = {\r\n      name: this.name,\r\n      treeItemPath: this.treeItem.getPath(),\r\n      newOwnerPath: this.newOwner.getPath(),\r\n    }\r\n\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores the Change state from the specified JSON object.\r\n   *\r\n   * @param {object} j - The serialized object with the change data.\r\n   * @param {object} context - The context value\r\n   */\r\n  fromJSON(j, context) {\r\n    const treeItem = appData.scene.getRoot().resolvePath(j.treeItemPath, 1)\r\n    if (!treeItem) {\r\n      console.warn('resolvePath is unable to resolve', j.treeItemPath)\r\n      return\r\n    }\r\n    const newOwner = appData.scene.getRoot().resolvePath(j.newOwnerPath, 1)\r\n    if (!newOwner) {\r\n      console.warn('resolvePath is unable to resolve', j.newOwnerPath)\r\n      return\r\n    }\r\n    this.name = j.name\r\n    this.treeItem = treeItem\r\n    this.newOwner = newOwner\r\n\r\n    this.oldOwner = this.treeItem.getOwner()\r\n    this.oldOwnerIndex = this.oldOwner.getChildIndex(this.treeItem)\r\n    this.newOwner.addChild(this.treeItem, true)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('TreeItemMoveChange', TreeItemMoveChange)\r\n\r\nexport { TreeItemMoveChange }\r\n","import { TreeItem, Operator } from '@zeainc/zea-engine'\r\nimport UndoRedoManager from '../UndoRedoManager.js'\r\nimport Change from '../Change.js'\r\n\r\n/**\r\n * Class representing a TreeItems removal Change,\r\n * taking into account that it would remove all the specified items ti their children\r\n *\r\n * @extends Change\r\n */\r\nclass TreeItemsRemoveChange extends Change {\r\n  /**\r\n   * Creates an instance of TreeItemsRemoveChange.\r\n   *\r\n   * @param {array} items - List of TreeItems\r\n   * @param {object} appData - The appData value\r\n   */\r\n  constructor(items, appData) {\r\n    super()\r\n    this.items = []\r\n    this.itemOwners = []\r\n    this.itemPaths = []\r\n    this.itemIndices = []\r\n    if (items) {\r\n      this.selectionManager = appData.selectionManager\r\n      this.prevSelection = new Set(this.selectionManager.getSelection())\r\n      this.items = items\r\n      this.newSelection = new Set(this.prevSelection)\r\n\r\n      const itemNames = []\r\n      this.items.forEach((item) => {\r\n        const owner = item.getOwner()\r\n        const itemIndex = owner.getChildIndex(item)\r\n        itemNames.push(item.getName())\r\n        item.addRef(this)\r\n        this.itemOwners.push(owner)\r\n        this.itemPaths.push(item.getPath())\r\n        this.itemIndices.push(itemIndex)\r\n\r\n        if (this.selectionManager && this.newSelection.has(item)) this.newSelection.delete(item)\r\n        if (item instanceof Operator) {\r\n          const op = item\r\n          op.detach()\r\n        } else if (item instanceof TreeItem) {\r\n          item.traverse((subTreeItem) => {\r\n            if (subTreeItem instanceof Operator) {\r\n              const op = subTreeItem\r\n              op.detach()\r\n            }\r\n            if (this.selectionManager && this.newSelection.has(subTreeItem)) this.newSelection.delete(subTreeItem)\r\n          }, false)\r\n        }\r\n\r\n        owner.removeChild(itemIndex)\r\n      })\r\n      this.selectionManager.setSelection(this.newSelection, false)\r\n\r\n      this.name = itemNames + ' Deleted'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restores all items removed in the change, reattaching them to their old owners.\r\n   */\r\n  undo() {\r\n    this.items.forEach((item, index) => {\r\n      this.itemOwners[index].insertChild(item, this.itemIndices[index], false, false)\r\n\r\n      // Now re-attach all the detached operators.\r\n      if (item instanceof Operator) {\r\n        const op = item\r\n        op.reattach()\r\n      } else if (subTreeItem instanceof TreeItem) {\r\n        item.traverse((subTreeItem) => {\r\n          if (subTreeItem instanceof Operator) {\r\n            const op = subTreeItem\r\n            op.reattach()\r\n          }\r\n        }, false)\r\n      }\r\n    })\r\n    if (this.selectionManager) this.selectionManager.setSelection(this.prevSelection, false)\r\n  }\r\n\r\n  /**\r\n   * Executes initial change to remove items from their owners.\r\n   */\r\n  redo() {\r\n    if (this.selectionManager) this.selectionManager.setSelection(this.newSelection, false)\r\n\r\n    // Now re-detach all the operators.\r\n    this.items.forEach((item, index) => {\r\n      this.itemOwners[index].removeChild(this.itemIndices[index])\r\n\r\n      if (item instanceof Operator) {\r\n        const op = item\r\n        op.detach()\r\n      } else if (subTreeItem instanceof TreeItem) {\r\n        item.traverse((subTreeItem) => {\r\n          if (subTreeItem instanceof Operator) {\r\n            const op = subTreeItem\r\n            op.detach()\r\n          }\r\n        }, false)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Serializes current change data as a JSON object, so this action can be stored/replicated somewhere else.\r\n   *\r\n   * @param {object} appData - The appData value\r\n   * @return {object} - JSON Object representation of current change\r\n   * @memberof TreeItemsRemoveChange\r\n   */\r\n  toJSON(appData) {\r\n    const j = {\r\n      name: this.name,\r\n      items: [],\r\n      itemPaths: this.itemPaths,\r\n      itemIndices: this.itemIndices,\r\n    }\r\n    this.items.forEach((item) => {\r\n      j.items.push(item.toJSON())\r\n    })\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores Change action from a JSON object.\r\n   *\r\n   * @param {object} j - The JSON object with Change data.\r\n   * @param {object} appData - The appData value\r\n   * @memberof TreeItemsRemoveChange\r\n   */\r\n  fromJSON(j, appData) {\r\n    this.name = j.name\r\n    j.itemPaths.forEach((itemPath) => {\r\n      const item = appData.scene.getRoot().resolvePath(itemPath, 1)\r\n      if (!item) {\r\n        console.warn('resolvePath is unable to resolve', itemPath)\r\n        return\r\n      }\r\n      const owner = item.getOwner()\r\n      this.itemOwners.push(owner)\r\n      this.itemPaths.push(item.getPath())\r\n      this.itemIndices.push(owner.getChildIndex(item))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * The destroy method cleans up any data requiring manual cleanup.\r\n   * Deleted items still on the undo stack are then flushed and any\r\n   * GPU resources cleaned up.\r\n   */\r\n  destroy() {\r\n    this.items.forEach((item) => item.removeRef(this))\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('TreeItemsRemoveChange', TreeItemsRemoveChange)\r\n\r\nexport { TreeItemsRemoveChange }\r\n","import { Vec2, Color, Xfo, GeomItem, Material, Rect, BaseTool } from '@zeainc/zea-engine'\r\n\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\nimport Handle from '../Handles/Handle'\r\n\r\n/**\r\n * Class representing a selection tool.\r\n *\r\n * @extends BaseTool\r\n */\r\nclass SelectionTool extends BaseTool {\r\n  /**\r\n   * Creates an instance of SelectionTool.\r\n   *\r\n   * @param {object} appData - The appData value\r\n   */\r\n  constructor(appData) {\r\n    super()\r\n\r\n    if (!appData) console.error('App data not provided to tool')\r\n    this.appData = appData\r\n    this.dragging = false\r\n    if (!appData.selectionManager)\r\n      console.error('`SelectionTool` requires `SelectionManager` to be provided in the `appData` object')\r\n    this.selectionManager = appData.selectionManager\r\n\r\n    this.selectionRect = new Rect(1, 1)\r\n    this.selectionRectMat = new Material('marker', 'ScreenSpaceShader')\r\n    this.selectionRectMat.getParameter('BaseColor').setValue(new Color('#03E3AC'))\r\n    this.selectionRectXfo = new Xfo()\r\n    this.selectionRectXfo.tr.set(0.5, 0.5, 0)\r\n    this.selectionRectXfo.sc.set(0, 0, 0)\r\n\r\n    this.rectItem = new GeomItem('selectionRect', this.selectionRect, this.selectionRectMat)\r\n    this.rectItem.getParameter('Visible').setValue(false)\r\n    this.appData.renderer.addTreeItem(this.rectItem)\r\n  }\r\n\r\n  /**\r\n   * activate this tool\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n    this.prevCursor = this.appData.renderer.getGLCanvas().style.cursor\r\n    this.appData.renderer.getGLCanvas().style.cursor = 'auto'\r\n  }\r\n\r\n  /**\r\n   * Disables tool usage.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n    this.appData.renderer.getGLCanvas().style.cursor = this.prevCursor\r\n  }\r\n\r\n  /**\r\n   * Activates selection tool.\r\n   */\r\n  setSelectionManager(selectionManager) {\r\n    this.selectionManager = selectionManager\r\n  }\r\n\r\n  setSelectionFilter(fn) {\r\n    this.__selectionFilterFn = fn\r\n  }\r\n\r\n  /**\r\n   * Activates selection tool.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n  }\r\n\r\n  /**\r\n   * Deactivates the selection tool.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n    this.selectionRectXfo.sc.set(0, 0, 0)\r\n    this.rectItem.getParameter('GlobalXfo').setValue(this.selectionRectXfo)\r\n    this.rectItem.getParameter('Visible').setValue(false)\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {GLViewport} viewport - The viewport value\r\n   * @param {*} delta - The delta value\r\n   * @private\r\n   */\r\n  __resizeRect(viewport, delta) {\r\n    const sc = new Vec2((1 / viewport.getWidth()) * 2, (1 / viewport.getHeight()) * 2)\r\n    const size = delta.multiply(sc)\r\n    this.selectionRectXfo.sc.set(Math.abs(size.x), Math.abs(size.y), 1)\r\n\r\n    const center = this.pointerDownPos.subtract(delta.scale(0.5))\r\n    const tr = center.multiply(sc).subtract(new Vec2(1, 1))\r\n\r\n    this.selectionRectXfo.tr.x = tr.x\r\n    this.selectionRectXfo.tr.y = -tr.y\r\n    this.rectItem.getParameter('GlobalXfo').setValue(this.selectionRectXfo)\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   * @private\r\n   */\r\n  onPointerDoublePress(event) {}\r\n\r\n  /**\r\n   * Event fired when a pointing device button is pressed while the pointer is over the tool.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onPointerDown(event) {\r\n    if (event.pointerType === 'touch' || (event.button == 0 && !event.altKey)) {\r\n      this.pointerDownPos = event.pointerPos\r\n      this.dragging = false\r\n\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device is moved while the cursor's hotspot is inside it.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onPointerMove(event) {\r\n    if (this.pointerDownPos) {\r\n      const delta = this.pointerDownPos.subtract(event.pointerPos)\r\n      const dist = delta.length()\r\n      // dragging only is activated after 4 pixels.\r\n      // This is to avoid causing as rect selection for nothing.\r\n      if (dist > 4) {\r\n        this.dragging = true\r\n        // Start drawing the selection rectangle on screen.\r\n        this.rectItem.getParameter('Visible').setValue(true)\r\n        this.__resizeRect(event.viewport, delta)\r\n      }\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is released while the pointer is over the tool.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onPointerUp(event) {\r\n    if (this.pointerDownPos) {\r\n      // event.viewport.renderGeomDataFbo();\r\n      if (this.dragging) {\r\n        this.rectItem.getParameter('Visible').setValue(false)\r\n        const pointerUpPos = event.pointerPos\r\n        const tl = new Vec2(\r\n          Math.min(this.pointerDownPos.x, pointerUpPos.x),\r\n          Math.min(this.pointerDownPos.y, pointerUpPos.y)\r\n        )\r\n        const br = new Vec2(\r\n          Math.max(this.pointerDownPos.x, pointerUpPos.x),\r\n          Math.max(this.pointerDownPos.y, pointerUpPos.y)\r\n        )\r\n\r\n        let geomItems = event.viewport.getGeomItemsInRect(tl, br)\r\n\r\n        if (this.__selectionFilterFn) {\r\n          const newSet = []\r\n          for (let i = 0; i < geomItems.length; i++) {\r\n            const treeItem = this.__selectionFilterFn(geomItems[i])\r\n            if (!newSet.includes(treeItem)) {\r\n              newSet.push(treeItem)\r\n            }\r\n          }\r\n          geomItems = newSet\r\n        }\r\n\r\n        if (!this.selectionManager) throw 'Please set the Selection Manager on the Selection Tool before using it.'\r\n        if (this.selectionManager.pickingModeActive()) {\r\n          this.selectionManager.pick(geomItems)\r\n        } else {\r\n          // Remove all the scene widgets. (UI elements should not be selectable.)\r\n          const regularGeomItems = new Set([...geomItems].filter((x) => !(x.getOwner() instanceof Handle)))\r\n\r\n          if (!event.shiftKey) {\r\n            this.selectionManager.selectItems(regularGeomItems, !event.ctrlKey)\r\n          } else {\r\n            this.selectionManager.deselectItems(regularGeomItems)\r\n          }\r\n\r\n          this.selectionRectXfo.sc.set(0, 0, 0)\r\n          this.rectItem.getParameter('GlobalXfo').setValue(this.selectionRectXfo)\r\n        }\r\n      } else {\r\n        const intersectionData = event.viewport.getGeomDataAtPos(event.pointerPos)\r\n        if (intersectionData != undefined && !(intersectionData.geomItem.getOwner() instanceof Handle)) {\r\n          let treeItem = intersectionData.geomItem\r\n          if (this.__selectionFilterFn) treeItem = this.__selectionFilterFn(treeItem)\r\n\r\n          if (this.selectionManager.pickingModeActive()) {\r\n            this.selectionManager.pick(treeItem)\r\n          } else {\r\n            if (!event.shiftKey) {\r\n              this.selectionManager.toggleItemSelection(treeItem, !event.ctrlKey)\r\n            } else {\r\n              const items = new Set()\r\n              items.add(treeItem)\r\n              this.selectionManager.deselectItems(items)\r\n            }\r\n          }\r\n        } else {\r\n          this.selectionManager.clearSelection()\r\n        }\r\n      }\r\n      this.pointerDownPos = undefined\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * Event fired when a VR controller button is pressed over a tool.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRControllerButtonDown(event) {\r\n    if (event.button == 1) {\r\n      if (!this.selectionManager) throw 'Please set the Selection Manager on the Selection Tool before using it.'\r\n      const intersectionData = event.controller.getGeomItemAtTip()\r\n      if (intersectionData != undefined && !(intersectionData.geomItem.getOwner() instanceof Handle)) {\r\n        this.selectionManager.toggleItemSelection(intersectionData.geomItem)\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport { SelectionTool }\r\n","/* eslint-disable require-jsdoc */\r\nconst util = newUtil()\r\nconst inliner = newInliner()\r\nconst fontFaces = newFontFaces()\r\nconst images = newImages()\r\n\r\n// Default impl options\r\nconst defaultOptions = {\r\n  // Default is to fail on error, no placeholder\r\n  imagePlaceholder: undefined,\r\n  // Default cache bust is false, it will use the cache\r\n  cacheBust: false,\r\n}\r\n\r\nconst domtoimage = {\r\n  toSvg: toSvg,\r\n  toPng: toPng,\r\n  toJpeg: toJpeg,\r\n  toBlob: toBlob,\r\n  toPixelData: toPixelData,\r\n  toCanvas: toCanvas,\r\n  impl: {\r\n    fontFaces: fontFaces,\r\n    images: images,\r\n    util: util,\r\n    inliner: inliner,\r\n    options: {},\r\n  },\r\n}\r\n\r\n/**\r\n     * @param {Node} node - The DOM Node object to render\r\n     * @param {Object} options - Rendering options\r\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\r\n     *          (excluding node means excluding it's children as well). Not called on the root node.\r\n     * @param {string} options.bgcolor - color for the background, any valid CSS color value.\r\n     * @param {number} options.width - width to be applied to node before rendering.\r\n     * @param {number} options.height - height to be applied to node before rendering.\r\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\r\n     * @param {number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\r\n                defaults to 1.0.\r\n     * @param {string} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\r\n     * @param {boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\r\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\r\n     * */\r\nfunction toSvg(node, options) {\r\n  options = options || {}\r\n  copyOptions(options)\r\n  return Promise.resolve(node)\r\n    .then(function (node) {\r\n      return cloneNode(node, options.filter, true)\r\n    })\r\n    .then(embedFonts)\r\n    .then(inlineImages)\r\n    .then(applyOptions)\r\n    .then(function (clone) {\r\n      return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node))\r\n    })\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {object} clone -\r\n   * @return {object} -\r\n   */\r\n  function applyOptions(clone) {\r\n    if (options.bgcolor) clone.style.backgroundColor = options.bgcolor\r\n\r\n    if (options.width) clone.style.width = options.width + 'px'\r\n    if (options.height) clone.style.height = options.height + 'px'\r\n\r\n    if (options.style)\r\n      Object.keys(options.style).forEach(function (property) {\r\n        clone.style[property] = options.style[property]\r\n      })\r\n\r\n    return clone\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Node} node - The DOM Node object to render\r\n * @param {Object} options - Rendering options, @see {@link toSvg}\r\n * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\r\n * */\r\nfunction toPixelData(node, options) {\r\n  return draw(node, options || {}).then(function (canvas) {\r\n    return canvas.getContext('2d').getImageData(0, 0, util.width(node), util.height(node)).data\r\n  })\r\n}\r\n\r\n/**\r\n * @param {Node} node - The DOM Node object to render\r\n * @param {Object} options - Rendering options, @see {@link toSvg}\r\n * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\r\n * */\r\nfunction toCanvas(node, options) {\r\n  return draw(node, options || {}).then(function (canvas) {\r\n    return canvas\r\n  })\r\n}\r\n\r\n/**\r\n * @param {Node} node - The DOM Node object to render\r\n * @param {Object} options - Rendering options, @see {@link toSvg}\r\n * @return {Promise} - A promise that is fulfilled with a PNG image data URL\r\n * */\r\nfunction toPng(node, options) {\r\n  return draw(node, options || {}).then(function (canvas) {\r\n    return canvas.toDataURL()\r\n  })\r\n}\r\n\r\n/**\r\n * @param {Node} node - The DOM Node object to render\r\n * @param {Object} options - Rendering options, @see {@link toSvg}\r\n * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\r\n * */\r\nfunction toJpeg(node, options) {\r\n  options = options || {}\r\n  return draw(node, options).then(function (canvas) {\r\n    return canvas.toDataURL('image/jpeg', options.quality || 1.0)\r\n  })\r\n}\r\n\r\n/**\r\n * @param {Node} node - The DOM Node object to render\r\n * @param {Object} options - Rendering options, @see {@link toSvg}\r\n * @return {Promise} - A promise that is fulfilled with a PNG image blob\r\n * */\r\nfunction toBlob(node, options) {\r\n  return draw(node, options || {}).then(util.canvasToBlob)\r\n}\r\n\r\n/**\r\n *\r\n *\r\n * @param {object} options -\r\n */\r\nfunction copyOptions(options) {\r\n  // Copy options to impl options for use in impl\r\n  if (typeof options.imagePlaceholder === 'undefined') {\r\n    domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder\r\n  } else {\r\n    domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder\r\n  }\r\n\r\n  if (typeof options.cacheBust === 'undefined') {\r\n    domtoimage.impl.options.cacheBust = defaultOptions.cacheBust\r\n  } else {\r\n    domtoimage.impl.options.cacheBust = options.cacheBust\r\n  }\r\n}\r\n/**\r\n *\r\n *\r\n * @param {*} domNode -\r\n * @param {*} options -\r\n * @return {*}\r\n */\r\nfunction draw(domNode, options) {\r\n  return toSvg(domNode, options)\r\n    .then(util.makeImage)\r\n    .then(util.delay(100))\r\n    .then(function (image) {\r\n      const canvas = newCanvas(domNode)\r\n      canvas.getContext('2d').drawImage(image, 0, 0)\r\n      return canvas\r\n    })\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} domNode -\r\n   * @return {*}\r\n   */\r\n  function newCanvas(domNode) {\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = options.width || util.width(domNode)\r\n    canvas.height = options.height || util.height(domNode)\r\n\r\n    if (options.bgcolor) {\r\n      const ctx = canvas.getContext('2d')\r\n      ctx.fillStyle = options.bgcolor\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n    }\r\n\r\n    return canvas\r\n  }\r\n}\r\n\r\nfunction cloneNode(node, filter, root) {\r\n  if (!root && filter && !filter(node)) return Promise.resolve()\r\n\r\n  return Promise.resolve(node)\r\n    .then(makeNodeCopy)\r\n    .then(function (clone) {\r\n      return cloneChildren(node, clone, filter)\r\n    })\r\n    .then(function (clone) {\r\n      return processClone(node, clone)\r\n    })\r\n\r\n  function makeNodeCopy(node) {\r\n    if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL())\r\n    return node.cloneNode(false)\r\n  }\r\n\r\n  function cloneChildren(original, clone, filter) {\r\n    const children = original.childNodes\r\n    if (children.length === 0) return Promise.resolve(clone)\r\n\r\n    return cloneChildrenInOrder(clone, util.asArray(children), filter).then(function () {\r\n      return clone\r\n    })\r\n\r\n    function cloneChildrenInOrder(parent, children, filter) {\r\n      let done = Promise.resolve()\r\n      children.forEach(function (child) {\r\n        done = done\r\n          .then(function () {\r\n            return cloneNode(child, filter)\r\n          })\r\n          .then(function (childClone) {\r\n            if (childClone) parent.appendChild(childClone)\r\n          })\r\n      })\r\n      return done\r\n    }\r\n  }\r\n\r\n  function processClone(original, clone) {\r\n    if (!(clone instanceof Element)) return clone\r\n\r\n    return Promise.resolve()\r\n      .then(cloneStyle)\r\n      .then(clonePseudoElements)\r\n      .then(copyUserInput)\r\n      .then(fixSvg)\r\n      .then(function () {\r\n        return clone\r\n      })\r\n\r\n    function cloneStyle() {\r\n      copyStyle(window.getComputedStyle(original), clone.style)\r\n\r\n      function copyStyle(source, target) {\r\n        if (source.cssText) target.cssText = source.cssText\r\n        else copyProperties(source, target)\r\n\r\n        function copyProperties(source, target) {\r\n          util.asArray(source).forEach(function (name) {\r\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name))\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    function clonePseudoElements() {\r\n      ;[':before', ':after'].forEach(function (element) {\r\n        clonePseudoElement(element)\r\n      })\r\n\r\n      function clonePseudoElement(element) {\r\n        const style = window.getComputedStyle(original, element)\r\n        const content = style.getPropertyValue('content')\r\n\r\n        if (content === '' || content === 'none') return\r\n\r\n        const className = util.uid()\r\n        clone.className = clone.className + ' ' + className\r\n        const styleElement = document.createElement('style')\r\n        styleElement.appendChild(formatPseudoElementStyle(className, element, style))\r\n        clone.appendChild(styleElement)\r\n\r\n        function formatPseudoElementStyle(className, element, style) {\r\n          const selector = '.' + className + ':' + element\r\n          const cssText = style.cssText ? formatCssText(style) : formatCssProperties(style)\r\n          return document.createTextNode(selector + '{' + cssText + '}')\r\n\r\n          function formatCssText(style) {\r\n            const content = style.getPropertyValue('content')\r\n            return style.cssText + ' content: ' + content + ';'\r\n          }\r\n\r\n          function formatCssProperties(style) {\r\n            return util.asArray(style).map(formatProperty).join('; ') + ';'\r\n\r\n            function formatProperty(name) {\r\n              return name + ': ' + style.getPropertyValue(name) + (style.getPropertyPriority(name) ? ' !important' : '')\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function copyUserInput() {\r\n      if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value\r\n      if (original instanceof HTMLInputElement) clone.setAttribute('value', original.value)\r\n    }\r\n\r\n    function fixSvg() {\r\n      if (!(clone instanceof SVGElement)) return\r\n      clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg')\r\n\r\n      if (!(clone instanceof SVGRectElement)) return\r\n      ;['width', 'height'].forEach(function (attribute) {\r\n        const value = clone.getAttribute(attribute)\r\n        if (!value) return\r\n\r\n        clone.style.setProperty(attribute, value)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nfunction embedFonts(node) {\r\n  return fontFaces.resolveAll().then(function (cssText) {\r\n    const styleNode = document.createElement('style')\r\n    node.appendChild(styleNode)\r\n    styleNode.appendChild(document.createTextNode(cssText))\r\n    return node\r\n  })\r\n}\r\n\r\nfunction inlineImages(node) {\r\n  return images.inlineAll(node).then(function () {\r\n    return node\r\n  })\r\n}\r\n\r\nfunction makeSvgDataUri(node, width, height) {\r\n  return Promise.resolve(node)\r\n    .then(function (node) {\r\n      node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml')\r\n      return new XMLSerializer().serializeToString(node)\r\n    })\r\n    .then(util.escapeXhtml)\r\n    .then(function (xhtml) {\r\n      return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>'\r\n    })\r\n    .then(function (foreignObject) {\r\n      return (\r\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' +\r\n        width +\r\n        '\" height=\"' +\r\n        height +\r\n        '\">' +\r\n        foreignObject +\r\n        '</svg>'\r\n      )\r\n    })\r\n    .then(function (svg) {\r\n      return 'data:image/svg+xml;charset=utf-8,' + svg\r\n    })\r\n}\r\n\r\nfunction newUtil() {\r\n  return {\r\n    escape: escape,\r\n    parseExtension: parseExtension,\r\n    mimeType: mimeType,\r\n    dataAsUrl: dataAsUrl,\r\n    isDataUrl: isDataUrl,\r\n    canvasToBlob: canvasToBlob,\r\n    resolveUrl: resolveUrl,\r\n    getAndEncode: getAndEncode,\r\n    uid: uid(),\r\n    delay: delay,\r\n    asArray: asArray,\r\n    escapeXhtml: escapeXhtml,\r\n    makeImage: makeImage,\r\n    width: width,\r\n    height: height,\r\n  }\r\n\r\n  function mimes() {\r\n    /*\r\n     * Only WOFF and EOT mime types for fonts are 'real'\r\n     * see http://www.iana.org/assignments/media-types/media-types.xhtml\r\n     */\r\n    const WOFF = 'application/font-woff'\r\n    const JPEG = 'image/jpeg'\r\n\r\n    return {\r\n      woff: WOFF,\r\n      woff2: WOFF,\r\n      ttf: 'application/font-truetype',\r\n      eot: 'application/vnd.ms-fontobject',\r\n      png: 'image/png',\r\n      jpg: JPEG,\r\n      jpeg: JPEG,\r\n      gif: 'image/gif',\r\n      tiff: 'image/tiff',\r\n      svg: 'image/svg+xml',\r\n    }\r\n  }\r\n\r\n  function parseExtension(url) {\r\n    const match = /\\.([^\\.\\/]*?)$/g.exec(url)\r\n    if (match) return match[1]\r\n    else return ''\r\n  }\r\n\r\n  function mimeType(url) {\r\n    const extension = parseExtension(url).toLowerCase()\r\n    return mimes()[extension] || ''\r\n  }\r\n\r\n  function isDataUrl(url) {\r\n    return url.search(/^(data:)/) !== -1\r\n  }\r\n\r\n  function toBlob(canvas) {\r\n    return new Promise(function (resolve) {\r\n      const binaryString = window.atob(canvas.toDataURL().split(',')[1])\r\n      const length = binaryString.length\r\n      const binaryArray = new Uint8Array(length)\r\n\r\n      for (let i = 0; i < length; i++) binaryArray[i] = binaryString.charCodeAt(i)\r\n\r\n      resolve(\r\n        new Blob([binaryArray], {\r\n          type: 'image/png',\r\n        })\r\n      )\r\n    })\r\n  }\r\n\r\n  function canvasToBlob(canvas) {\r\n    if (canvas.toBlob)\r\n      return new Promise(function (resolve) {\r\n        canvas.toBlob(resolve)\r\n      })\r\n\r\n    return toBlob(canvas)\r\n  }\r\n\r\n  function resolveUrl(url, baseUrl) {\r\n    const doc = document.implementation.createHTMLDocument()\r\n    const base = doc.createElement('base')\r\n    doc.head.appendChild(base)\r\n    const a = doc.createElement('a')\r\n    doc.body.appendChild(a)\r\n    base.href = baseUrl\r\n    a.href = url\r\n    return a.href\r\n  }\r\n\r\n  function uid() {\r\n    let index = 0\r\n\r\n    return function () {\r\n      return 'u' + fourRandomChars() + index++\r\n\r\n      function fourRandomChars() {\r\n        /* see http://stackoverflow.com/a/6248722/2519373 */\r\n        return ('0000' + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)).slice(-4)\r\n      }\r\n    }\r\n  }\r\n\r\n  function makeImage(uri) {\r\n    return new Promise(function (resolve, reject) {\r\n      const image = new Image()\r\n      image.onload = function () {\r\n        resolve(image)\r\n      }\r\n      image.onerror = reject\r\n      image.src = uri\r\n    })\r\n  }\r\n\r\n  function getAndEncode(url) {\r\n    const TIMEOUT = 30000\r\n    if (domtoimage.impl.options.cacheBust) {\r\n      // Cache bypass so we dont have CORS issues with cached images\r\n      // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\r\n      url += (/\\?/.test(url) ? '&' : '?') + new Date().getTime()\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n      const request = new XMLHttpRequest()\r\n\r\n      request.onreadystatechange = done\r\n      request.ontimeout = timeout\r\n      request.responseType = 'blob'\r\n      request.timeout = TIMEOUT\r\n      request.open('GET', url, true)\r\n      request.send()\r\n\r\n      let placeholder\r\n      if (domtoimage.impl.options.imagePlaceholder) {\r\n        const split = domtoimage.impl.options.imagePlaceholder.split(/,/)\r\n        if (split && split[1]) {\r\n          placeholder = split[1]\r\n        }\r\n      }\r\n\r\n      function done() {\r\n        if (request.readyState !== 4) return\r\n\r\n        if (request.status !== 200) {\r\n          if (placeholder) {\r\n            resolve(placeholder)\r\n          } else {\r\n            fail('cannot fetch resource: ' + url + ', status: ' + request.status)\r\n          }\r\n\r\n          return\r\n        }\r\n\r\n        const encoder = new FileReader()\r\n        encoder.onloadend = function () {\r\n          const content = encoder.result.split(/,/)[1]\r\n          resolve(content)\r\n        }\r\n        encoder.readAsDataURL(request.response)\r\n      }\r\n\r\n      function timeout() {\r\n        if (placeholder) {\r\n          resolve(placeholder)\r\n        } else {\r\n          fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url)\r\n        }\r\n      }\r\n\r\n      function fail(message) {\r\n        console.error(message)\r\n        resolve('')\r\n      }\r\n    })\r\n  }\r\n\r\n  function dataAsUrl(content, type) {\r\n    return 'data:' + type + ';base64,' + content\r\n  }\r\n\r\n  function escape(string) {\r\n    return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1')\r\n  }\r\n\r\n  function delay(ms) {\r\n    return function (arg) {\r\n      return new Promise(function (resolve) {\r\n        setTimeout(function () {\r\n          resolve(arg)\r\n        }, ms)\r\n      })\r\n    }\r\n  }\r\n\r\n  function asArray(arrayLike) {\r\n    const array = []\r\n    const length = arrayLike.length\r\n    for (let i = 0; i < length; i++) array.push(arrayLike[i])\r\n    return array\r\n  }\r\n\r\n  function escapeXhtml(string) {\r\n    return string.replace(/#/g, '%23').replace(/\\n/g, '%0A')\r\n  }\r\n\r\n  function width(node) {\r\n    const leftBorder = px(node, 'border-left-width')\r\n    const rightBorder = px(node, 'border-right-width')\r\n    return node.scrollWidth + leftBorder + rightBorder\r\n  }\r\n\r\n  function height(node) {\r\n    const topBorder = px(node, 'border-top-width')\r\n    const bottomBorder = px(node, 'border-bottom-width')\r\n    return node.scrollHeight + topBorder + bottomBorder\r\n  }\r\n\r\n  function px(node, styleProperty) {\r\n    const value = window.getComputedStyle(node).getPropertyValue(styleProperty)\r\n    return parseFloat(value.replace('px', ''))\r\n  }\r\n}\r\n\r\nfunction newInliner() {\r\n  const URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g\r\n\r\n  return {\r\n    inlineAll: inlineAll,\r\n    shouldProcess: shouldProcess,\r\n    impl: {\r\n      readUrls: readUrls,\r\n      inline: inline,\r\n    },\r\n  }\r\n\r\n  function shouldProcess(string) {\r\n    return string.search(URL_REGEX) !== -1\r\n  }\r\n\r\n  function readUrls(string) {\r\n    const result = []\r\n    let match\r\n    while ((match = URL_REGEX.exec(string)) !== null) {\r\n      result.push(match[1])\r\n    }\r\n    return result.filter(function (url) {\r\n      return !util.isDataUrl(url)\r\n    })\r\n  }\r\n\r\n  function inline(string, url, baseUrl, get) {\r\n    return Promise.resolve(url)\r\n      .then(function (url) {\r\n        return baseUrl ? util.resolveUrl(url, baseUrl) : url\r\n      })\r\n      .then(get || util.getAndEncode)\r\n      .then(function (data) {\r\n        return util.dataAsUrl(data, util.mimeType(url))\r\n      })\r\n      .then(function (dataUrl) {\r\n        return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3')\r\n      })\r\n\r\n    function urlAsRegex(url) {\r\n      return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g')\r\n    }\r\n  }\r\n\r\n  function inlineAll(string, baseUrl, get) {\r\n    if (nothingToInline()) return Promise.resolve(string)\r\n\r\n    return Promise.resolve(string)\r\n      .then(readUrls)\r\n      .then(function (urls) {\r\n        let done = Promise.resolve(string)\r\n        urls.forEach(function (url) {\r\n          done = done.then(function (string) {\r\n            return inline(string, url, baseUrl, get)\r\n          })\r\n        })\r\n        return done\r\n      })\r\n\r\n    function nothingToInline() {\r\n      return !shouldProcess(string)\r\n    }\r\n  }\r\n}\r\n\r\nfunction newFontFaces() {\r\n  return {\r\n    resolveAll: resolveAll,\r\n    impl: {\r\n      readAll: readAll,\r\n    },\r\n  }\r\n\r\n  function resolveAll() {\r\n    return readAll(document)\r\n      .then(function (webFonts) {\r\n        return Promise.all(\r\n          webFonts.map(function (webFont) {\r\n            return webFont.resolve()\r\n          })\r\n        )\r\n      })\r\n      .then(function (cssStrings) {\r\n        return cssStrings.join('\\n')\r\n      })\r\n  }\r\n\r\n  function readAll() {\r\n    return Promise.resolve(util.asArray(document.styleSheets))\r\n      .then(getCssRules)\r\n      .then(selectWebFontRules)\r\n      .then(function (rules) {\r\n        return rules.map(newWebFont)\r\n      })\r\n\r\n    function selectWebFontRules(cssRules) {\r\n      return cssRules\r\n        .filter(function (rule) {\r\n          return rule.type === CSSRule.FONT_FACE_RULE\r\n        })\r\n        .filter(function (rule) {\r\n          return inliner.shouldProcess(rule.style.getPropertyValue('src'))\r\n        })\r\n    }\r\n\r\n    function getCssRules(styleSheets) {\r\n      const cssRules = []\r\n      styleSheets.forEach(function (sheet) {\r\n        try {\r\n          util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules))\r\n        } catch (e) {\r\n          console.log('Error while reading CSS rules from ' + sheet.href, e.toString())\r\n        }\r\n      })\r\n      return cssRules\r\n    }\r\n\r\n    function newWebFont(webFontRule) {\r\n      return {\r\n        resolve: function resolve() {\r\n          const baseUrl = (webFontRule.parentStyleSheet || {}).href\r\n          return inliner.inlineAll(webFontRule.cssText, baseUrl)\r\n        },\r\n        src: function () {\r\n          return webFontRule.style.getPropertyValue('src')\r\n        },\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction newImages() {\r\n  return {\r\n    inlineAll: inlineAll,\r\n    impl: {\r\n      newImage: newImage,\r\n    },\r\n  }\r\n\r\n  function newImage(element) {\r\n    return {\r\n      inline: inline,\r\n    }\r\n\r\n    function inline(get) {\r\n      if (util.isDataUrl(element.src)) return Promise.resolve()\r\n\r\n      return Promise.resolve(element.src)\r\n        .then(get || util.getAndEncode)\r\n        .then(function (data) {\r\n          return util.dataAsUrl(data, util.mimeType(element.src))\r\n        })\r\n        .then(function (dataUrl) {\r\n          return new Promise(function (resolve, reject) {\r\n            element.onload = resolve\r\n            element.onerror = reject\r\n            element.src = dataUrl\r\n          })\r\n        })\r\n    }\r\n  }\r\n\r\n  function inlineAll(node) {\r\n    if (!(node instanceof Element)) return Promise.resolve(node)\r\n\r\n    return inlineBackground(node).then(function () {\r\n      if (node instanceof HTMLImageElement) return newImage(node).inline()\r\n      else\r\n        return Promise.all(\r\n          util.asArray(node.childNodes).map(function (child) {\r\n            return inlineAll(child)\r\n          })\r\n        )\r\n    })\r\n\r\n    function inlineBackground(node) {\r\n      const background = node.style.getPropertyValue('background')\r\n\r\n      if (!background) return Promise.resolve(node)\r\n\r\n      return inliner\r\n        .inlineAll(background)\r\n        .then(function (inlined) {\r\n          node.style.setProperty('background', inlined, node.style.getPropertyPriority('background'))\r\n        })\r\n        .then(function () {\r\n          return node\r\n        })\r\n    }\r\n  }\r\n}\r\n\r\nexport default domtoimage\r\n","import { Vec3, Xfo, EulerAngles, Color, TreeItem, GeomItem, Material, Plane, DataImage } from '@zeainc/zea-engine'\r\n\r\nimport domtoimage from './dom-to-image.js'\r\n\r\n/**\r\n * Traverse a dom tree and call a callback at each node.\r\n * @param {HTMLElement} node\r\n * @param {number} depth\r\n * @param {function} func\r\n */\r\nfunction traverse(node, depth, func) {\r\n  if (!func(node, depth)) return\r\n  node = node.firstChild\r\n  while (node) {\r\n    traverse(node, depth + 1, func)\r\n    node = node.nextSibling\r\n  }\r\n}\r\n\r\n/**\r\n * Computes the size of th element, including margins.\r\n * @param {HTMLElement} elem\r\n * @return {object}\r\n */\r\nfunction elemSize(elem) {\r\n  const computedStyle = elem.computedStyleMap()\r\n  const elmWidth = computedStyle.get('width').value\r\n  const elmMarginHorizontal = computedStyle.get('margin-left').value + computedStyle.get('margin-right').value\r\n  const elmHeight = computedStyle.get('height').value\r\n  const elmMarginVertical = computedStyle.get('margin-top').value + computedStyle.get('margin-bottom').value\r\n  return {\r\n    width: elmWidth + elmMarginHorizontal,\r\n    height: elmHeight + elmMarginVertical,\r\n  }\r\n}\r\n\r\nconst idx = 'data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\"'.length\r\nconst renderElementUI = (elem, size, key, callback) => {\r\n  domtoimage.toSvg(elem).then((uri) => {\r\n    // To work around a bug in domtoimage, we insert a viewBox into the SVG that ensures it renders\r\n    // all the way to the edges. otherwise, an image is generated that crops the left and bottom borders.\r\n    const uri2 = uri.substring(0, idx) + ` viewBox=\"0 0 ${size.width} ${size.height}\"` + uri.substring(idx)\r\n    const image = new Image()\r\n    image.onload = function () {\r\n      callback(image, key)\r\n    }\r\n    // image.onerror = reject\r\n    image.src = uri2\r\n  })\r\n}\r\nconst plane = new Plane(1, 1)\r\n\r\n/**\r\n * Class representing a VR controller UI.\r\n * @extends TreeItem\r\n */\r\nexport default class VRControllerUI extends TreeItem {\r\n  /**\r\n   * Create a VR controller UI.\r\n   * @param {any} appData - The appData value.\r\n   * @param {any} vrUIDOMElement - The vrUIDOMElement value.\r\n   */\r\n  constructor(appData, vrUIDOMElement) {\r\n    super('VRControllerUI')\r\n\r\n    this.setSelectable(false)\r\n    this.appData = appData\r\n    this.__vrUIDOMElement = vrUIDOMElement\r\n    this.__vrUIDOMElement.style.display = 'none'\r\n\r\n    // const debugGeomItem = new GeomItem('Debug', new Plane(1, 1), new Material('debug-ui-mat', 'FlatSurfaceShader'))\r\n    // // Flip it over so we see the front.\r\n    // const debugGeomItemXfo = new Xfo()\r\n    // debugGeomItemXfo.ori.setFromAxisAndAngle(new Vec3(0, 1, 0), Math.PI)\r\n    // this.addChild(debugGeomItem, false)\r\n\r\n    const uiOffset = new TreeItem('Offset')\r\n    this.addChild(uiOffset, false)\r\n    this.ready = false\r\n\r\n    /* */\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      resizeObserver.disconnect()\r\n\r\n      const localXfo = new Xfo()\r\n      const dpm = 0.0005 // dots-per-meter (1 each 1/2mm)\r\n      localXfo.sc.set(dpm, dpm, dpm)\r\n      localXfo.ori.setFromEulerAngles(new EulerAngles(Math.PI, Math.PI, 0))\r\n      // localXfo.ori.setFromAxisAndAngle(new Vec3(0, 1, 0), Math.PI)\r\n      // localXfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI)\r\n      uiOffset.getParameter('LocalXfo').setValue(localXfo)\r\n\r\n      this.size = new Vec3(vrUIDOMElement.clientWidth * dpm, vrUIDOMElement.clientHeight * dpm, 1)\r\n\r\n      // debugGeomItemXfo.sc = this.size\r\n      // debugGeomItem.getParameter('LocalXfo').setValue(debugGeomItemXfo)\r\n\r\n      traverse(vrUIDOMElement, 0, (elem, depth) => {\r\n        if (elem.className == 'button') {\r\n          const size = elemSize(elem)\r\n          // console.log(depth, elem.id, elem.className, size.width, size.height, elem.offsetLeft, elem.offsetTop)\r\n          const localXfo = new Xfo()\r\n\r\n          localXfo.sc.set(size.width, -size.height, 1)\r\n\r\n          // Note: The plane geom goes from [-0.5, -0.5] to [0.5, 0.5], so we need to offset it here.\r\n          // To debug the placements of these UI elements, display tbe backing panel by making this class\r\n          // in\r\n          localXfo.tr.set(\r\n            elem.offsetLeft + size.width * 0.5 - vrUIDOMElement.clientWidth * 0.5,\r\n            elem.offsetTop + size.height * 0.5 - vrUIDOMElement.clientHeight * 0.5,\r\n            -depth\r\n          )\r\n\r\n          const uimat = new Material('element-vr-ui-mat', 'FlatSurfaceShader')\r\n          uimat.getParameter('BaseColor').setValue(new Color(0.3, 0.3, 0.3))\r\n          const image = new DataImage()\r\n          uimat.getParameter('BaseColor').setValue(image)\r\n\r\n          const geomItem = new GeomItem('element-vr-ui', plane, uimat, localXfo)\r\n          geomItem.setSelectable(false)\r\n          uiOffset.addChild(geomItem, false)\r\n\r\n          const imageDatas = {}\r\n          if (size.width > 0 && size.height > 0) {\r\n            renderElementUI(elem, size, elem.id + elem.className, (data, key) => {\r\n              // console.log('Rendered', elem.id, elem.className, size.width, size.height, elem.offsetLeft, elem.offsetTop)\r\n              imageDatas[key] = data\r\n              image.setData(size.width, size.height, data)\r\n            })\r\n          }\r\n\r\n          const mutationObserver = new MutationObserver((mutations) => {\r\n            if (size.width == 0 || size.height == 0) return\r\n            // Each time the dome changes, we use the classList as a key to cache\r\n            // the generated images. Update the UI by adding and removing classes\r\n            const key = elem.id + elem.className\r\n            if (!imageDatas[key]) {\r\n              renderElementUI(elem, size, key, (data, key) => {\r\n                imageDatas[key] = data\r\n                image.setData(size.width, size.height, data)\r\n              })\r\n            } else {\r\n              image.setData(size.width, size.height, imageDatas[key])\r\n            }\r\n          })\r\n\r\n          mutationObserver.observe(elem, {\r\n            attributes: true,\r\n            characterData: false,\r\n            childList: false,\r\n            subtree: false,\r\n          })\r\n          return false\r\n        }\r\n        return true\r\n      })\r\n\r\n      this.ready = true\r\n      this.emit('ready')\r\n    })\r\n    resizeObserver.observe(vrUIDOMElement)\r\n    /* */\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n\r\n  /**\r\n   * The activate method.\r\n   */\r\n  activate() {\r\n    this.__vrUIDOMElement.style.display = 'block'\r\n  }\r\n\r\n  /**\r\n   * The deactivate method.\r\n   */\r\n  deactivate() {\r\n    this.__vrUIDOMElement.style.display = 'none'\r\n  }\r\n\r\n  /**\r\n   * The sendMouseEvent method.\r\n   * @param {any} eventName - The eventName param.\r\n   * @param {any} args - The args param.\r\n   * @param {any} element - The element param.\r\n   * @return {any} The return value.\r\n   */\r\n  sendMouseEvent(eventName, args, element) {\r\n    // console.log('sendMouseEvent:', eventName, element)\r\n\r\n    const event = new MouseEvent(\r\n      eventName,\r\n      Object.assign(\r\n        {\r\n          target: element,\r\n          view: window,\r\n          bubbles: true,\r\n          // composed: true,\r\n          cancelable: true,\r\n        },\r\n        args\r\n      )\r\n    )\r\n\r\n    // Dispatch the event to a leaf item in the DOM tree.\r\n    element.dispatchEvent(event)\r\n\r\n    // The event is re-cycled to generate a 'click' event on mouse down.\r\n    return event\r\n  }\r\n}\r\n","import { Vec3, Color, Xfo, Ray, GeomItem, Material, Lines, BaseTool, POINTER_TYPES } from '@zeainc/zea-engine'\r\nimport VRControllerUI from './VRControllerUI'\r\n\r\n/**\r\n * Class representing a VR UI tool.\r\n *\r\n * @extends BaseTool\r\n */\r\nclass VRUITool extends BaseTool {\r\n  /**\r\n   * Create a VR UI tool.\r\n   * @param {object} appData - The appData value.\r\n   * @param {HTMLElement} vrUIDOMElement - The  dom element we will use as the VR UI\r\n   */\r\n  constructor(appData, vrUIDOMElement) {\r\n    super(appData)\r\n    this.appData = appData\r\n\r\n    this.__vrUIDOMElement = vrUIDOMElement\r\n    this.controllerUI = new VRControllerUI(appData, this.__vrUIDOMElement)\r\n\r\n    // To debug the UI in the renderer without being in VR, enable this line.\r\n    // appData.renderer.addTreeItem(this.controllerUI)\r\n\r\n    const pointermat = new Material('pointermat', 'LinesShader')\r\n    pointermat.setSelectable(false)\r\n    pointermat.getParameter('BaseColor').setValue(new Color(1.2, 0, 0))\r\n\r\n    const line = new Lines()\r\n    line.setNumVertices(2)\r\n    line.setNumSegments(1)\r\n    line.setSegmentVertexIndices(0, 0, 1)\r\n    const positions = line.getVertexAttribute('positions')\r\n    positions.getValueRef(0).set(0.0, 0.0, 0.0)\r\n    positions.getValueRef(1).set(0.0, 0.0, -1.0)\r\n    line.setBoundingBoxDirty()\r\n    this.__pointerLocalXfo = new Xfo()\r\n    this.__pointerLocalXfo.sc.set(1, 1, 0.1)\r\n    this.__pointerLocalXfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * -0.2)\r\n\r\n    this.__uiPointerItem = new GeomItem('VRControllerPointer', line, pointermat)\r\n    this.__uiPointerItem.setSelectable(false)\r\n\r\n    this.__triggerHeld = false\r\n    this.uiOpen = false\r\n\r\n    this.appData.renderer.getXRViewport().then((xrvp) => {\r\n      xrvp.on('presentingChanged', (event) => {\r\n        if (this.uiOpen && !event.state) this.closeUI()\r\n      })\r\n    })\r\n  }\r\n\r\n  /**\r\n   * The getName method.\r\n   *\r\n   * @return {string} The return value.\r\n   */\r\n  getName() {\r\n    return 'VRUITool'\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    if (this.uiOpen) this.closeUI()\r\n    super.deactivateTool()\r\n  }\r\n\r\n  /**\r\n   * The displayUI method.\r\n   * @param {VRController} uiController - The uiController param.\r\n   * @param {VRController} pointerController - The pointerController param.\r\n   * @param {Xfo} headXfo - The headXfo param.\r\n   */\r\n  displayUI(uiController, pointerController, headXfo) {\r\n    this.controllerUI.activate()\r\n    this.uiController = uiController\r\n    this.pointerController = pointerController\r\n\r\n    const uiLocalXfo = this.controllerUI.getParameter('LocalXfo').getValue()\r\n    uiLocalXfo.ori.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * -0.6)\r\n    // uiLocalXfo.tr.set(0, -0.05, 0.08)\r\n\r\n    if (this.pointerController) {\r\n      const xfoA = this.uiController.getTreeItem().getParameter('GlobalXfo').getValue()\r\n      const xfoB = this.pointerController.getTreeItem().getParameter('GlobalXfo').getValue()\r\n      const headToCtrlA = xfoA.tr.subtract(headXfo.tr)\r\n      const headToCtrlB = xfoB.tr.subtract(headXfo.tr)\r\n      if (headToCtrlA.cross(headToCtrlB).dot(headXfo.ori.getYaxis()) > 0.0) {\r\n        uiLocalXfo.tr.set(0.05, -0.05, 0.08)\r\n      } else {\r\n        uiLocalXfo.tr.set(-0.05, -0.05, 0.08)\r\n      }\r\n    } else {\r\n      uiLocalXfo.tr.set(0, -0.05, 0.08)\r\n    }\r\n\r\n    this.controllerUI.getParameter('LocalXfo').setValue(uiLocalXfo)\r\n\r\n    if (this.uiController) {\r\n      this.uiController.getTipItem().addChild(this.controllerUI, false)\r\n      if (this.pointerController) this.pointerController.getTipItem().addChild(this.__uiPointerItem, false)\r\n\r\n      if (this.appData.session) {\r\n        const postMessage = () => {\r\n          this.appData.session.pub('pose-message', {\r\n            interfaceType: 'VR',\r\n            showUIPanel: {\r\n              controllerId: this.uiController.getId(),\r\n              localXfo: uiLocalXfo.toJSON(),\r\n              size: this.controllerUI.size.toJSON(),\r\n            },\r\n          })\r\n        }\r\n        if (!this.controllerUI.ready) {\r\n          this.controllerUI.on('ready', postMessage)\r\n        } else {\r\n          postMessage()\r\n        }\r\n      }\r\n    }\r\n    this.uiOpen = true\r\n  }\r\n\r\n  /**\r\n   * The closeUI method.\r\n   */\r\n  closeUI() {\r\n    this.controllerUI.deactivate()\r\n\r\n    if (this.uiController) {\r\n      this.uiController.getTipItem().removeChildByHandle(this.controllerUI)\r\n      if (this.pointerController) {\r\n        this.pointerController.getTipItem().removeChildByHandle(this.__uiPointerItem)\r\n      }\r\n\r\n      if (this.appData.session) {\r\n        this.appData.session.pub('pose-message', {\r\n          interfaceType: 'VR',\r\n          closehideUIPanel: {\r\n            controllerId: this.uiController.getId(),\r\n          },\r\n        })\r\n      }\r\n    }\r\n    this.uiOpen = false\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * The setPointerLength method.\r\n   * @param {number} length - The length param.\r\n   */\r\n  setPointerLength(length) {\r\n    this.__pointerLocalXfo.sc.set(1, 1, length)\r\n    this.__uiPointerItem.getParameter('LocalXfo').setValue(this.__pointerLocalXfo)\r\n  }\r\n\r\n  /**\r\n   * The calcUIIntersection method.\r\n   *\r\n   * @return {object|undefined} The return value.\r\n   */\r\n  calcUIIntersection() {\r\n    const pointerXfo = this.__uiPointerItem.getParameter('GlobalXfo').getValue()\r\n    const pointerVec = pointerXfo.ori.getZaxis().negate()\r\n    const ray = new Ray(pointerXfo.tr, pointerVec)\r\n\r\n    const planeXfo = this.controllerUI.getParameter('GlobalXfo').getValue()\r\n    const planeSize = this.controllerUI.size.multiply(planeXfo.sc)\r\n\r\n    const plane = new Ray(planeXfo.tr, planeXfo.ori.getZaxis().negate())\r\n    const res = ray.intersectRayPlane(plane)\r\n    if (res <= 0) {\r\n      // Let the pointer shine right past the UI.\r\n      this.setPointerLength(0.5)\r\n      return\r\n    }\r\n    const hitOffset = pointerXfo.tr.add(pointerVec.scale(res)).subtract(plane.start)\r\n    const x = hitOffset.dot(planeXfo.ori.getXaxis()) / planeSize.x\r\n    const y = hitOffset.dot(planeXfo.ori.getYaxis()) / planeSize.y\r\n    if (Math.abs(x) > 0.5 || Math.abs(y) > 0.5) {\r\n      // Let the pointer shine right past the UI.\r\n      this.setPointerLength(0.5)\r\n      return\r\n    }\r\n    this.setPointerLength(res / planeXfo.sc.z)\r\n    const rect = this.__vrUIDOMElement.getBoundingClientRect()\r\n    return {\r\n      clientX: Math.round(x * -rect.width + rect.width / 2),\r\n      clientY: Math.round(y * -rect.height + rect.height / 2),\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The sendEventToUI method.\r\n   * @param {string} eventName - The eventName param.\r\n   * @param {any} args - The args param.\r\n   * @return {any} The return value.\r\n   */\r\n  sendEventToUI(eventName, args) {\r\n    const hit = this.calcUIIntersection()\r\n    if (hit) {\r\n      hit.offsetX = hit.pageX = hit.pageX = hit.screenX = hit.clientX\r\n      hit.offsetY = hit.pageY = hit.pageY = hit.screenY = hit.clientY\r\n\r\n      let element = document.elementFromPoint(hit.clientX, hit.clientY)\r\n      if (element) {\r\n        if (element.shadowRoot) element = element.shadowRoot.elementFromPoint(hit.clientX, hit.clientY)\r\n        if (element != this._element) {\r\n          if (this._element) this.controllerUI.sendMouseEvent('mouseleave', Object.assign(args, hit), this._element)\r\n          this._element = element\r\n          this.controllerUI.sendMouseEvent('mouseenter', Object.assign(args, hit), this._element)\r\n        }\r\n        this.controllerUI.sendMouseEvent(eventName, Object.assign(args, hit), this._element)\r\n      } else {\r\n        this._element = null\r\n      }\r\n      return this._element\r\n    } else if (this._element) {\r\n      this.controllerUI.sendMouseEvent('mouseleave', Object.assign(args, hit), this._element)\r\n      this._element = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The onVRControllerButtonDown method.\r\n   * @param {object} event - The event param.\r\n   */\r\n  onPointerDown(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      if (event.controller == this.pointerController && this.uiOpen) {\r\n        this.__triggerHeld = true\r\n        const target = this.sendEventToUI('mousedown', {\r\n          button: event.button - 1,\r\n        })\r\n        if (target) {\r\n          this.__triggerDownElem = target\r\n        } else {\r\n          this.__triggerDownElem = null\r\n        }\r\n        // While the UI is open, no other tools get events.\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The onVRControllerButtonUp method.\r\n   * @param {object} event - The event param.\r\n   */\r\n  onPointerUp(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      if (event.controller == this.pointerController && this.uiOpen) {\r\n        this.__triggerHeld = false\r\n        const target = this.sendEventToUI('mouseup', {\r\n          button: event.button - 1,\r\n        })\r\n        if (target && this.__triggerDownElem == target) {\r\n          this.sendEventToUI('mouseup', {\r\n            button: event.button - 1,\r\n          })\r\n        }\r\n        this.__triggerDownElem = null\r\n        // While the UI is open, no other tools get events.\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The onVRPoseChanged method.\r\n   * @param {object} event - The event param.\r\n   */\r\n  onPointerMove(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      if (!this.uiOpen) {\r\n        if (\r\n          !event.controllers[0] ||\r\n          event.controllers[0].buttonPressed ||\r\n          !event.controllers[1] ||\r\n          event.controllers[1].buttonPressed\r\n        ) {\r\n          return\r\n        }\r\n        // Controller coordinate system\r\n        // X = Horizontal.\r\n        // Y = Up.\r\n        // Z = Towards handle base.\r\n        const headXfo = event.viewXfo\r\n        const checkControllers = (ctrlA, ctrlB) => {\r\n          // Note: do not open the UI when the controller buttons are pressed.\r\n          const xfoA = ctrlA.getTreeItem().getParameter('GlobalXfo').getValue()\r\n          const headToCtrlA = xfoA.tr.subtract(headXfo.tr)\r\n          headToCtrlA.normalizeInPlace()\r\n          if (headToCtrlA.angleTo(xfoA.ori.getYaxis()) < Math.PI * 0.25) {\r\n            this.displayUI(ctrlA, ctrlB, headXfo)\r\n            event.setCapture(this)\r\n            event.stopPropagation()\r\n            return true\r\n          }\r\n          return false\r\n        }\r\n\r\n        if (checkControllers(event.controllers[0], event.controllers[1])) return\r\n        if (checkControllers(event.controllers[1], event.controllers[0])) return\r\n      } else {\r\n        // Controller coordinate system\r\n        // X = Horizontal.\r\n        // Y = Up.\r\n        // Z = Towards handle base.\r\n        const headXfo = event.viewXfo\r\n        const checkControllers = () => {\r\n          const xfoA = this.uiController.getTreeItem().getParameter('GlobalXfo').getValue()\r\n          const headToCtrlA = xfoA.tr.subtract(headXfo.tr)\r\n          headToCtrlA.normalizeInPlace()\r\n          if (headToCtrlA.angleTo(xfoA.ori.getYaxis()) > Math.PI * 0.5) {\r\n            // Remove ourself from the system.\r\n            this.closeUI()\r\n            if (event.getCapture() == this) {\r\n              event.releaseCapture(this)\r\n            }\r\n            return false\r\n          }\r\n          return true\r\n        }\r\n\r\n        if (checkControllers()) {\r\n          this.sendEventToUI('mousemove', {})\r\n        }\r\n        // While the UI is open, no other tools get events.\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default VRUITool\r\nexport { VRUITool }\r\n","import { Quat, Color, Xfo, GeomItem, Material, Cross, BaseTool, POINTER_TYPES } from '@zeainc/zea-engine'\r\n// import Handle from '../../Handles/Handle'\r\nimport UndoRedoManager from '../../UndoRedo/UndoRedoManager'\r\nimport Change from '../../UndoRedo/Change'\r\n\r\n/**\r\n * Class representing a hold objects change.\r\n *\r\n * @extends Change\r\n */\r\nclass HoldObjectsChange extends Change {\r\n  /**\r\n   * Create a hold objects change.\r\n   *\r\n   * @param {object} data - The data value.\r\n   */\r\n  constructor(data) {\r\n    super('HoldObjectsChange')\r\n\r\n    this.__selection = []\r\n    this.__prevXfos = []\r\n    this.__newXfos = []\r\n\r\n    if (data) this.update(data)\r\n  }\r\n\r\n  /**\r\n   * The undo method.\r\n   */\r\n  undo() {\r\n    for (let i = 0; i < this.__selection.length; i++) {\r\n      if (this.__selection[i] && this.__prevXfos[i]) {\r\n        this.__selection[i].getParameter('GlobalXfo').setValue(this.__prevXfos[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The redo method.\r\n   */\r\n  redo() {\r\n    for (let i = 0; i < this.__selection.length; i++) {\r\n      if (this.__selection[i] && this.__newXfos[i]) {\r\n        this.__selection[i].getParameter('GlobalXfo').setValue(this.__newXfos[i])\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The update method.\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    if (updateData.newItem) {\r\n      this.__selection[updateData.newItemId] = updateData.newItem\r\n      this.__prevXfos[updateData.newItemId] = updateData.newItem.getParameter('GlobalXfo').getValue()\r\n    } else if (updateData.changeXfos) {\r\n      for (let i = 0; i < updateData.changeXfoIds.length; i++) {\r\n        const gidx = updateData.changeXfoIds[i]\r\n        if (!this.__selection[gidx]) continue\r\n        this.__selection[gidx].getParameter('GlobalXfo').setValue(updateData.changeXfos[i])\r\n        this.__newXfos[gidx] = updateData.changeXfos[i]\r\n      }\r\n    }\r\n    this.emit('updated', updateData)\r\n  }\r\n\r\n  /**\r\n   * The toJSON method.\r\n   * @param {object} context - The context param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n\r\n    const itemPaths = []\r\n    for (let i = 0; i < this.__selection.length; i++) {\r\n      if (this.__selection[i]) {\r\n        itemPaths[i] = this.__selection[i].getPath()\r\n      } else {\r\n        itemPaths.push(null)\r\n      }\r\n    }\r\n    j.itemPaths = itemPaths\r\n\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * The fromJSON method.\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n\r\n    const sceneRoot = context.appData.scene.getRoot()\r\n    this.__selection = []\r\n    for (let i = 0; i < j.itemPaths.length; i++) {\r\n      const itemPath = j.itemPaths[i]\r\n      if (itemPath && itemPath != '') {\r\n        const newItem = sceneRoot.resolvePath(itemPath, 1)\r\n        if (newItem != sceneRoot) {\r\n          this.__selection[i] = newItem\r\n          this.__prevXfos[i] = newItem.getParameter('GlobalXfo').getValue()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the state of an existing identified `Parameter` through replication.\r\n   *\r\n   * @param {object} j - The j param.\r\n   */\r\n  updateFromJSON(j) {\r\n    this.update(j)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('HoldObjectsChange', HoldObjectsChange)\r\n\r\n/**\r\n * Class representing a VR hold objects tool.\r\n * @extends BaseTool\r\n */\r\nclass VRHoldObjectsTool extends BaseTool {\r\n  /**\r\n   * Create a VR hold objects tool.\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n\r\n    this.appData = appData\r\n    this.__pressedButtonCount = 0\r\n\r\n    this.__freeIndices = []\r\n    this.__vrControllers = []\r\n    this.__heldObjectCount = 0\r\n    this.__heldGeomItems = []\r\n    this.__highlightedGeomItemIds = [] // controller id to held goem id.\r\n    this.__heldGeomItemIds = [] // controller id to held goem id.\r\n    this.__heldGeomItemRefs = []\r\n    this.__heldGeomItemOffsets = []\r\n  }\r\n\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n\r\n    this.appData.renderer.getGLCanvas().style.cursor = 'crosshair'\r\n\r\n    const addIconToController = (controller) => {\r\n      // The tool might already be deactivated.\r\n      if (!this.__activated) return\r\n      // const cross = new Cross(0.03)\r\n      // const mat = new Material('Cross', 'FlatSurfaceShader')\r\n      // mat.getParameter('BaseColor').setValue(new Color('#03E3AC'))\r\n      // mat.visibleInGeomDataBuffer = false\r\n      // const geomItem = new GeomItem('HandleToolTip', cross, mat)\r\n      // controller.getTipItem().removeAllChildren()\r\n      // controller.getTipItem().addChild(geomItem, false)\r\n    }\r\n\r\n    this.appData.renderer.getXRViewport().then((xrvp) => {\r\n      for (const controller of xrvp.getControllers()) {\r\n        addIconToController(controller)\r\n      }\r\n      this.addIconToControllerId = xrvp.on('controllerAdded', (event) => addIconToController(event.controller))\r\n    })\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n\r\n    this.appData.renderer.getXRViewport().then((xrvp) => {\r\n      // for(let controller of xrvp.getControllers()) {\r\n      //   controller.getTipItem().removeAllChildren();\r\n      // }\r\n      xrvp.removeListenerById('controllerAdded', this.addIconToControllerId)\r\n    })\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * The computeGrabXfo method.\r\n   * @param {array} refs - The refs param.\r\n   * @return {Xfo} The return value.\r\n   */\r\n  computeGrabXfo(refs) {\r\n    let grabXfo\r\n    if (refs.length == 1) {\r\n      grabXfo = this.__vrControllers[refs[0]].getTipXfo()\r\n    } else if (refs.length == 2) {\r\n      const xfo0 = this.__vrControllers[refs[0]].getTipXfo()\r\n      const xfo1 = this.__vrControllers[refs[1]].getTipXfo()\r\n\r\n      xfo0.ori.alignWith(xfo1.ori)\r\n\r\n      grabXfo = new Xfo()\r\n      grabXfo.tr = xfo0.tr.lerp(xfo1.tr, 0.5)\r\n      grabXfo.ori = xfo0.ori.lerp(xfo1.ori, 0.5)\r\n\r\n      let vec0 = xfo1.tr.subtract(xfo0.tr)\r\n      vec0.normalizeInPlace()\r\n      const vec1 = grabXfo.ori.getXaxis()\r\n      if (vec0.dot(vec1) < 0.0) vec0 = vec0.negate()\r\n\r\n      const angle = vec0.angleTo(vec1)\r\n      if (angle > 0) {\r\n        const axis = vec1.cross(vec0)\r\n        axis.normalizeInPlace()\r\n        const align = new Quat()\r\n        align.setFromAxisAndAngle(axis, angle)\r\n        grabXfo.ori = align.multiply(grabXfo.ori)\r\n      }\r\n    }\r\n    return grabXfo\r\n  }\r\n\r\n  /**\r\n   * The initAction method.\r\n   */\r\n  initAction() {\r\n    for (let i = 0; i < this.__heldGeomItems.length; i++) {\r\n      const heldGeom = this.__heldGeomItems[i]\r\n      if (!heldGeom) continue\r\n      const grabXfo = this.computeGrabXfo(this.__heldGeomItemRefs[i])\r\n      this.__heldGeomItemOffsets[i] = grabXfo.inverse().multiply(heldGeom.getParameter('GlobalXfo').getValue())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is pressed\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerDown(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      const id = event.controller.getId()\r\n      this.__vrControllers[id] = event.controller\r\n\r\n      // const intersectionData = event.controller.getGeomItemAtTip()\r\n      const geomItem = this.__highlightedGeomItemIds[id]\r\n      if (geomItem) {\r\n        // if (geomItem.getOwner() instanceof Handle) return false\r\n\r\n        // console.log(\"onMouseDown on Geom\"); // + \" Material:\" + geomItem.getMaterial().name);\r\n        // console.log(geomItem.getPath()) // + \" Material:\" + geomItem.getMaterial().name);\r\n\r\n        let gidx = this.__heldGeomItems.indexOf(geomItem)\r\n        if (gidx == -1) {\r\n          gidx = this.__heldGeomItems.length\r\n          this.__heldObjectCount++\r\n          this.__heldGeomItems.push(geomItem)\r\n          this.__heldGeomItemRefs[gidx] = [id]\r\n          this.__heldGeomItemIds[id] = gidx\r\n\r\n          const changeData = {\r\n            newItem: geomItem,\r\n            newItemId: gidx,\r\n          }\r\n          if (!this.change) {\r\n            this.change = new HoldObjectsChange(changeData)\r\n            UndoRedoManager.getInstance().addChange(this.change)\r\n          } else {\r\n            this.change.update(changeData)\r\n          }\r\n        } else {\r\n          this.__heldGeomItemIds[id] = gidx\r\n          this.__heldGeomItemRefs[gidx].push(id)\r\n        }\r\n        this.initAction()\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is released while the pointer is over the tool.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerUp(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      const id = event.controller.getId()\r\n\r\n      this.__pressedButtonCount--\r\n      if (this.__heldGeomItemIds[id] !== undefined) {\r\n        const gidx = this.__heldGeomItemIds[id]\r\n        const refs = this.__heldGeomItemRefs[gidx]\r\n        refs.splice(refs.indexOf(id), 1)\r\n        if (refs.length == 0) {\r\n          this.__heldObjectCount--\r\n          this.__heldGeomItems[gidx] = undefined\r\n\r\n          this.change = undefined\r\n        }\r\n        this.__heldGeomItemIds[id] = undefined\r\n        this.initAction()\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device is moved\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerMove(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      if (!this.change) {\r\n        event.controllers.forEach((controller) => {\r\n          const id = controller.getId()\r\n          const intersectionData = controller.getGeomItemAtTip()\r\n          if (intersectionData) {\r\n            const geomItem = intersectionData.geomItem\r\n            if (this.__highlightedGeomItemIds[id] != geomItem) {\r\n              if (this.__highlightedGeomItemIds[id]) {\r\n                this.__highlightedGeomItemIds[id].removeHighlight('vrHoldObject')\r\n              }\r\n              geomItem.addHighlight('vrHoldObject', new Color(1, 0, 0, 0.2))\r\n              this.__highlightedGeomItemIds[id] = geomItem\r\n            }\r\n          } else {\r\n            if (this.__highlightedGeomItemIds[id]) {\r\n              const geomItem = this.__highlightedGeomItemIds[id]\r\n              geomItem.removeHighlight('vrHoldObject')\r\n              this.__highlightedGeomItemIds[id] = null\r\n            }\r\n          }\r\n        })\r\n\r\n        return\r\n      }\r\n\r\n      const changeXfos = []\r\n      const changeXfoIds = []\r\n      for (let i = 0; i < this.__heldGeomItems.length; i++) {\r\n        const heldGeom = this.__heldGeomItems[i]\r\n        if (!heldGeom) continue\r\n        const grabXfo = this.computeGrabXfo(this.__heldGeomItemRefs[i])\r\n        changeXfos.push(grabXfo.multiply(this.__heldGeomItemOffsets[i]))\r\n        changeXfoIds.push(i)\r\n      }\r\n\r\n      this.change.update({ changeXfos, changeXfoIds })\r\n\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is double clicked on the tool.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerDoublePress(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      // this.onVRControllerDoubleClicked(event)\r\n    }\r\n  }\r\n}\r\n\r\nexport default VRHoldObjectsTool\r\nexport { VRHoldObjectsTool }\r\n","import { BaseTool } from '@zeainc/zea-engine'\r\n\r\n/**\r\n * Class representing a primary create tool.\r\n *\r\n * @extends BaseTool\r\n */\r\nexport default class BaseCreateTool extends BaseTool {\r\n  /**\r\n   * Creates an instance of BaseCreateTool.\r\n   *\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n  }\r\n\r\n  /**\r\n   * Checks if the tool is a primary tool or not.\r\n   *\r\n   * @return {boolean} - Returns `true`.\r\n   */\r\n  isPrimaryTool() {\r\n    return true\r\n  }\r\n}\r\n","import { Color, Xfo, Ray, ColorParameter, GeomItem, Material, Cross, POINTER_TYPES } from '@zeainc/zea-engine'\r\nimport BaseCreateTool from '../BaseCreateTool'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Base class for creating geometry tools.\r\n *\r\n * @extends BaseCreateTool\r\n */\r\nclass CreateGeomTool extends BaseCreateTool {\r\n  /**\r\n   * Create a create geom tool.\r\n   *\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n\r\n    if (!appData) console.error('App data not provided to tool')\r\n    this.appData = appData\r\n    this.stage = 0\r\n    this.removeToolOnRightClick = true\r\n    this.parentItem = 'parentItem' in appData ? appData.parentItem : appData.scene.getRoot()\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', new Color(0.7, 0.2, 0.2)))\r\n\r\n    this.controllerAddedHandler = this.controllerAddedHandler.bind(this)\r\n  }\r\n\r\n  addIconToVRController(controller) {\r\n    if (!this.vrControllerToolTip) {\r\n      this.vrControllerToolTip = new Cross(0.05)\r\n      this.vrControllerToolTipMat = new Material('VRController Cross', 'LinesShader')\r\n      this.vrControllerToolTipMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n      this.vrControllerToolTipMat.setSelectable(false)\r\n    }\r\n    const geomItem = new GeomItem('CreateGeomToolTip', this.vrControllerToolTip, this.vrControllerToolTipMat)\r\n    geomItem.setSelectable(false)\r\n    // controller.getTipItem().removeAllChildren()\r\n    controller.getTipItem().addChild(geomItem, false)\r\n  }\r\n\r\n  controllerAddedHandler(event) {\r\n    this.addIconToVRController(event.controller)\r\n  }\r\n\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n\r\n    this.prevCursor = this.appData.renderer.getGLCanvas().style.cursor\r\n    this.appData.renderer.getGLCanvas().style.cursor = 'crosshair'\r\n\r\n    this.appData.renderer.getXRViewport().then((xrvp) => {\r\n      for (const controller of xrvp.getControllers()) {\r\n        this.addIconToVRController(controller)\r\n      }\r\n      xrvp.on('controllerAdded', this.controllerAddedHandler)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n\r\n    this.appData.renderer.getGLCanvas().style.cursor = this.prevCursor\r\n\r\n    this.appData.renderer.getXRViewport().then((xrvp) => {\r\n      // for(let controller of xrvp.getControllers()) {\r\n      //   controller.getTipItem().removeAllChildren();\r\n      // }\r\n      xrvp.off('controllerAdded', this.controllerAddedHandler)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Transforms the screen position in the viewport to an Xfo object.\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event param\r\n   * @return {Xfo} The return value.\r\n   */\r\n  screenPosToXfo(event) {\r\n    const ray = event.pointerRay\r\n    const planeRay = new Ray(this.constructionPlane.tr, this.constructionPlane.ori.getZaxis())\r\n    const dist = ray.intersectRayPlane(planeRay)\r\n    if (dist > 0.0) {\r\n      const xfo = this.constructionPlane.clone()\r\n      xfo.tr = ray.pointAtDist(dist)\r\n      return xfo\r\n    }\r\n\r\n    const camera = event.viewport.getCamera()\r\n    const xfo = camera.getParameter('GlobalXfo').getValue().clone()\r\n    xfo.tr = ray.pointAtDist(camera.getFocalDistance())\r\n    return xfo\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of the geometry.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.stage = 1\r\n  }\r\n\r\n  /**\r\n   * The createPoint method.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createPoint(pt) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  /**\r\n   * The createMove method.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  /**\r\n   * The createRelease method.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Mouse events\r\n\r\n  /**\r\n   * Event fired when a pointing device button is pressed over the viewport while the tool is activated.\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event param.\r\n   */\r\n  onPointerDown(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      this.onVRControllerButtonDown(event)\r\n    } else {\r\n      if (event.altKey) return\r\n      if (this.stage == 0) {\r\n        if (event.button == 0 || event.pointerType !== 'mouse') {\r\n          this.constructionPlane = new Xfo()\r\n\r\n          const xfo = this.screenPosToXfo(event)\r\n          this.createStart(xfo)\r\n          event.stopPropagation()\r\n        } else if (event.button == 2) {\r\n          // Cancel the tool.\r\n          // if (this.removeToolOnRightClick) this.appData.toolManager.removeTool(this.index)\r\n        }\r\n      } else if (event.button == 2) {\r\n        // Cancel the draw action.\r\n        UndoRedoManager.getInstance().cancel()\r\n        this.stage = 0\r\n      }\r\n    }\r\n\r\n    event.stopPropagation()\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device is moved while the cursor's hotspot is inside the viewport, while tool is activated.\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event param.\r\n   */\r\n  onPointerMove(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      this.onVRPoseChanged(event)\r\n    } else if (this.stage > 0) {\r\n      const xfo = this.screenPosToXfo(event)\r\n      this.createMove(xfo.tr)\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is released while the pointer is over the viewport, while the tool is activated.\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event param.\r\n   */\r\n  onPointerUp(event) {\r\n    if (event.pointerType === POINTER_TYPES.xr) {\r\n      this.onVRControllerButtonUp(event)\r\n    } else if (this.stage > 0) {\r\n      const xfo = this.screenPosToXfo(event)\r\n      this.createRelease(xfo.tr)\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user rotates the pointing device wheel, while the tool is activated.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onWheel(event) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Keyboard events\r\n\r\n  /**\r\n   * Event fired when the user presses a key on the keyboard, while the tool is activated.\r\n   *\r\n   * @param {KeyboardEvent} event - The event param.\r\n   */\r\n  onKeyPressed(event) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user presses down a key on the keyboard, while the tool is activated.\r\n   *\r\n   * @param {KeyboardEvent} event - The event param.\r\n   */\r\n  onKeyDown(event) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user releases a key on the keyboard.\r\n   *\r\n   * @param {KeyboardEvent} event - The event param.\r\n   */\r\n  onKeyUp(event) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n\r\n  /**\r\n   * Event fired when one or more touch points have been disrupted in an implementation-specific manner inside the viewport, when the tool is activated.\r\n   *\r\n   * @param {TouchEvent} event - The event param.\r\n   */\r\n  onTouchCancel(event) {\r\n    // console.warn('Implement me')\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // VRController events\r\n\r\n  /**\r\n   * Event fired when a VR controller button is pressed inside the viewport, when the tool is activated.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRControllerButtonDown(event) {\r\n    if (!this.__activeController) {\r\n      // TODO: Snap the Xfo to any nearby construction planes.\r\n      this.__activeController = event.controller\r\n      this.constructionPlane = new Xfo()\r\n      const xfo = this.constructionPlane.clone()\r\n      xfo.tr = this.__activeController.getTipXfo().tr\r\n      this.createStart(xfo, this.appData.scene.getRoot())\r\n    }\r\n    event.stopPropagation()\r\n  }\r\n\r\n  /**\r\n   * The onVRPoseChanged method.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRPoseChanged(event) {\r\n    if (this.__activeController && this.stage > 0) {\r\n      // TODO: Snap the Xfo to any nearby construction planes.\r\n      const xfo = this.__activeController.getTipXfo()\r\n      this.createMove(xfo.tr)\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a VR controller button is released inside the viewport, when the tool is activated.\r\n   *\r\n   * @param {object} event - The event param.\r\n   * @return {boolean} The return value.\r\n   */\r\n  onVRControllerButtonUp(event) {\r\n    if (this.stage > 0) {\r\n      if (this.__activeController == event.controller) {\r\n        const xfo = this.__activeController.getTipXfo()\r\n        this.createRelease(xfo.tr)\r\n        if (this.stage == 0) this.__activeController = undefined\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default CreateGeomTool\r\nexport { CreateGeomTool }\r\n","import { Xfo, Color } from '@zeainc/zea-engine'\r\nimport Change from '../../../UndoRedo/Change'\r\n\r\n/**\r\n * Class representing a create geom change.\r\n *\r\n * @extends Change\r\n */\r\nclass CreateGeomChange extends Change {\r\n  /**\r\n   * Create a create circle change.\r\n   * @param {string} name - The name value.\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n  }\r\n\r\n  /**\r\n   * The setParentAndXfo method.\r\n   * @param {TreeItem} parentItem - The parentItem param.\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  setParentAndXfo(parentItem, xfo) {\r\n    this.parentItem = parentItem\r\n    const name = this.parentItem.generateUniqueName(this.geomItem.getName())\r\n    this.geomItem.setName(name)\r\n    this.geomItem.getParameter('GlobalXfo').setValue(xfo)\r\n    this.parentItem.addChild(this.geomItem)\r\n\r\n    // this.geomItem.addRef(this) // keep a ref to stop it being destroyed\r\n  }\r\n\r\n  /**\r\n   * Removes recently created geometry from its parent.\r\n   */\r\n  undo() {\r\n    this.parentItem.removeChild(this.parentItem.getChildIndex(this.geomItem))\r\n  }\r\n\r\n  /**\r\n   * Restores recently created geometry and adds it to the specified parent tree item.\r\n   */\r\n  redo() {\r\n    this.parentItem.addChild(this.geomItem, false, false)\r\n  }\r\n\r\n  /**\r\n   * Serializes the change as a JSON object.\r\n   *\r\n   * @param {object} context - The context value\r\n   * @return {object} - The serialized change\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n    j.parentItemPath = this.parentItem.getPath()\r\n    j.geomItemName = this.geomItem.getName()\r\n    j.geomItemXfo = this.geomItem.getParameter('LocalXfo').getValue()\r\n\r\n    const material = this.geomItem.getParameter('Material').getValue()\r\n    j.color = material.getParameter('BaseColor').getValue()\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores geometry from using the specified JSON\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The appData param.\r\n   */\r\n  fromJSON(j, context) {\r\n    const sceneRoot = context.appData.scene.getRoot()\r\n    this.parentItem = sceneRoot.resolvePath(j.parentItemPath, 1)\r\n    this.geomItem.setName(this.parentItem.generateUniqueName(j.geomItemName))\r\n    const xfo = new Xfo()\r\n    xfo.fromJSON(j.geomItemXfo)\r\n    this.geomItem.getParameter('LocalXfo').setValue(xfo)\r\n    this.childIndex = this.parentItem.addChild(this.geomItem, false)\r\n\r\n    if (j.color) {\r\n      const color = new Color(0.7, 0.2, 0.2)\r\n      color.fromJSON(j.color)\r\n      const material = this.geomItem.getParameter('Material').getValue()\r\n      material.getParameter('BaseColor').setValue(color)\r\n    }\r\n  }\r\n\r\n  // updateFromJSON(j) {\r\n  //   if (this.__newValue.fromJSON)\r\n  //     this.__newValue.fromJSON(j.value);\r\n  //   else\r\n  //     this.__newValue = j.value;\r\n  // }\r\n\r\n  /**\r\n   * Removes geometry item reference from change change.\r\n   */\r\n  destroy() {\r\n    // this.geomItem.removeRef(this) // remove the tmp ref.\r\n  }\r\n}\r\n\r\nexport default CreateGeomChange\r\nexport { CreateGeomChange }\r\n","import { Color, GeomItem, Material, Lines } from '@zeainc/zea-engine'\r\nimport UndoRedoManager from '../../../UndoRedo/UndoRedoManager'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create line change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateLineChange extends CreateGeomChange {\r\n  /**\r\n   * Create a create line change.\r\n   *\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   * @param {Color} color - The color value.\r\n   * @param {number} thickness - The thickness value.\r\n   */\r\n  constructor(parentItem, xfo, color, thickness) {\r\n    super('Create Line')\r\n\r\n    this.line = new Lines(0.0)\r\n    this.line.setNumVertices(2)\r\n    this.line.setNumSegments(1)\r\n    this.line.setSegmentVertexIndices(0, 0, 1)\r\n\r\n    const material = new Material('Line', 'FatLinesShader')\r\n    material.getParameter('BaseColor').setValue(new Color(0.7, 0.2, 0.2))\r\n    this.geomItem = new GeomItem('Line', this.line, material)\r\n\r\n    if (color) {\r\n      material.getParameter('BaseColor').setValue(color)\r\n    }\r\n\r\n    if (thickness) {\r\n      this.line.lineThickness = thickness\r\n    }\r\n\r\n    if (parentItem && xfo) {\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates Line using the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    if (updateData.p1) {\r\n      this.line.getVertexAttribute('positions').getValueRef(1).setFromOther(updateData.p1)\r\n      this.line.emit('geomDataChanged')\r\n    }\r\n\r\n    this.emit('updated', updateData)\r\n  }\r\n\r\n  /**\r\n   * Restores line geometry using a JSON object.\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(j, context) {\r\n    super.fromJSON(j, context)\r\n    if (j.color) {\r\n      const color = new Color()\r\n      color.fromJSON(j.color)\r\n      material.getParameter('BaseColor').setValue(color)\r\n    }\r\n\r\n    if (j.thickness) {\r\n      this.line.lineThickness = j.thickness\r\n    }\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateLineChange', CreateLineChange)\r\n\r\nexport default CreateLineChange\r\nexport { CreateLineChange }\r\n","import { NumberParameter } from '@zeainc/zea-engine'\r\nimport CreateGeomTool from './CreateGeomTool'\r\nimport CreateLineChange from './Change/CreateLineChange'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating a line tool.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateGeomTool\r\n */\r\nclass CreateLineTool extends CreateGeomTool {\r\n  /**\r\n   * Create a create line tool.\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n\r\n    this.lineThickness = this.addParameter(new NumberParameter('LineThickness', 0.01, [0, 0.1])) // 1cm.\r\n  }\r\n\r\n  /**\r\n   * Starts line geometry creation.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.change = new CreateLineChange(this.parentItem, xfo)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.xfo = xfo.inverse()\r\n    this.stage = 1\r\n    this.length = 0.0\r\n  }\r\n\r\n  /**\r\n   * Updates line structural data.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    const offset = this.xfo.transformVec3(pt)\r\n    this.length = offset.length()\r\n    this.change.update({ p1: offset })\r\n  }\r\n\r\n  /**\r\n   * Finishes Line geometry creation.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this.length == 0) {\r\n      UndoRedoManager.getInstance().cancel()\r\n    }\r\n    this.stage = 0\r\n    this.emit('actionFinished')\r\n  }\r\n\r\n  /**\r\n   * The onVRControllerButtonDown method.\r\n   *\r\n   * @param {object} event - The event param.\r\n   */\r\n  onVRControllerButtonDown(event) {\r\n    if (this.stage == 0) {\r\n      const stageScale = event.viewport.__stageScale\r\n      this.lineThickness.setValue(stageScale * 0.003)\r\n    }\r\n    super.onVRControllerButtonDown(event)\r\n  }\r\n}\r\n\r\nexport default CreateLineTool\r\nexport { CreateLineTool }\r\n","import { GeomItem, Material, Cone } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager } from '../../../UndoRedo/index'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create cone change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateConeChange extends CreateGeomChange {\r\n  /**\r\n   * Create a create cone change.\r\n   *\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   */\r\n  constructor(parentItem, xfo, color) {\r\n    super('Create Cone')\r\n\r\n    const cone = new Cone(0.0, 0.0)\r\n    const material = new Material('Cone', 'SimpleSurfaceShader')\r\n    this.geomItem = new GeomItem('Cone', cone, material)\r\n\r\n    if (parentItem && xfo) {\r\n      material.getParameter('BaseColor').setValue(color)\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates cone with the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    if (updateData.radius)\r\n      this.geomItem.getParameter('Geometry').getValue().getParameter('Radius').setValue(updateData.radius)\r\n    if (updateData.height)\r\n      this.geomItem.getParameter('Geometry').getValue().getParameter('Height').setValue(updateData.height)\r\n\r\n    this.emit('updated', updateData)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateConeChange', CreateConeChange)\r\n\r\nexport default CreateConeChange\r\nexport { CreateConeChange }\r\n","import { Quat, Vec3 } from '@zeainc/zea-engine'\r\nimport CreateConeChange from './Change/CreateConeChange'\r\nimport { CreateGeomTool } from './CreateGeomTool'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating a Cone geometry.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateGeomTool\r\n */\r\nclass CreateConeTool extends CreateGeomTool {\r\n  /**\r\n   * Create a create cone tool.\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of the geometry.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.xfo = xfo\r\n    this.invXfo = xfo.inverse()\r\n    this.change = new CreateConeChange(this.parentItem, xfo, this.colorParam.getValue())\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.stage = 1\r\n    this._radius = 0.0\r\n    this._height = 0.0\r\n  }\r\n\r\n  /**\r\n   * Updates Cone geometry structural properties.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    if (this.stage == 1) {\r\n      const vec = pt.subtract(this.xfo.tr)\r\n      // TODO: Rotate the cone so the base is aligned with the vector towards the controller\r\n      this._radius = vec.length()\r\n      this.change.update({ radius: this._radius })\r\n    } else {\r\n      this._height = this.invXfo.transformVec3(pt).y\r\n      this.change.update({ height: this._height })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finishes the creation of the Cone.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this._radius == 0) {\r\n      UndoRedoManager.getInstance().cancel()\r\n      this.stage = 0\r\n      this.emit('actionFinished')\r\n    }\r\n    if (this.stage == 1) {\r\n      this.stage = 2\r\n\r\n      const quat = new Quat()\r\n      quat.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * 0.5)\r\n      this.constructionPlane.ori = this.constructionPlane.ori.multiply(quat)\r\n      this.constructionPlane.tr = pt\r\n      this.invXfo = this.constructionPlane.inverse()\r\n    } else if (this.stage == 2) {\r\n      this.stage = 0\r\n      this.emit('actionFinished')\r\n    }\r\n  }\r\n}\r\n\r\nexport default CreateConeTool\r\nexport { CreateConeTool }\r\n","import { Color, GeomItem, Material, Circle } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager } from '../../../UndoRedo/index'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create circle change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateCircleChange extends CreateGeomChange {\r\n  /**\r\n   * Creates an instance of CreateCircleChange.\r\n   *\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   */\r\n  constructor(parentItem, xfo) {\r\n    super('CreateCircle')\r\n\r\n    this.circle = new Circle(0, 64)\r\n    this.circle.lineThickness = 0.05\r\n\r\n    const material = new Material('circle', 'FatLinesShader')\r\n    material.getParameter('BaseColor').setValue(new Color(0.7, 0.2, 0.2))\r\n\r\n    this.geomItem = new GeomItem('Circle', this.circle, material)\r\n\r\n    if (parentItem && xfo) {\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates circle with the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    this.circle.getParameter('Radius').setValue(updateData.radius)\r\n    this.emit('updated', updateData)\r\n  }\r\n\r\n  /**\r\n   * Serializes change as a JSON object.\r\n   *\r\n   * @return {object} - The return value.\r\n   */\r\n  toJSON() {\r\n    const j = super.toJSON()\r\n    j.radius = this.circle.getParameter('Radius').getValue()\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Updates circle with the specified JSON\r\n   *\r\n   * @param {object} j - The j param.\r\n   */\r\n  updateFromJSON(j) {\r\n    console.log('CreateCircleChange:', j)\r\n    if (j.radius) this.circle.getParameter('Radius').setValue(j.radius)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateCircleChange', CreateCircleChange)\r\n\r\nexport default CreateCircleChange\r\nexport { CreateCircleChange }\r\n","import CreateCircleChange from './Change/CreateCircleChange'\r\nimport CreateGeomTool from './CreateGeomTool'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating a circle geometry.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateGeomTool\r\n */\r\nclass CreateCircleTool extends CreateGeomTool {\r\n  /**\r\n   * Create a create circle tool.\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of the geometry.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.change = new CreateCircleChange(this.parentItem, xfo)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.xfo = xfo\r\n    this.stage = 1\r\n    this.radius = 0.0\r\n  }\r\n\r\n  /**\r\n   * Updates Circle geometry radius.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    this.radius = pt.distanceTo(this.xfo.tr)\r\n    this.change.update({ radius: this.radius })\r\n    this.appData.renderer.forceRender()\r\n  }\r\n\r\n  /**\r\n   * Finishes geometry creation.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this.radius == 0) {\r\n      UndoRedoManager.getInstance().cancel()\r\n    }\r\n\r\n    this.change = null\r\n    this.stage = 0\r\n    this.emit('actionFinished')\r\n  }\r\n}\r\n\r\nexport default CreateCircleTool\r\nexport { CreateCircleTool }\r\n","import { Color, Rect, Material, GeomItem } from '@zeainc/zea-engine'\r\nimport UndoRedoManager from '../../../UndoRedo/UndoRedoManager'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create rect change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateRectChange extends CreateGeomChange {\r\n  /**\r\n   * Create a create rect change.\r\n   *\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   */\r\n  constructor(parentItem, xfo) {\r\n    super('CreateRect')\r\n\r\n    this.rect = new Rect(0, 0)\r\n    this.rect.lineThickness = 0.05\r\n\r\n    const material = new Material('circle', 'FatLinesShader')\r\n    material.getParameter('BaseColor').setValue(new Color(0.7, 0.2, 0.2))\r\n    this.geomItem = new GeomItem('Rect', this.rect, material)\r\n\r\n    if (parentItem && xfo) {\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates rectangle with the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    if (updateData.baseSize) {\r\n      this.rect.getParameter('X').setValue(updateData.baseSize[0])\r\n      this.rect.getParameter('Y').setValue(updateData.baseSize[1])\r\n    }\r\n    if (updateData.tr) {\r\n      const xfo = this.geomItem.getParameter('LocalXfo').getValue()\r\n      xfo.tr.fromJSON(updateData.tr)\r\n      this.geomItem.getParameter('LocalXfo').setValue(xfo)\r\n    }\r\n\r\n    this.emit('updated', updateData)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateRectChange', CreateRectChange)\r\n\r\nexport default CreateRectChange\r\nexport { CreateRectChange }\r\n","import CreateGeomTool from './CreateGeomTool'\r\nimport CreateRectChange from './Change/CreateRectChange'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating a rectangle geometry.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateGeomTool\r\n */\r\nclass CreateRectTool extends CreateGeomTool {\r\n  /**\r\n   * Create a create rect tool.\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of a rectangle geometry.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.change = new CreateRectChange(this.parentItem, xfo)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.xfo = xfo\r\n    this.invXfo = xfo.inverse()\r\n    this.stage = 1\r\n    this._size = 0.0\r\n  }\r\n\r\n  /**\r\n   * Updated the rectangle geometry structural properties.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    if (this.stage == 1) {\r\n      const delta = this.invXfo.transformVec3(pt)\r\n\r\n      ;(this._size = Math.abs(delta.x)), Math.abs(delta.y)\r\n\r\n      // const delta = pt.subtract(this.xfo.tr)\r\n      this.change.update({\r\n        baseSize: [Math.abs(delta.x), Math.abs(delta.y)],\r\n        tr: this.xfo.tr.add(delta.scale(0.5)),\r\n      })\r\n    } else {\r\n      const vec = this.invXfo.transformVec3(pt)\r\n      this.change.update({ height: vec.y })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finishes the creation of a rectangle geometry.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this._size == 0) {\r\n      UndoRedoManager.getInstance().cancel()\r\n    }\r\n    this.stage = 0\r\n    this.emit('actionFinished')\r\n  }\r\n}\r\n\r\nexport default CreateRectTool\r\nexport { CreateRectTool }\r\n","import { Vec3, Color, GeomItem, Material, Lines } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager } from '../../../UndoRedo/index'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create freehand line change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateFreehandLineChange extends CreateGeomChange {\r\n  /**\r\n   * Create a create freehand line change.\r\n   *\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   * @param {Color} color - The color value.\r\n   * @param {number} thickness - The thickness value.\r\n   */\r\n  constructor(parentItem, xfo, color, thickness = 0.001) {\r\n    super('CreateFreehandLine')\r\n\r\n    this.used = 0\r\n    this.vertexCount = 100\r\n\r\n    this.line = new Lines()\r\n    this.line.setNumVertices(this.vertexCount)\r\n    this.line.setNumSegments(this.vertexCount - 1)\r\n    this.line.getVertexAttribute('positions').setValue(0, new Vec3())\r\n    this.line.lineThickness = thickness\r\n\r\n    const material = new Material('freeHandLine', 'FatLinesShader')\r\n    material.getParameter('LineThickness').setValue(thickness)\r\n    if (color) {\r\n      material.getParameter('BaseColor').setValue(color)\r\n    }\r\n\r\n    this.geomItem = new GeomItem('freeHandLine', this.line, material)\r\n\r\n    if (parentItem && xfo) {\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates free hand line using the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    // console.log(\"update:\", this.used)\r\n\r\n    this.used++\r\n\r\n    let realloc = false\r\n    if (this.used >= this.line.getNumSegments()) {\r\n      this.vertexCount = this.vertexCount + 100\r\n      this.line.setNumVertices(this.vertexCount)\r\n      this.line.setNumSegments(this.vertexCount - 1)\r\n      realloc = true\r\n    }\r\n\r\n    this.line.getVertexAttribute('positions').setValue(this.used, updateData.point)\r\n    // this.line.getVertexAttributes().lineThickness.setValue(this.used, updateData.lineThickness);\r\n    this.line.setSegmentVertexIndices(this.used - 1, this.used - 1, this.used)\r\n\r\n    if (realloc) {\r\n      this.line.emit('geomDataTopologyChanged', {\r\n        topologyChanged: true,\r\n      })\r\n    } else {\r\n      this.line.emit('geomDataChanged', {\r\n        topologyChanged: true,\r\n      })\r\n    }\r\n    this.emit('updated', updateData)\r\n  }\r\n\r\n  /**\r\n   * Serializes change as a JSON object.\r\n   *\r\n   * @param {object} context - The appData param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n    j.lineThickness = this.line.lineThickness\r\n    const material = this.geomItem.getParameter('Material').getValue()\r\n    j.color = material.getParameter('BaseColor').getValue()\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores free hand line from a JSON object.\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The appData param.\r\n   */\r\n  fromJSON(j, context) {\r\n    // Need to set line thickness before the geom is added to the tree.\r\n    if (j.lineThickness) {\r\n      this.line.lineThickness = j.lineThickness\r\n      // this.line.addVertexAttribute('lineThickness', Float32, 0.0);\r\n      this.geomItem.getMaterial().getParameter('LineThickness').setValue(j.lineThickness)\r\n    }\r\n\r\n    if (j.color) {\r\n      const color = new Color(0.7, 0.2, 0.2)\r\n      color.fromJSON(j.color)\r\n      this.geomItem.getMaterial().getParameter('BaseColor').setValue(color)\r\n    }\r\n\r\n    super.fromJSON(j, context)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateFreehandLineChange', CreateFreehandLineChange)\r\n\r\nexport default CreateFreehandLineChange\r\nexport { CreateFreehandLineChange }\r\n","import { BooleanParameter } from '@zeainc/zea-engine'\r\nimport CreateLineTool from './CreateLineTool'\r\nimport CreateFreehandLineChange from './Change/CreateFreehandLineChange'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating a free hand line.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateLineTool\r\n */\r\nclass CreateFreehandLineTool extends CreateLineTool {\r\n  /**\r\n   * Create a create freehand line tool.\r\n   *\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n\r\n    this.mp = this.addParameter(new BooleanParameter('Modulate Thickness By Stroke Speed', false))\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of a free hand line.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    const color = this.colorParam.getValue()\r\n    const lineThickness = this.lineThickness.getValue()\r\n\r\n    this.change = new CreateFreehandLineChange(this.parentItem, xfo, color, lineThickness)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.xfo = xfo\r\n    this.invXfo = xfo.inverse()\r\n    this.stage = 1\r\n    this.prevP = xfo.tr\r\n    this.length = 0\r\n  }\r\n\r\n  /**\r\n   * Updates the free hand line data.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    const p = this.invXfo.transformVec3(pt)\r\n    const delta = p.subtract(this.prevP).length()\r\n    this.change.update({\r\n      point: p,\r\n    })\r\n\r\n    this.length += delta\r\n    this.prevP = p\r\n  }\r\n\r\n  /**\r\n   * Finishes free hand line creation\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this.length == 0) {\r\n      UndoRedoManager.getInstance().cancel()\r\n    }\r\n\r\n    this.stage = 0\r\n    this.emit('actionFinished')\r\n  }\r\n}\r\n\r\nexport default CreateFreehandLineTool\r\nexport { CreateFreehandLineTool }\r\n","import { GeomItem, Material, Sphere } from '@zeainc/zea-engine'\r\nimport UndoRedoManager from '../../../UndoRedo/UndoRedoManager'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create sphere change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateSphereChange extends CreateGeomChange {\r\n  /**\r\n   * Create a create sphere change.\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   */\r\n  constructor(parentItem, xfo, color) {\r\n    super('CreateSphere', parentItem)\r\n\r\n    this.sphere = new Sphere(0, 24, 12)\r\n    const material = new Material('Sphere', 'SimpleSurfaceShader')\r\n    this.geomItem = new GeomItem('Sphere', this.sphere, material)\r\n\r\n    if (parentItem && xfo && color) {\r\n      material.getParameter('BaseColor').setValue(color)\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates sphere geometry using the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    this.sphere.getParameter('Radius').setValue(updateData.radius)\r\n\r\n    this.emit('updated', updateData)\r\n  }\r\n\r\n  /**\r\n   * Serializes sphere geometry as a JSON object.\r\n   *\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON() {\r\n    const j = super.toJSON()\r\n    j.radius = this.sphere.getParameter('Radius').getValue()\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Updates sphere geometry using a JSON object.\r\n   *\r\n   * @param {object} j - The j param.\r\n   */\r\n  updateFromJSON(j) {\r\n    if (j.radius) this.sphere.getParameter('Radius').setValue(j.radius)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateSphereChange', CreateSphereChange)\r\n\r\nexport default CreateSphereChange\r\nexport { CreateSphereChange }\r\n","import CreateGeomTool from './CreateGeomTool'\r\nimport CreateSphereChange from './Change/CreateSphereChange'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating Sphere geometries.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateGeomTool\r\n */\r\nclass CreateSphereTool extends CreateGeomTool {\r\n  /**\r\n   * Create a create sphere tool.\r\n   *\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of the sphere geometry.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.change = new CreateSphereChange(this.parentItem, xfo, this.colorParam.getValue())\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.xfo = xfo\r\n    this.stage = 1\r\n    this.radius = 0.0\r\n  }\r\n\r\n  /**\r\n   * Updates the sphere geometry structural properties.\r\n   *\r\n   * @param {vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    this.radius = pt.distanceTo(this.xfo.tr)\r\n    this.change.update({ radius: this.radius })\r\n  }\r\n\r\n  /**\r\n   * Finishes the creation of the sphere geometry.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this.radius == 0) {\r\n      UndoRedoManager.getInstance().cancel()\r\n    }\r\n    this.stage = 0\r\n    this.emit('actionFinished')\r\n  }\r\n}\r\n\r\nexport default CreateSphereTool\r\nexport { CreateSphereTool }\r\n","import { Cuboid, Material, GeomItem } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager } from '../../../UndoRedo/index'\r\nimport CreateGeomChange from './CreateGeomChange'\r\n\r\n/**\r\n * Class representing a create cuboid change.\r\n *\r\n * **Events**\r\n * * **updated:** Triggered when the change is updated\r\n *\r\n * @extends CreateGeomChange\r\n */\r\nclass CreateCuboidChange extends CreateGeomChange {\r\n  /**\r\n   * Create a create cuboid change.\r\n   *\r\n   * @param {TreeItem} parentItem - The parentItem value.\r\n   * @param {Xfo} xfo - The xfo value.\r\n   */\r\n  constructor(parentItem, xfo, color) {\r\n    super('CreateCuboid')\r\n\r\n    this.cuboid = new Cuboid(0, 0, 0, true)\r\n    const material = new Material('Cuboid', 'SimpleSurfaceShader')\r\n    this.geomItem = new GeomItem('Cuboid', this.cuboid, material)\r\n\r\n    if (parentItem && xfo) {\r\n      material.getParameter('BaseColor').setValue(color)\r\n      this.setParentAndXfo(parentItem, xfo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates cuboid using the specified data.\r\n   *\r\n   * @param {object} updateData - The updateData param.\r\n   */\r\n  update(updateData) {\r\n    if (updateData.baseSize) {\r\n      this.cuboid.setBaseSize(updateData.baseSize[0], updateData.baseSize[1])\r\n    }\r\n    if (updateData.tr) {\r\n      const xfo = this.geomItem.getParameter('LocalXfo').getValue()\r\n      xfo.tr.fromJSON(updateData.tr)\r\n      this.geomItem.getParameter('LocalXfo').setValue(xfo)\r\n    }\r\n    if (updateData.height) {\r\n      this.cuboid.getParameter('Z').setValue(updateData.height)\r\n    }\r\n    this.emit('updated', updateData)\r\n  }\r\n}\r\n\r\nUndoRedoManager.registerChange('CreateCuboidChange', CreateCuboidChange)\r\n\r\nexport default CreateCuboidChange\r\nexport { CreateCuboidChange }\r\n","import { Quat, Vec3 } from '@zeainc/zea-engine'\r\nimport CreateGeomTool from './CreateGeomTool'\r\nimport CreateCuboidChange from './Change/CreateCuboidChange'\r\nimport { UndoRedoManager } from '../../UndoRedo/index'\r\n\r\n/**\r\n * Tool for creating Cuboid geometry.\r\n *\r\n * **Events**\r\n * * **actionFinished:** Triggered when the creation of the geometry is completed.\r\n *\r\n * @extends CreateGeomTool\r\n */\r\nclass CreateCuboidTool extends CreateGeomTool {\r\n  /**\r\n   * Create a create cuboid tool.\r\n   *\r\n   * @param {object} appData - The appData value.\r\n   */\r\n  constructor(appData) {\r\n    super(appData)\r\n  }\r\n\r\n  /**\r\n   * Starts the creation of the cuboid.\r\n   *\r\n   * @param {Xfo} xfo - The xfo param.\r\n   */\r\n  createStart(xfo) {\r\n    this.change = new CreateCuboidChange(this.parentItem, xfo, this.colorParam.getValue())\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    this.xfo = xfo\r\n    this.invXfo = xfo.inverse()\r\n    this.stage = 1\r\n    this._height = 0.0\r\n  }\r\n\r\n  /**\r\n   * Updates cuboid structural properties.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createMove(pt) {\r\n    if (this.stage == 1) {\r\n      const delta = this.invXfo.transformVec3(pt)\r\n\r\n      // const delta = pt.subtract(this.xfo.tr)\r\n      this.change.update({\r\n        baseSize: [Math.abs(delta.x), Math.abs(delta.y)],\r\n        tr: this.xfo.tr.add(delta.scale(0.5)),\r\n      })\r\n    } else {\r\n      const vec = this.invXfo.transformVec3(pt)\r\n      this.change.update({ height: vec.y })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finishes the creation of the cuboid.\r\n   *\r\n   * @param {Vec3} pt - The pt param.\r\n   */\r\n  createRelease(pt) {\r\n    if (this.stage == 1) {\r\n      this.stage = 2\r\n      this.pt1 = pt\r\n\r\n      const quat = new Quat()\r\n      quat.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * 0.5)\r\n      this.constructionPlane.ori = this.constructionPlane.ori.multiply(quat)\r\n      this.constructionPlane.tr = pt\r\n      this.invXfo = this.constructionPlane.inverse()\r\n    } else if (this.stage == 2) {\r\n      this.stage = 0\r\n      this.emit('actionFinished')\r\n    }\r\n  }\r\n}\r\n\r\nexport { CreateCuboidTool }\r\n","/* eslint-disable require-jsdoc */\r\nimport { BaseTool } from '@zeainc/zea-engine'\r\n\r\n/**\r\n * @extends BaseTool\r\n */\r\nclass ToolManager extends BaseTool {\r\n  constructor() {\r\n    super()\r\n    this.tools = {}\r\n    this.toolStack = []\r\n  }\r\n\r\n  registerTool(toolName, tool) {\r\n    this.tools[toolName] = tool\r\n  }\r\n\r\n  pushTool(toolName) {\r\n    const tool = this.tools[toolName]\r\n    if (!tool) throw Error('Tool not found', toolName)\r\n    if (tool.activateTool) tool.activateTool()\r\n    this.toolStack.push(this.tools[toolName])\r\n  }\r\n\r\n  popTool() {\r\n    if (this.toolStack.length == 0) {\r\n      throw Error('Tool stack is empty')\r\n    }\r\n    const tool = this.toolStack[this.toolStack.length - 1]\r\n    if (tool.deactivateTool) tool.deactivateTool()\r\n    this.toolStack.pop()\r\n  }\r\n\r\n  /**\r\n   * Returns the tool currently at the top of the stack.\r\n   * @return {Tool} - the currently active tool.\r\n   */\r\n  activeTool() {\r\n    if (this.toolStack.length > 0) {\r\n      return this.toolStack[this.toolStack.length - 1]\r\n    }\r\n    return ''\r\n  }\r\n\r\n  /**\r\n   * Returns the name of the tool currently at the top of the stack.\r\n   * @return - the name of the tool.\r\n   */\r\n  activeToolName() {\r\n    if (this.toolStack.length > 0) {\r\n      const tool = this.toolStack[this.toolStack.length - 1]\r\n      for (const key in this.tools) {\r\n        if (this.tools[key] == tool) return key\r\n      }\r\n    }\r\n    return ''\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Pointer events\r\n\r\n  /**\r\n   * Event fired when a pointing device button is pressed while the pointer is over the tool.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerDown(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onPointerDown) {\r\n        tool.onPointerDown(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device is moved while the cursor's hotspot is inside it.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerMove(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onPointerMove) {\r\n        tool.onPointerMove(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is released while the pointer is over the tool.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerUp(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onPointerUp) {\r\n        tool.onPointerUp(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is double clicked on the tool.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerDoublePress(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onPointerDoublePress) {\r\n        tool.onPointerDoublePress(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user rotates the pointing device wheel.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onWheel(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onWheel) {\r\n        tool.onWheel(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Keyboard events\r\n\r\n  /**\r\n   * Event fired when the user presses a key on the keyboard.\r\n   *\r\n   * @param {KeyboardEvent} event - The event param.\r\n   */\r\n  onKeyPressed(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onKeyPressed) {\r\n        tool.onKeyPressed(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user presses down a key on the keyboard.\r\n   *\r\n   * @param {KeyboardEvent} event - The event param.\r\n   */\r\n  onKeyDown(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onKeyDown) {\r\n        tool.onKeyDown(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Event fired when the user releases a key on the keyboard.\r\n   *\r\n   * @param {KeyboardEvent} event - The event param.\r\n   */\r\n  onKeyUp(event) {\r\n    for (let i = this.toolStack.length - 1; i >= 0; i--) {\r\n      const tool = this.toolStack[i]\r\n      if (tool.onKeyUp) {\r\n        tool.onKeyUp(event)\r\n        if (!event.propagating) break\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport { ToolManager }\r\n","import {\r\n  Color,\r\n  Xfo,\r\n  NumberParameter,\r\n  GeomItem,\r\n  Material,\r\n  Cylinder,\r\n  Sphere,\r\n  Registry,\r\n  MathFunctions,\r\n} from '@zeainc/zea-engine'\r\nimport BaseLinearMovementHandle from './BaseLinearMovementHandle'\r\nimport ParameterValueChange from '../UndoRedo/Changes/ParameterValueChange'\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\n\r\n/**\r\n * Class representing a slider scene widget. There are two parts in this widget, the slider and the handle.<br>\r\n * The **Handle** is the moving part of the widget, the object you interact with. The **Slider** is the path that the **handle** follows.\r\n *\r\n * **Parameters**\r\n * * **Length(`NumberParameter`):** Specifies the length of the slider.\r\n * * **HandleRadius(`NumberParameter`):** Specifies the handle radius.\r\n * * **BarRadius(`NumberParameter`):** Specifies the radius of the slider.\r\n *\r\n *\r\n * @extends BaseLinearMovementHandle\r\n */\r\nclass SliderHandle extends BaseLinearMovementHandle {\r\n  /**\r\n   * Create a slider scene widget.\r\n   *\r\n   * @param {string} name - The name value.\r\n   * @param {number} length - The length value.\r\n   * @param {number} radius - The radius value.\r\n   * @param {Color} color - The color value.\r\n   */\r\n  constructor(name, length = 0.5, radius = 0.02, color = new Color('#F9CE03')) {\r\n    super(name)\r\n\r\n    this.lengthParam = this.addParameter(new NumberParameter('Length', length))\r\n    this.handleRadiusParam = this.addParameter(new NumberParameter('HandleRadius', radius))\r\n    this.barRadiusParam = this.addParameter(new NumberParameter('BarRadius', radius * 0.25))\r\n    this.colorParam.setValue(color)\r\n\r\n    this.handleMat = new Material('handle', 'FlatSurfaceShader')\r\n    this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n\r\n    const topBarMat = new Material('topBar', 'FlatSurfaceShader')\r\n    topBarMat.getParameter('BaseColor').setValue(new Color(0.5, 0.5, 0.5))\r\n\r\n    const barGeom = new Cylinder(radius * 0.25, 1, 64, 2, true, true)\r\n    const handleGeom = new Sphere(radius, 64)\r\n\r\n    this.handle = new GeomItem('handle', handleGeom, this.handleMat)\r\n    this.baseBar = new GeomItem('baseBar', barGeom, this.handleMat)\r\n    this.topBar = new GeomItem('topBar', barGeom, topBarMat)\r\n    this.handleXfo = new Xfo()\r\n    this.baseBarXfo = new Xfo()\r\n    this.topBarXfo = new Xfo()\r\n\r\n    this.barRadiusParam.on('valueChanged', () => {\r\n      barGeom.getParameter('Radius').setValue(this.barRadiusParam.getValue())\r\n    })\r\n    this.handleRadiusParam.on('valueChanged', () => {\r\n      handleGeom.getParameter('Radius').setValue(this.handleRadiusParam.getValue())\r\n    })\r\n    this.lengthParam.on('valueChanged', () => {\r\n      this.__updateSlider(this.value)\r\n    })\r\n    this.colorParam.on('valueChanged', () => {\r\n      this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    })\r\n\r\n    this.addChild(this.handle)\r\n    this.addChild(this.baseBar)\r\n    this.addChild(this.topBar)\r\n\r\n    this.__updateSlider(0)\r\n  }\r\n\r\n  /**\r\n   * Applies a special shinning shader to the handle to illustrate interaction with it.\r\n   */\r\n  highlight() {\r\n    super.highlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.highlightColorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Removes the shining shader from the handle.\r\n   */\r\n  unhighlight() {\r\n    super.unhighlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Sets global xfo target parameter.\r\n   *\r\n   * @param {Parameter} param - The video param.\r\n   * @param {boolean} track - The track param.\r\n   */\r\n  setTargetParam(param) {\r\n    this.param = param\r\n    const __updateSlider = () => {\r\n      this.__updateSlider(param.getValue())\r\n    }\r\n    __updateSlider()\r\n    param.on('valueChanged', __updateSlider)\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value -\r\n   * @private\r\n   */\r\n  __updateSlider(value) {\r\n    this.value = value\r\n    const range = this.param && this.param.getRange() ? this.param.getRange() : [0, 1]\r\n    const v = MathFunctions.remap(value, range[0], range[1], 0, 1)\r\n    const length = this.lengthParam.getValue()\r\n    this.baseBarXfo.sc.z = v * length\r\n    this.handleXfo.tr.z = v * length\r\n    this.topBarXfo.tr.z = v * length\r\n    this.topBarXfo.sc.z = (1 - v) * length\r\n    this.handle.getParameter('LocalXfo').setValue(this.handleXfo)\r\n    this.baseBar.getParameter('LocalXfo').setValue(this.baseBarXfo)\r\n    this.topBar.getParameter('LocalXfo').setValue(this.topBarXfo)\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Interaction events\r\n\r\n  /**\r\n   * Handles the initially drag of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    // Hilight the material.\r\n    this.handleXfo.sc.x = this.handleXfo.sc.y = this.handleXfo.sc.z = 1.2\r\n    this.handle.getParameter('LocalXfo').setValue(this.handleXfo)\r\n    if (!this.param) {\r\n      return\r\n    }\r\n\r\n    this.change = new ParameterValueChange(this.param)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n  }\r\n\r\n  /**\r\n   * Handles drag action of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    const length = this.lengthParam.getValue()\r\n    const range = this.param && this.param.getRange() ? this.param.getRange() : [0, 1]\r\n    const value = MathFunctions.clamp(\r\n      MathFunctions.remap(event.value, 0, length, range[0], range[1]),\r\n      range[0],\r\n      range[1]\r\n    )\r\n    if (!this.param) {\r\n      this.__updateSlider(value)\r\n      this.value = value\r\n      return\r\n    }\r\n\r\n    this.change.update({\r\n      value,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    this.change = null\r\n    // unhilight the material.\r\n    this.handleXfo.sc.x = this.handleXfo.sc.y = this.handleXfo.sc.z = 1.0\r\n    this.handle.getParameter('LocalXfo').setValue(this.handleXfo)\r\n  }\r\n\r\n  /**\r\n   * Serializes handle item as a JSON object.\r\n   *\r\n   * @param {object} context - The context param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const json = super.toJSON(context)\r\n    if (this.param) json.targetParam = this.param.getPath()\r\n    return json\r\n  }\r\n\r\n  /**\r\n   * Restores handle item from a JSON object.\r\n   *\r\n   * @param {object} json - The json param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(json, context) {\r\n    super.fromJSON(json, context)\r\n\r\n    if (json.targetParam) {\r\n      context.resolvePath(json.targetParam).then((param) => {\r\n        this.setTargetParam(param)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nRegistry.register('SliderHandle', SliderHandle)\r\n\r\nexport default SliderHandle\r\nexport { SliderHandle }\r\n","import {\r\n  MathFunctions,\r\n  Color,\r\n  Vec3,\r\n  Xfo,\r\n  NumberParameter,\r\n  XfoParameter,\r\n  GeomItem,\r\n  Material,\r\n  Circle,\r\n  Sphere,\r\n  Registry,\r\n} from '@zeainc/zea-engine'\r\nimport { BaseAxialRotationHandle } from './BaseAxialRotationHandle'\r\nimport ParameterValueChange from '../UndoRedo/Changes/ParameterValueChange'\r\nimport './Shaders/HandleShader'\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\n\r\n/**\r\n * Class representing a slider scene widget with an arc shape. There are two parts in this widget, the slider and the handle.<br>\r\n * The **Handle** is the moving part of the widget, the object you interact with. The **Slider** is the path that the **handle** follows.\r\n *\r\n *\r\n * **Parameters**\r\n * * **ArcRadius(`NumberParameter`):** Specifies the radius of the slider.\r\n * * **ArcAngle(`NumberParameter`):** Specifies the arc angle of the slider.\r\n * * **HandleRadius(`NumberParameter`):** Specifies the radius of the handle in the slider.\r\n *\r\n * **Events**\r\n * * **dragStart:** Triggered when the pointer is down.\r\n * * **dragEnd:** Triggered when the pointer is released.\r\n *\r\n * @extends BaseAxialRotationHandle\r\n */\r\nclass ArcSlider extends BaseAxialRotationHandle {\r\n  /**\r\n   * Creates an instance of ArcSlider.\r\n   *\r\n   * @param {string} name - The name value\r\n   * @param {number} [arcRadius=1] - The arcRadius value\r\n   * @param {number} [arcAngle=1] - The arcAngle value\r\n   * @param {number} [handleRadius=0.02] - The handleRadius value\r\n   * @param {Color} [color=new Color(1, 1, 0)] - the color value\r\n   */\r\n  constructor(name, arcRadius = 1, arcAngle = 1, handleRadius = 0.02, color = new Color(1, 1, 0)) {\r\n    super(name)\r\n    this.arcRadiusParam = this.addParameter(new NumberParameter('ArcRadius', arcRadius))\r\n    this.arcAngleParam = this.addParameter(new NumberParameter('ArcAngle', arcAngle))\r\n    this.handleRadiusParam = this.addParameter(new NumberParameter('HandleRadius', handleRadius))\r\n    // this.barRadiusParam = this.addParameter(\r\n    //   new NumberParameter('Bar Radius', radius * 0.25)\r\n    // );\r\n    this.colorParam.setValue(color)\r\n\r\n    this.handleMat = new Material('handleMat', 'HandleShader')\r\n    this.handleMat.getParameter('BaseColor').setValue(color)\r\n\r\n    const arcGeom = new Circle(arcRadius, 64, arcAngle)\r\n    const handleGeom = new Sphere(handleRadius, 64)\r\n\r\n    this.handle = new GeomItem('handle', handleGeom, this.handleMat)\r\n    this.arc = new GeomItem('arc', arcGeom, this.handleMat)\r\n    this.handleXfo = new Xfo()\r\n    this.handleGeomOffsetXfo = new Xfo()\r\n    this.handleGeomOffsetXfo.tr.x = arcRadius\r\n    this.handle.getParameter('GeomOffsetXfo').setValue(this.handleGeomOffsetXfo)\r\n\r\n    // this.barRadiusParam.on('valueChanged', () => {\r\n    //   arcGeom.getParameter('Radius').setValue(this.barRadiusParam.getValue());\r\n    // });\r\n\r\n    this.range = [0, arcAngle]\r\n    this.arcAngleParam.on('valueChanged', () => {\r\n      const arcAngle = this.arcAngleParam.getValue()\r\n      arcGeom.getParameter('Angle').setValue(arcAngle)\r\n      this.range = [0, arcAngle]\r\n    })\r\n    this.arcRadiusParam.on('valueChanged', () => {\r\n      const arcRadius = this.arcRadiusParam.getValue()\r\n      arcGeom.getParameter('Radius').setValue(arcRadius)\r\n      this.handleGeomOffsetXfo.tr.x = arcRadius\r\n      this.handle.getParameter('GeomOffsetXfo').setValue(this.handleGeomOffsetXfo)\r\n    })\r\n    this.handleRadiusParam.on('valueChanged', () => {\r\n      handleGeom.getParameter('Radius').setValue(this.handleRadiusParam.getValue())\r\n    })\r\n\r\n    this.colorParam.on('valueChanged', () => {\r\n      this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    })\r\n\r\n    this.addChild(this.handle)\r\n    this.addChild(this.arc)\r\n\r\n    // this.__updateSlider(0);\r\n    this.setTargetParam(this.handle.getParameter('GlobalXfo'), false)\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Mouse events\r\n\r\n  /**\r\n   * Event fired when a pointing device is initially moved within the space of the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerEnter(event) {\r\n    if (event.intersectionData && event.intersectionData.geomItem == this.handle) this.highlight()\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device moves outside of the space of the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerLeave(event) {\r\n    this.unhighlight()\r\n  }\r\n\r\n  /**\r\n   * Event fired when a pointing device button is pressed while the pointer is over the handle element.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   */\r\n  onPointerDown(event) {\r\n    // We do not want to handle events\r\n    // that have propagated from children of\r\n    // the slider.\r\n    if (event.intersectionData && event.intersectionData.geomItem == this.handle) super.onPointerDown(event)\r\n  }\r\n\r\n  /**\r\n   * Applies a special shinning shader to the handle to illustrate interaction with it.\r\n   */\r\n  highlight() {\r\n    super.highlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.highlightColorParam.getValue())\r\n  }\r\n\r\n  /**\r\n   * Removes the shining shader from the handle.\r\n   */\r\n  unhighlight() {\r\n    super.unhighlight()\r\n    this.handleMat.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n  }\r\n\r\n  // /**\r\n  //  * The setTargetParam method.\r\n  //  * @param {any} param - The param param.\r\n  //  */\r\n  // setTargetParam(param) {\r\n  //   this.param = param;\r\n  //   const __updateSlider = () => {\r\n  //     this.__updateSlider(param.getValue());\r\n  //   };\r\n  //   __updateSlider();\r\n  //   param.on('valueChanged', __updateSlider);\r\n  // }\r\n\r\n  /**\r\n   * Sets global xfo target parameter\r\n   *\r\n   * @param {Parameter} param - The param param.\r\n   * @param {boolean} track - The track param.\r\n   */\r\n  setTargetParam(param, track = true) {\r\n    this.param = param\r\n    if (track) {\r\n      if (this.param instanceof XfoParameter) {\r\n        const __updateGizmo = () => {\r\n          this.getParameter('GlobalXfo').setValue(param.getValue())\r\n        }\r\n        __updateGizmo()\r\n        param.on('valueChanged', __updateGizmo)\r\n      } else if (this.param instanceof NumberParameter) {\r\n        const __updateGizmo = () => {\r\n          this.handleXfo.ori.setFromAxisAndAngle(new Vec3(0, 0, 1), param.getValue())\r\n          this.handle.getParameter('GlobalXfo').setValue(this.handleXfo)\r\n        }\r\n        __updateGizmo()\r\n        param.on('valueChanged', __updateGizmo)\r\n      }\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line require-jsdoc\r\n  // __updateSlider(value) {\r\n  //   this.value = value\r\n  //   const range =\r\n  //     this.param && this.param.getRange() ? this.param.getRange() : [0, 1];\r\n  //   const v = Math.remap(value, range[0], range[1], 0, 1);\r\n  //   const length = this.arcAngleParam.getValue();\r\n  //   this.handleXfo.ori.setFromAxisAndAngle(this.axis, ) = v * length;\r\n  //   this.handle.getParameter('LocalXfo').setValue(this.handleXfo;\r\n  // }\r\n\r\n  // ///////////////////////////////////\r\n  // Interaction events\r\n\r\n  /**\r\n   * Returns handle's global Xfo\r\n   *\r\n   * @return {Xfo} - The Xfo value\r\n   */\r\n  getBaseXfo() {\r\n    return this.handle.getParameter('GlobalXfo').getValue()\r\n  }\r\n\r\n  /**\r\n   * Handles the initially drag interaction of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    this.baseXfo = this.getParameter('GlobalXfo').getValue().clone()\r\n    this.baseXfo.sc.set(1, 1, 1)\r\n    this.deltaXfo = new Xfo()\r\n    // this.offsetXfo = this.baseXfo.inverse().multiply(this.param.getValue());\r\n\r\n    this.vec0 = this.getParameter('GlobalXfo').getValue().ori.getXaxis()\r\n    // this.grabCircleRadius = this.arcRadiusParam.getValue();\r\n    this.vec0.normalizeInPlace()\r\n\r\n    this.change = new ParameterValueChange(this.param)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n\r\n    // Hilight the material.\r\n    this.handleGeomOffsetXfo.sc.x = this.handleGeomOffsetXfo.sc.y = this.handleGeomOffsetXfo.sc.z = 1.2\r\n    this.handle.getParameter('GeomOffsetXfo').setValue(this.handleGeomOffsetXfo)\r\n\r\n    this.emit('dragStart')\r\n  }\r\n\r\n  /**\r\n   * Handles drag interaction of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    const vec1 = event.holdPos.subtract(this.baseXfo.tr)\r\n    vec1.normalizeInPlace()\r\n\r\n    let angle = this.vec0.angleTo(vec1)\r\n    if (this.vec0.cross(vec1).dot(this.baseXfo.ori.getZaxis()) < 0) angle = -angle\r\n\r\n    if (this.range) {\r\n      angle = MathFunctions.clamp(angle, this.range[0], this.range[1])\r\n    }\r\n\r\n    if (event.shiftKey) {\r\n      // modulate the angle to X degree increments.\r\n      const increment = Math.degToRad(22.5)\r\n      angle = Math.floor(angle / increment) * increment\r\n    }\r\n\r\n    this.deltaXfo.ori.setFromAxisAndAngle(new Vec3(0, 0, 1), angle)\r\n\r\n    const newXfo = this.baseXfo.multiply(this.deltaXfo)\r\n    const value = newXfo // .multiply(this.offsetXfo);\r\n\r\n    if (this.change) {\r\n      if (this.param instanceof XfoParameter) {\r\n        this.change.update({\r\n          value,\r\n        })\r\n      } else if (this.param instanceof NumberParameter) {\r\n        this.change.update({\r\n          value: angle,\r\n        })\r\n      }\r\n    } else {\r\n      if (this.param instanceof XfoParameter) {\r\n        this.param.setValue(value)\r\n      } else if (this.param instanceof NumberParameter) {\r\n        this.param.setValue(angle)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    this.change = null\r\n    this.handleGeomOffsetXfo.sc.x = this.handleGeomOffsetXfo.sc.y = this.handleGeomOffsetXfo.sc.z = 1.0\r\n    this.handle.getParameter('GeomOffsetXfo').setValue(this.handleGeomOffsetXfo)\r\n\r\n    this.emit('dragEnd')\r\n  }\r\n\r\n  /**\r\n   * Serializes handle item as a JSON object.\r\n   *\r\n   * @param {object} context - The context param.\r\n   * @return {object} The return value.\r\n   */\r\n  toJSON(context) {\r\n    const json = super.toJSON(context)\r\n    if (this.param) json.targetParam = this.param.getPath()\r\n    return json\r\n  }\r\n\r\n  /**\r\n   * Restores handle item from a JSON object.\r\n   *\r\n   * @param {object} json - The json param.\r\n   * @param {object} context - The context param.\r\n   */\r\n  fromJSON(json, context) {\r\n    super.fromJSON(json, context)\r\n\r\n    if (json.targetParam) {\r\n      context.resolvePath(json.targetParam).then((param) => {\r\n        this.setTargetParam(param)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nRegistry.register('ArcSlider', ArcSlider)\r\n\r\nexport default ArcSlider\r\nexport { ArcSlider }\r\n","import { Ray } from '@zeainc/zea-engine'\r\nimport Handle from './Handle.js'\r\nimport ParameterValueChange from '../UndoRedo/Changes/ParameterValueChange.js'\r\nimport UndoRedoManager from '../UndoRedo/UndoRedoManager.js'\r\n\r\n/**\r\n * Class representing a planar movement scene widget.\r\n *\r\n * @extends Handle\r\n */\r\nclass ScreenSpaceMovementHandle extends Handle {\r\n  /**\r\n   * Create a planar movement scene widget.\r\n   *\r\n   * @param {string} name - The name value\r\n   */\r\n  constructor(name) {\r\n    super(name)\r\n  }\r\n\r\n  /**\r\n   * Sets global xfo target parameter.\r\n   *\r\n   * @param {Parameter} param - The video param.\r\n   * @param {boolean} track - The track param.\r\n   */\r\n  setTargetParam(param, track = true) {\r\n    this.param = param\r\n    if (track) {\r\n      const __updateGizmo = () => {\r\n        this.getParameter('GlobalXfo').setValue(param.getValue())\r\n      }\r\n      __updateGizmo()\r\n      param.on('valueChanged', __updateGizmo)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns target's global xfo parameter.\r\n   *\r\n   * @return {Parameter} - returns handle's target global Xfo.\r\n   */\r\n  getTargetParam() {\r\n    return this.param ? this.param : this.getParameter('GlobalXfo')\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Mouse events\r\n\r\n  /**\r\n   * Handles mouse down interaction with the handle.\r\n   *\r\n   * @param {MouseEvent} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  handlePointerDown(event) {\r\n    this.gizmoRay = new Ray()\r\n    const ray = event.pointerRay\r\n    const cameraXfo = event.viewport.getCamera().getParameter('GlobalXfo').getValue()\r\n    this.gizmoRay.dir = cameraXfo.ori.getZaxis()\r\n    const param = this.getTargetParam()\r\n    const baseXfo = param.getValue()\r\n    this.gizmoRay.start = baseXfo.tr\r\n    const dist = ray.intersectRayPlane(this.gizmoRay)\r\n    event.grabPos = ray.pointAtDist(dist)\r\n    this.onDragStart(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event param\r\n   * @return {boolean} - The return value\r\n   */\r\n  handlePointerMove(event) {\r\n    const ray = event.pointerRay\r\n    const dist = ray.intersectRayPlane(this.gizmoRay)\r\n    event.holdPos = ray.pointAtDist(dist)\r\n    this.onDrag(event)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Handles mouse up interaction with the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event param.\r\n   * @return {boolean} - The return value.\r\n   */\r\n  handlePointerUp(event) {\r\n    const ray = event.pointerRay\r\n    if (ray) {\r\n      const dist = ray.intersectRayPlane(this.gizmoRay)\r\n      event.releasePos = ray.pointAtDist(dist)\r\n    }\r\n\r\n    this.onDragEnd(event)\r\n    return true\r\n  }\r\n\r\n  // ///////////////////////////////////\r\n  // Interaction events\r\n\r\n  /**\r\n   * Handles the initially drag of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragStart(event) {\r\n    this.grabPos = event.grabPos\r\n    const param = this.getTargetParam()\r\n    this.baseXfo = param.getValue()\r\n\r\n    this.change = new ParameterValueChange(param)\r\n    UndoRedoManager.getInstance().addChange(this.change)\r\n  }\r\n\r\n  /**\r\n   * Handles drag action of the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDrag(event) {\r\n    const dragVec = event.holdPos.subtract(this.grabPos)\r\n\r\n    const newXfo = this.baseXfo.clone()\r\n    newXfo.tr.addInPlace(dragVec)\r\n\r\n    this.change.update({\r\n      value: newXfo,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Handles the end of dragging the handle.\r\n   *\r\n   * @param {MouseEvent|TouchEvent|object} event - The event param.\r\n   */\r\n  onDragEnd(event) {\r\n    this.change = null\r\n  }\r\n}\r\n\r\nexport default ScreenSpaceMovementHandle\r\nexport { ScreenSpaceMovementHandle }\r\n","import {\r\n  TreeItem,\r\n  Material,\r\n  Color,\r\n  Sphere,\r\n  Lines,\r\n  BillboardItem,\r\n  Label,\r\n  GeomItem,\r\n  Xfo,\r\n  Vec3,\r\n  ColorParameter,\r\n  StringParameter,\r\n  Registry,\r\n} from '@zeainc/zea-engine'\r\n\r\nconst sphere = new Sphere(0.003)\r\nconst line = new Lines(0.0)\r\nline.setNumVertices(2)\r\nline.setNumSegments(1)\r\nline.setSegmentVertexIndices(0, 0, 1)\r\nline.getVertexAttribute('positions').getValueRef(1).setFromOther(new Vec3(0, 0, 1))\r\n\r\n/**\r\n *\r\n *\r\n * @extends {TreeItem}\r\n */\r\nclass MeasureDistance extends TreeItem {\r\n  /**\r\n   * Creates an instance of MeasureDistance.\r\n   * @param {string} name\r\n   * @param {Color} color\r\n   */\r\n  constructor(name = 'MeasureDistance', color = new Color('#F9CE03')) {\r\n    super(name)\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', color))\r\n    this.unitsParameter = this.addParameter(new StringParameter('Units', 'mm'))\r\n\r\n    this.markerMaterial = new Material('Marker', 'HandleShader')\r\n    this.markerMaterial.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    this.markerMaterial.getParameter('MaintainScreenSize').setValue(1)\r\n    this.markerMaterial.getParameter('Overlay').setValue(0.5)\r\n\r\n    this.lineMaterial = new Material('Line', 'LinesShader')\r\n    this.lineMaterial.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    this.lineMaterial.getParameter('Overlay').setValue(0.5)\r\n\r\n    this.startMarker = new GeomItem(`${name}StartMarker`, sphere, this.markerMaterial)\r\n    this.endMarker = new GeomItem(`${name}EndMarker`, sphere, this.markerMaterial)\r\n\r\n    this.addChild(this.startMarker)\r\n    this.addChild(this.endMarker)\r\n\r\n    this.lineGeomItem = new GeomItem('Line', line, this.lineMaterial)\r\n    this.lineGeomItem.setSelectable(false)\r\n    this.addChild(this.lineGeomItem)\r\n\r\n    this.label = new Label('Distance')\r\n    this.label.getParameter('FontSize').setValue(20)\r\n    this.label.getParameter('BackgroundColor').setValue(this.colorParam.getValue())\r\n\r\n    this.billboard = new BillboardItem('DistanceBillboard', this.label)\r\n    this.billboard.getParameter('LocalXfo').setValue(new Xfo())\r\n    this.billboard.getParameter('PixelsPerMeter').setValue(1500)\r\n    this.billboard.getParameter('AlignedToCamera').setValue(true)\r\n    this.billboard.getParameter('DrawOnTop').setValue(true)\r\n    this.billboard.getParameter('FixedSizeOnscreen').setValue(true)\r\n    this.billboard.getParameter('Alpha').setValue(1)\r\n\r\n    this.addChild(this.billboard)\r\n\r\n    this.colorParam.on('valueChanged', () => {\r\n      const color = this.colorParam.getValue()\r\n      this.markerMaterial.getParameter('BaseColor').setValue(color)\r\n      this.lineMaterial.getParameter('BaseColor').setValue(color)\r\n      this.label.getParameter('BackgroundColor').setValue(color)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Updates the measured value\r\n   */\r\n  updateMeasurement() {\r\n    const startXfo = this.startMarker.getParameter('GlobalXfo').getValue()\r\n    const endXfo = this.endMarker.getParameter('GlobalXfo').getValue()\r\n\r\n    const vector = endXfo.tr.subtract(startXfo.tr)\r\n    const distance = vector.length()\r\n\r\n    const lineXfo = startXfo.clone()\r\n    lineXfo.ori.setFromDirectionAndUpvector(vector, new Vec3(vector.z, vector.x, vector.y))\r\n    lineXfo.sc.z = distance\r\n\r\n    this.lineGeomItem.getParameter('GlobalXfo').setValue(lineXfo)\r\n\r\n    // Convert meters to mm.\r\n    const distanceInMM = distance * 1000\r\n\r\n    this.label.getParameter('Text').setValue(`${parseFloat(distanceInMM.toFixed(4))}${this.unitsParameter.getValue()}`)\r\n\r\n    vector.normalizeInPlace()\r\n    const midPoint = startXfo.tr.add(vector.scale(distance * 0.5))\r\n    const labelXfo = new Xfo(midPoint)\r\n    labelXfo.ori.setFromDirectionAndUpvector(vector, new Vec3(vector.z, vector.x, vector.y))\r\n    this.billboard.getParameter('GlobalXfo').setValue(labelXfo)\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {Vec3} position\r\n   */\r\n  setStartMarkerPos(position) {\r\n    const newXfo = this.startMarker.getParameter('GlobalXfo').getValue()\r\n    newXfo.tr = position\r\n    this.startMarker.getParameter('GlobalXfo').setValue(newXfo)\r\n    this.updateMeasurement()\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {Vec3} position\r\n   */\r\n  setEndMarkerPos(position) {\r\n    const endXfo = this.endMarker.getParameter('GlobalXfo').getValue()\r\n    endXfo.tr = position\r\n    this.endMarker.getParameter('GlobalXfo').setValue(endXfo)\r\n    this.updateMeasurement()\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} isVisible -\r\n   */\r\n  setGeomBuffersVisibility(isVisible) {\r\n    this.startMarker.setSelectable(!isVisible)\r\n    this.endMarker.setSelectable(!isVisible)\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {string}\r\n   */\r\n  getMeasurementText() {\r\n    return this.label.getParameter('Text').getValue()\r\n  }\r\n}\r\n\r\nRegistry.register('MeasureDistance', MeasureDistance)\r\n\r\nexport { MeasureDistance }\r\n","import {\r\n  TreeItem,\r\n  Material,\r\n  Color,\r\n  Sphere,\r\n  Lines,\r\n  BillboardItem,\r\n  Label,\r\n  GeomItem,\r\n  Xfo,\r\n  Vec3,\r\n  ColorParameter,\r\n  Registry,\r\n  Ray,\r\n} from '@zeainc/zea-engine'\r\n\r\nconst sphere = new Sphere(0.003, 24, 12, false)\r\nconst line = new Lines(0.0)\r\nline.setNumVertices(2)\r\nline.setNumSegments(1)\r\nline.setSegmentVertexIndices(0, 0, 1)\r\nline.getVertexAttribute('positions').getValueRef(1).setFromOther(new Vec3(0, 0, 1))\r\n/**\r\n *\r\n *\r\n * @extends {TreeItem}\r\n */\r\nclass MeasureAngle extends TreeItem {\r\n  /**\r\n   * Creates an instance of MeasureAngle.\r\n   * @param {string} name\r\n   * @param {Color} color\r\n   */\r\n  constructor(name = 'MeasureAngle', color = new Color('#00AA00')) {\r\n    super(name)\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', color))\r\n\r\n    this.markerMaterial = new Material('Marker', 'HandleShader')\r\n    this.markerMaterial.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    this.markerMaterial.getParameter('MaintainScreenSize').setValue(1)\r\n    this.markerMaterial.getParameter('Overlay').setValue(0.5)\r\n\r\n    this.markerMaterialB = new Material('Marker', 'HandleShader')\r\n    this.markerMaterialB.getParameter('BaseColor').setValue(new Color(1, 0, 0))\r\n    this.markerMaterialB.getParameter('MaintainScreenSize').setValue(1)\r\n    this.markerMaterialB.getParameter('Overlay').setValue(0.5)\r\n\r\n    this.lineMaterial = new Material('Line', 'LinesShader')\r\n    this.lineMaterial.getParameter('BaseColor').setValue(this.colorParam.getValue())\r\n    this.lineMaterial.getParameter('Overlay').setValue(0.5)\r\n\r\n    this.markerA = new GeomItem(`markerA`, sphere, this.markerMaterial)\r\n    this.markerB = new GeomItem(`markerB`, sphere, this.markerMaterialB)\r\n    this.addChild(this.markerA)\r\n    this.addChild(this.markerB)\r\n  }\r\n\r\n  /**\r\n   * Given the 2 marker positions, calculate and display the angle.\r\n   */\r\n  createLinesAndLabel() {\r\n    this.markerA.addChild(new GeomItem('Line', line, this.lineMaterial), false)\r\n    this.markerB.addChild(new GeomItem('Line', line, this.lineMaterial), false)\r\n\r\n    this.label = new Label('Distance')\r\n    this.label.getParameter('FontSize').setValue(20)\r\n    this.label.getParameter('BackgroundColor').setValue(this.colorParam.getValue())\r\n\r\n    this.billboard = new BillboardItem('DistanceBillboard', this.label)\r\n    this.billboard.getParameter('LocalXfo').setValue(new Xfo())\r\n    this.billboard.getParameter('PixelsPerMeter').setValue(1500)\r\n    this.billboard.getParameter('AlignedToCamera').setValue(true)\r\n    this.billboard.getParameter('DrawOnTop').setValue(true)\r\n    this.billboard.getParameter('FixedSizeOnscreen').setValue(true)\r\n    this.billboard.getParameter('Alpha').setValue(1)\r\n\r\n    this.addChild(this.billboard)\r\n\r\n    this.colorParam.on('valueChanged', () => {\r\n      const color = this.colorParam.getValue()\r\n      this.markerMaterial.getParameter('BaseColor').setValue(color)\r\n      this.lineMaterial.getParameter('BaseColor').setValue(color)\r\n      this.label.getParameter('BackgroundColor').setValue(color)\r\n    })\r\n\r\n    // ////////////////////////////////////////\r\n    // Calculate the angle\r\n    const xfoA = this.markerA.getParameter('GlobalXfo').getValue()\r\n    const xfoB = this.markerB.getParameter('GlobalXfo').getValue()\r\n\r\n    const normA = xfoA.ori.getZaxis()\r\n    const normB = xfoB.ori.getZaxis()\r\n\r\n    const axis = normA.cross(normB).normalize()\r\n    const tangentA = axis.cross(normA).normalize()\r\n    const tangentB = axis.cross(normB).normalize()\r\n\r\n    const rayA = new Ray(xfoA.tr, tangentA)\r\n    const rayB = new Ray(xfoB.tr, tangentB)\r\n    const params = rayA.intersectRayVector(rayB)\r\n\r\n    const angle = tangentA.angleTo(tangentB)\r\n\r\n    const labelXfo = new Xfo()\r\n    labelXfo.tr.addInPlace(rayA.pointAtDist(params[0]))\r\n    labelXfo.tr.addInPlace(rayB.pointAtDist(params[1]))\r\n    labelXfo.tr.scaleInPlace(0.5)\r\n\r\n    xfoA.ori.setFromDirectionAndUpvector(tangentA, normA)\r\n    this.markerA.getParameter('GlobalXfo').setValue(xfoA)\r\n    xfoB.ori.setFromDirectionAndUpvector(tangentB, normA)\r\n    this.markerB.getParameter('GlobalXfo').setValue(xfoB)\r\n\r\n    const lineAXfo = new Xfo()\r\n    lineAXfo.sc.z = params[0]\r\n    this.markerA.getChild(0).getParameter('LocalXfo').setValue(lineAXfo)\r\n    const lineBXfo = new Xfo()\r\n    lineBXfo.sc.z = params[1]\r\n    this.markerB.getChild(0).getParameter('LocalXfo').setValue(lineBXfo)\r\n\r\n    this.label.getParameter('Text').setValue(`${(angle / (Math.PI / 180)).toFixed(3)} °`)\r\n\r\n    this.billboard.getParameter('GlobalXfo').setValue(labelXfo)\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {Xfo} xfo\r\n   */\r\n  setXfoA(xfo) {\r\n    this.markerA.getParameter('GlobalXfo').setValue(xfo)\r\n    this.markerB.getParameter('GlobalXfo').setValue(xfo)\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @return {Xfo}\r\n   */\r\n  getXfoA() {\r\n    return this.markerA.getParameter('GlobalXfo').getValue()\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {Xfo} xfo\r\n   */\r\n  setXfoB(xfo) {\r\n    this.markerB.getParameter('GlobalXfo').setValue(xfo)\r\n    this.createLinesAndLabel()\r\n  }\r\n}\r\n\r\nRegistry.register('MeasureAngle', MeasureAngle)\r\n\r\nexport { MeasureAngle }\r\n","import { Xfo, Registry } from '@zeainc/zea-engine'\r\nimport { UndoRedoManager, Change } from '../UndoRedo/index'\r\n\r\n/**\r\n * Represents a Measurement change.\r\n *\r\n * @extends Change\r\n */\r\nclass MeasurementChange extends Change {\r\n  /**\r\n   * Creates an instance of MeasurementChange.\r\n   *\r\n   * @param {TreeItem} measurement - The parent that the measurement will be added to.\r\n   */\r\n  constructor(measurement) {\r\n    super('MeasurementChange')\r\n\r\n    if (measurement) {\r\n      this.measurement = measurement\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {object} data - An object containing potentially the start and end positions.\r\n   * @memberof MeasurementChange\r\n   */\r\n  update(data) {\r\n    this.measurement.fromJSON(data.measurementData)\r\n    this.emit('updated', data)\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  end() {\r\n    this.measurement.setGeomBuffersVisibility(true)\r\n  }\r\n\r\n  /**\r\n   * Removes recently created geometry from its parent.\r\n   */\r\n  undo() {\r\n    console.log('undo MeasurementChange')\r\n    this.parentItem = this.measurement.getOwner()\r\n    this.childIndex = this.parentItem.getChildIndex(this.measurement)\r\n    this.parentItem.removeChild(this.childIndex)\r\n  }\r\n\r\n  /**\r\n   * Restores recently created geometry and adds it to the specified parent tree item.\r\n   */\r\n  redo() {\r\n    console.log('redo MeasurementChange')\r\n    this.parentItem.insertChild(this.measurement, this.childIndex)\r\n  }\r\n\r\n  /**\r\n   * Serializes the change as a JSON object.\r\n   *\r\n   * @param {object} context - The context value\r\n   * @return {object} - The serialized change\r\n   */\r\n  toJSON(context) {\r\n    const j = super.toJSON(context)\r\n    j.parentItemPath = this.measurement.getOwner().getPath()\r\n    j.measurementType = Registry.getBlueprintName(this.measurement)\r\n    j.measurementData = this.measurement.toJSON(context)\r\n    return j\r\n  }\r\n\r\n  /**\r\n   * Restores geometry from using the specified JSON\r\n   *\r\n   * @param {object} j - The j param.\r\n   * @param {object} context - The appData param.\r\n   */\r\n  fromJSON(j, context) {\r\n    const sceneRoot = context.appData.scene.getRoot()\r\n    const parentItem = sceneRoot.resolvePath(j.parentItemPath, 1)\r\n    if (parentItem) {\r\n      this.measurement = Registry.constructBlueprintName(j.measurementType)\r\n      this.measurement.fromJSON(j.measurementData)\r\n      parentItem.addChild(this.measurement)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Removes geometry item reference from change change.\r\n   */\r\n  destroy() {}\r\n}\r\n\r\nUndoRedoManager.registerChange('MeasurementChange', MeasurementChange)\r\nexport { MeasurementChange }\r\n","import UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\nimport { Ray, Vec3, Color, ColorParameter, BaseTool } from '@zeainc/zea-engine'\r\nimport { MeasureDistance } from './MeasureDistance'\r\nimport { MeasurementChange } from './MeasurementChange'\r\n/**\r\n * UI Tool for measurements\r\n *\r\n * @extends {BaseTool}\r\n */\r\nclass MeasureDistanceTool extends BaseTool {\r\n  /**\r\n   * Creates an instance of MeasureDistanceTool.\r\n   *\r\n   * @param {object} appData - The appData value\r\n   */\r\n  constructor(appData) {\r\n    super()\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', new Color('#F9CE03')))\r\n    if (!appData) console.error('App data not provided to tool')\r\n    this.appData = appData\r\n    this.measurementChange = null\r\n    this.highlightedItemA = null\r\n    this.highlightedItemB = null\r\n    this.stage = 0\r\n  }\r\n\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.prevCursor = this.appData.renderer.getGLCanvas().style.cursor\r\n      this.appData.renderer.getGLCanvas().style.cursor = 'crosshair'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.appData.renderer.getGLCanvas().style.cursor = this.prevCursor\r\n    }\r\n\r\n    if (this.stage != 0) {\r\n      const parentItem = this.measurement.getOwner()\r\n      parentItem.removeChild(parentItem.getChildIndex(this.measurement))\r\n      this.measurement = null\r\n\r\n      if (this.highlightedItemB) {\r\n        this.highlightedItemB.removeHighlight('measure', true)\r\n        this.highlightedItemB = null\r\n      }\r\n      if (this.highlightedItemA) {\r\n        this.highlightedItemA.removeHighlight('measure', true)\r\n        this.highlightedItemA = null\r\n      }\r\n      this.stage = 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {GeomItem} geomItem\r\n   * @param {Vec3} pos\r\n   * @return {Vec3}\r\n   * @private\r\n   */\r\n  snapToParametricEdge(geomItem, pos) {\r\n    const xfo = geomItem.getParameter('GlobalXfo').getValue()\r\n    if (geomItem.hasParameter('CurveType')) {\r\n      const curveType = geomItem.getParameter('CurveType').getValue()\r\n\r\n      switch (curveType) {\r\n        case 'Line': {\r\n          const crvToPnt = pos.subtract(xfo.tr)\r\n          const xaxis = xfo.ori.getXaxis()\r\n          return xfo.tr.add(xaxis.scale(crvToPnt.dot(xaxis)))\r\n        }\r\n        case 'Circle': {\r\n          const crvToPnt = pos.subtract(xfo.tr)\r\n          const radius = geomItem.getParameter('Radius').getValue() * xfo.sc.x\r\n          const zaxis = xfo.ori.getZaxis()\r\n          crvToPnt.subtractInPlace(zaxis.scale(crvToPnt.dot(zaxis)))\r\n          const length = crvToPnt.length()\r\n          return xfo.tr.add(crvToPnt.scale(radius / length))\r\n        }\r\n        default: {\r\n          console.log('Unhandled Edge Type: ', curveType)\r\n        }\r\n      }\r\n    } else if (geomItem.hasParameter('SurfaceType')) {\r\n      const surfaceType = geomItem.getParameter('SurfaceType').getValue()\r\n\r\n      switch (surfaceType) {\r\n        case 'Plane': {\r\n          const srfToPnt = pos.subtract(xfo.tr)\r\n          const zaxis = xfo.ori.getZaxis()\r\n          return pos.subtract(zaxis.scale(srfToPnt.dot(zaxis)))\r\n        }\r\n        case 'Cylinder': {\r\n          const srfToPnt = pos.subtract(xfo.tr)\r\n          const zaxis = xfo.ori.getZaxis()\r\n          const pointOnAxis = xfo.tr.add(zaxis.scale(srfToPnt.dot(zaxis)))\r\n\r\n          const radius = geomItem.getParameter('Radius').getValue() * xfo.sc.x\r\n          const axisToPnt = pos.subtract(pointOnAxis)\r\n          const length = axisToPnt.length()\r\n          return pointOnAxis.add(axisToPnt.scale(radius / length))\r\n        }\r\n        default: {\r\n          console.log('Unhandled Surface Type: ', surfaceType)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerDown(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0) || !event.intersectionData) return\r\n\r\n    if (this.stage == 0) {\r\n      if (this.highlightedItemA) {\r\n        const ray = event.pointerRay\r\n        let hitPos\r\n        if (event.intersectionData) {\r\n          hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n        } else {\r\n          const plane = new Ray(new Vec3(), new Vec3(0, 0, 1))\r\n          const distance = ray.intersectRayPlane(plane)\r\n          hitPos = ray.start.add(ray.dir.scale(distance))\r\n        }\r\n\r\n        const startPos = this.snapToParametricEdge(this.highlightedItemA, hitPos)\r\n        const color = this.colorParam.getValue()\r\n\r\n        this.measurement = new MeasureDistance('Measure Distance', color)\r\n        this.measurement.setStartMarkerPos(startPos)\r\n        this.measurement.setEndMarkerPos(startPos)\r\n        this.appData.scene.getRoot().addChild(this.measurement)\r\n\r\n        this.measurementChange = new MeasurementChange(this.measurement)\r\n        UndoRedoManager.getInstance().addChange(this.measurementChange)\r\n\r\n        this.stage++\r\n        event.stopPropagation()\r\n      }\r\n    } else if (this.stage == 1) {\r\n      if (this.highlightedItemB) {\r\n        const ray = event.pointerRay\r\n        const hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n        const startPos = this.snapToParametricEdge(this.highlightedItemA, hitPos)\r\n        const endPos = this.snapToParametricEdge(this.highlightedItemB, hitPos)\r\n        this.measurement.setStartMarkerPos(startPos)\r\n        this.measurement.setEndMarkerPos(endPos)\r\n\r\n        if (this.highlightedItemA) {\r\n          this.highlightedItemA.removeHighlight('measure', true)\r\n          this.highlightedItemA = null\r\n        }\r\n        if (this.highlightedItemB) {\r\n          this.highlightedItemB.removeHighlight('measure', true)\r\n          this.highlightedItemB = null\r\n        }\r\n        this.stage = 0\r\n        this.measurement = null\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerMove(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0)) return\r\n\r\n    if (this.stage == 0) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (geomItem.hasParameter('CurveType') || geomItem.hasParameter('SurfaceType')) {\r\n          if (!geomItem != this.highlightedItemA) {\r\n            if (this.highlightedItemA) {\r\n              this.highlightedItemA.removeHighlight('measure', true)\r\n            }\r\n            this.highlightedItemA = geomItem\r\n            this.highlightedItemA.addHighlight('measure', new Color(1, 1, 1, 0.2), true)\r\n          }\r\n        }\r\n      } else {\r\n        if (this.highlightedItemA) {\r\n          this.highlightedItemA.removeHighlight('measure', true)\r\n          this.highlightedItemA = null\r\n        }\r\n      }\r\n      event.stopPropagation()\r\n    } else if (this.stage == 1) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (geomItem != this.highlightedItemA && geomItem != this.highlightedItemB) {\r\n          if (geomItem.hasParameter('CurveType') || geomItem.hasParameter('SurfaceType')) {\r\n            if (this.highlightedItemB) {\r\n              this.highlightedItemB.removeHighlight('measure', true)\r\n              this.highlightedItemB = null\r\n            }\r\n\r\n            this.highlightedItemB = geomItem\r\n            this.highlightedItemB.addHighlight('measure', new Color(1, 1, 1, 0.2), true)\r\n          }\r\n        }\r\n      } else {\r\n        if (this.highlightedItemB) {\r\n          this.highlightedItemB.removeHighlight('measure', true)\r\n          this.highlightedItemB = null\r\n        }\r\n      }\r\n\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerUp(event) {}\r\n}\r\n\r\nexport { MeasureDistanceTool }\r\n","import UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\nimport { Ray, Vec3, Color, ColorParameter, BaseTool } from '@zeainc/zea-engine'\r\nimport { MeasureDistance } from './MeasureDistance'\r\nimport { MeasurementChange } from './MeasurementChange'\r\n/**\r\n * UI Tool for measurements\r\n *\r\n * @extends {BaseTool}\r\n */\r\nclass MeasureCenterDistancesTool extends BaseTool {\r\n  /**\r\n   * Creates an instance of MeasureCenterDistancesTool.\r\n   *\r\n   * @param {object} appData - The appData value\r\n   */\r\n  constructor(appData) {\r\n    super()\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', new Color('#F9CE03')))\r\n    if (!appData) console.error('App data not provided to tool')\r\n    this.appData = appData\r\n    this.measurementChange = null\r\n    this.highlightedItemA = null\r\n    this.highlightedItemB = null\r\n    this.stage = 0\r\n  }\r\n\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.prevCursor = this.appData.renderer.getGLCanvas().style.cursor\r\n      this.appData.renderer.getGLCanvas().style.cursor = 'crosshair'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.appData.renderer.getGLCanvas().style.cursor = this.prevCursor\r\n    }\r\n\r\n    if (this.stage != 0) {\r\n      const parentItem = this.measurement.getOwner()\r\n      parentItem.removeChild(parentItem.getChildIndex(this.measurement))\r\n      this.measurement = null\r\n\r\n      if (this.highlightedItemB) {\r\n        this.highlightedItemB.removeHighlight('measure', true)\r\n        this.highlightedItemB = null\r\n      }\r\n      if (this.highlightedItemA) {\r\n        this.highlightedItemA.removeHighlight('measure', true)\r\n        this.highlightedItemA = null\r\n      }\r\n      this.stage = 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {GeomItem} geomItem\r\n   * @param {string} key\r\n   * @private\r\n   */\r\n  highlightEdge(geomItem, key) {}\r\n\r\n  /**\r\n   * @param {GeomItem} geomItem\r\n   * @param {Vec3} pos\r\n   * @return {Vec3}\r\n   * @private\r\n   */\r\n  snapToParametricCenter(geomItem, pos) {\r\n    const xfo = geomItem.getParameter('GlobalXfo').getValue()\r\n    if (geomItem.hasParameter('CurveType')) {\r\n      const curveType = geomItem.getParameter('CurveType').getValue()\r\n\r\n      switch (curveType) {\r\n        case 'Circle': {\r\n          const crvToPnt = pos.subtract(xfo.tr)\r\n          const zaxis = xfo.ori.getZaxis()\r\n          return xfo.tr.add(zaxis.scale(crvToPnt.dot(zaxis)))\r\n        }\r\n        default: {\r\n          console.log('Unhandled Edge Type: ', curveType)\r\n        }\r\n      }\r\n    } else if (geomItem.hasParameter('SurfaceType')) {\r\n      const surfaceType = geomItem.getParameter('SurfaceType').getValue()\r\n\r\n      switch (surfaceType) {\r\n        case 'Cylinder':\r\n        case 'Cone': {\r\n          const srfToPnt = pos.subtract(xfo.tr)\r\n          const zaxis = xfo.ori.getZaxis()\r\n          return xfo.tr.add(zaxis.scale(srfToPnt.dot(zaxis)))\r\n        }\r\n        default: {\r\n          console.log('Unhandled Surface Type: ', surfaceType)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerDown(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0) || !event.intersectionData) return\r\n\r\n    if (this.stage == 0) {\r\n      if (this.highlightedItemA) {\r\n        const ray = event.pointerRay\r\n        let hitPos\r\n        if (event.intersectionData) {\r\n          hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n        } else {\r\n          const plane = new Ray(new Vec3(), new Vec3(0, 0, 1))\r\n          const distance = ray.intersectRayPlane(plane)\r\n          hitPos = ray.start.add(ray.dir.scale(distance))\r\n        }\r\n\r\n        const startPos = this.snapToParametricCenter(this.highlightedItemA, hitPos)\r\n        const color = this.colorParam.getValue()\r\n\r\n        this.measurement = new MeasureDistance('Measure Distance', color)\r\n        this.measurement.setStartMarkerPos(startPos)\r\n        this.measurement.setEndMarkerPos(startPos)\r\n        this.appData.scene.getRoot().addChild(this.measurement)\r\n\r\n        this.measurementChange = new MeasurementChange(this.measurement)\r\n        UndoRedoManager.getInstance().addChange(this.measurementChange)\r\n\r\n        this.stage++\r\n        event.stopPropagation()\r\n      }\r\n    } else if (this.stage == 1) {\r\n      if (this.highlightedItemB) {\r\n        const ray = event.pointerRay\r\n        const hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n        let endPos = this.snapToParametricCenter(this.highlightedItemB, hitPos)\r\n        const startPos = this.snapToParametricCenter(this.highlightedItemA, endPos)\r\n        endPos = this.snapToParametricCenter(this.highlightedItemB, startPos)\r\n        this.measurement.setStartMarkerPos(startPos)\r\n        this.measurement.setEndMarkerPos(endPos)\r\n\r\n        if (this.highlightedItemA) {\r\n          this.highlightedItemA.removeHighlight('measure', true)\r\n          this.highlightedItemA = null\r\n        }\r\n        if (this.highlightedItemB) {\r\n          this.highlightedItemB.removeHighlight('measure', true)\r\n          this.highlightedItemB = null\r\n        }\r\n        this.stage = 0\r\n        this.measurement = null\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks to see if the surface is appropriate for this kind of measurement.\r\n   * @param {GeomItem} geomItem - The geomItem to check\r\n   * @return {boolean}\r\n   */\r\n  checkGeom(geomItem) {\r\n    if (geomItem.hasParameter('CurveType')) {\r\n      const curveTypeParm = geomItem.getParameter('CurveType')\r\n      return curveTypeParm.getValue() == 'Circle'\r\n    }\r\n    if (geomItem.hasParameter('SurfaceType')) {\r\n      const surfaceTypeParm = geomItem.getParameter('SurfaceType')\r\n      return surfaceTypeParm.getValue() == 'Cone' || surfaceTypeParm.getValue() == 'Cylinder'\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerMove(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0)) return\r\n\r\n    if (this.stage == 0) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (geomItem != this.highlightedItemA && this.checkGeom(geomItem)) {\r\n          if (this.highlightedItemA) {\r\n            this.highlightedItemA.removeHighlight('measure', true)\r\n          }\r\n          this.highlightedItemA = geomItem\r\n\r\n          const color = this.colorParam.getValue().clone()\r\n          color.a = 0.2\r\n          this.highlightedItemA.addHighlight('measure', color, true)\r\n        }\r\n      } else {\r\n        if (this.highlightedItemA) {\r\n          this.highlightedItemA.removeHighlight('measure', true)\r\n          this.highlightedItemA = null\r\n        }\r\n      }\r\n      event.stopPropagation()\r\n    } else if (this.stage == 1) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (geomItem != this.highlightedItemA && geomItem != this.highlightedItemB && this.checkGeom(geomItem)) {\r\n          if (this.highlightedItemB) {\r\n            this.highlightedItemB.removeHighlight('measure', true)\r\n            this.highlightedItemB = null\r\n          }\r\n\r\n          this.highlightedItemB = geomItem\r\n          const color = this.colorParam.getValue().clone()\r\n          color.a = 0.2\r\n          this.highlightedItemB.addHighlight('measure', color, true)\r\n        }\r\n      } else {\r\n        if (this.highlightedItemB) {\r\n          this.highlightedItemB.removeHighlight('measure', true)\r\n          this.highlightedItemB = null\r\n        }\r\n      }\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerUp(event) {}\r\n}\r\n\r\nexport { MeasureCenterDistancesTool }\r\n","import UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\nimport { Ray, Vec3, Color, ColorParameter, BaseTool } from '@zeainc/zea-engine'\r\nimport { MeasurementChange } from './MeasurementChange'\r\nimport { MeasureDistance } from './MeasureDistance'\r\n/**\r\n * UI Tool for measurements\r\n *\r\n * @extends {BaseTool}\r\n */\r\nclass MeasureRadiusTool extends BaseTool {\r\n  /**\r\n   * Creates an instance of MeasureRadiusTool.\r\n   *\r\n   * @param {object} appData - The appData value\r\n   */\r\n  constructor(appData) {\r\n    super()\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', new Color('#F9CE03')))\r\n    if (!appData) console.error('App data not provided to tool')\r\n    this.appData = appData\r\n    this.highlightedItemA = null\r\n  }\r\n\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.prevCursor = this.appData.renderer.getGLCanvas().style.cursor\r\n      this.appData.renderer.getGLCanvas().style.cursor = 'crosshair'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.appData.renderer.getGLCanvas().style.cursor = this.prevCursor\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerDown(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0) || !event.intersectionData) return\r\n\r\n    if (this.highlightedItemA) {\r\n      const ray = event.pointerRay\r\n      let hitPos\r\n      if (event.intersectionData) {\r\n        hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n      } else {\r\n        const plane = new Ray(new Vec3(), new Vec3(0, 0, 1))\r\n        const distance = ray.intersectRayPlane(plane)\r\n        hitPos = ray.start.add(ray.dir.scale(distance))\r\n      }\r\n      const geomItem = this.highlightedItemA\r\n      const xfo = geomItem.getParameter('GlobalXfo').getValue()\r\n      let axisPos\r\n      let edgePos\r\n      if (geomItem.hasParameter('CurveType')) {\r\n        const curveType = geomItem.getParameter('CurveType').getValue()\r\n        switch (curveType) {\r\n          case 'Circle': {\r\n            const crvToPnt = hitPos.subtract(xfo.tr)\r\n            const radius = geomItem.getParameter('Radius').getValue() * xfo.sc.x\r\n            const zaxis = xfo.ori.getZaxis()\r\n            crvToPnt.subtractInPlace(zaxis.scale(crvToPnt.dot(zaxis)))\r\n            const length = crvToPnt.length()\r\n            axisPos = xfo.tr\r\n            edgePos = axisPos.add(crvToPnt.scale(radius / length))\r\n          }\r\n          default: {\r\n            console.log('Unhandled Edge Type: ', curveType)\r\n          }\r\n        }\r\n      } else if (geomItem.hasParameter('SurfaceType')) {\r\n        const surfaceType = geomItem.getParameter('SurfaceType').getValue()\r\n        switch (surfaceType) {\r\n          case 'Cylinder': {\r\n            const srfToPnt = hitPos.subtract(xfo.tr)\r\n            const zaxis = xfo.ori.getZaxis()\r\n            axisPos = xfo.tr.add(zaxis.scale(srfToPnt.dot(zaxis)))\r\n\r\n            const radius = geomItem.getParameter('Radius').getValue() * xfo.sc.x\r\n            const axisToPnt = hitPos.subtract(axisPos)\r\n            const length = axisToPnt.length()\r\n            edgePos = axisPos.add(axisToPnt.scale(radius / length))\r\n          }\r\n          default: {\r\n            console.log('Unhandled Surface Type: ', surfaceType)\r\n          }\r\n        }\r\n      }\r\n      const color = this.colorParam.getValue()\r\n\r\n      const measurement = new MeasureDistance('MeasureRadius', color)\r\n      measurement.setStartMarkerPos(axisPos)\r\n      measurement.setEndMarkerPos(edgePos)\r\n      measurement.setGeomBuffersVisibility(false)\r\n      this.appData.scene.getRoot().addChild(measurement)\r\n\r\n      const measurementChange = new MeasurementChange(measurement)\r\n      UndoRedoManager.getInstance().addChange(measurementChange)\r\n\r\n      if (this.highlightedItemA) this.highlightedItemA.removeHighlight('measure', true)\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerMove(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0)) return\r\n\r\n    if (!this.dragging) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (\r\n          (geomItem.hasParameter('CurveType') && geomItem.getParameter('CurveType').getValue() == 'Circle') ||\r\n          (geomItem.hasParameter('SurfaceType') && geomItem.getParameter('SurfaceType').getValue() == 'Cylinder')\r\n        ) {\r\n          if (geomItem != this.highlightedItemA) {\r\n            if (this.highlightedItemA) {\r\n              this.highlightedItemA.removeHighlight('measure', true)\r\n            }\r\n            this.highlightedItemA = geomItem\r\n            const color = this.colorParam.getValue().clone()\r\n            color.a = 0.2\r\n            this.highlightedItemA.addHighlight('measure', color, true)\r\n          }\r\n        }\r\n      } else {\r\n        if (this.highlightedItemA) {\r\n          this.highlightedItemA.removeHighlight('measure', true)\r\n          this.highlightedItemA = null\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerUp(event) {}\r\n}\r\n\r\nexport { MeasureRadiusTool }\r\n","import UndoRedoManager from '../UndoRedo/UndoRedoManager'\r\nimport { Ray, Vec3, Color, ColorParameter, BaseTool, GeomItem, Xfo, Quat } from '@zeainc/zea-engine'\r\nimport { MeasurementChange } from './MeasurementChange'\r\nimport { MeasureAngle } from './MeasureAngle'\r\n/**\r\n * UI Tool for measurements\r\n *\r\n * @extends {BaseTool}\r\n */\r\nclass MeasureAngleTool extends BaseTool {\r\n  /**\r\n   * Creates an instance of MeasureAngleTool.\r\n   *\r\n   * @param {object} appData - The appData value\r\n   */\r\n  constructor(appData) {\r\n    super()\r\n\r\n    this.colorParam = this.addParameter(new ColorParameter('Color', new Color('#F9CE03')))\r\n    if (!appData) console.error('App data not provided to tool')\r\n    this.appData = appData\r\n    this.measurementChange = null\r\n    this.highlightedItemA = null\r\n    this.highlightedItemAHitPos = null\r\n    this.highlightedItemB = null\r\n    this.stage = 0\r\n  }\r\n\r\n  /**\r\n   * The activateTool method.\r\n   */\r\n  activateTool() {\r\n    super.activateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.prevCursor = this.appData.renderer.getGLCanvas().style.cursor\r\n      this.appData.renderer.getGLCanvas().style.cursor = 'crosshair'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The deactivateTool method.\r\n   */\r\n  deactivateTool() {\r\n    super.deactivateTool()\r\n    if (this.appData && this.appData.renderer) {\r\n      this.appData.renderer.getGLCanvas().style.cursor = this.prevCursor\r\n    }\r\n    if (this.stage != 0) {\r\n      const parentItem = this.measurement.getOwner()\r\n      parentItem.removeChild(parentItem.getChildIndex(this.measurement))\r\n      this.measurement = null\r\n\r\n      if (this.highlightedItemB) {\r\n        this.highlightedItemB.removeHighlight('measure', true)\r\n        this.highlightedItemB = null\r\n      }\r\n      if (this.highlightedItemA) {\r\n        this.highlightedItemA.removeHighlight('measure', true)\r\n        this.highlightedItemA = null\r\n      }\r\n      this.stage = 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks to see if the surface is appropriate for this kind of measurement.\r\n   * @param {GeomItem} geomItem - The geomItem to check\r\n   * @return {boolean}\r\n   */\r\n  checkSurface(geomItem) {\r\n    const surfaceTypeParm = geomItem.getParameter('SurfaceType')\r\n    return (\r\n      surfaceTypeParm &&\r\n      (surfaceTypeParm.getValue() == 'Plane' ||\r\n        surfaceTypeParm.getValue() == 'Cone' ||\r\n        surfaceTypeParm.getValue() == 'Cylinder')\r\n    )\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerDown(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0) || !event.intersectionData) return\r\n\r\n    const getSurfaceXfo = (geomItem, hitPos, closestTo) => {\r\n      const xfo = new Xfo()\r\n      const surfaceTypeParm = geomItem.getParameter('SurfaceType')\r\n      if (surfaceTypeParm) {\r\n        const surfaceType = surfaceTypeParm.getValue()\r\n        switch (surfaceType) {\r\n          case 'Plane': {\r\n            const geomMat = geomItem.getParameter('GeomMat').getValue()\r\n            const srfToPnt = hitPos.subtract(geomMat.translation)\r\n            let zaxis = geomMat.zAxis.clone()\r\n            if (zaxis.dot(event.pointerRay.dir) > 0) zaxis = zaxis.negate()\r\n\r\n            const hitPos2 = hitPos\r\n            if (closestTo) {\r\n              const normA = zaxis\r\n              const normB = closestTo.ori.getZaxis()\r\n              const vectorAB = closestTo.tr.subtract(hitPos)\r\n              const axis = normA.cross(normB).normalize()\r\n              hitPos2.addInPlace(axis.scale(vectorAB.dot(axis)))\r\n            }\r\n\r\n            xfo.ori.setFromDirectionAndUpvector(zaxis, new Vec3(zaxis.z, zaxis.x, zaxis.y))\r\n            xfo.tr = hitPos2.subtract(zaxis.scale(srfToPnt.dot(zaxis)))\r\n            break\r\n          }\r\n          case 'Cone': {\r\n            const globalXfo = geomItem.getParameter('GlobalXfo').getValue()\r\n            const semiAngle = geomItem.getParameter('SemiAngle').getValue()\r\n            const startRadius = geomItem.getParameter('StartRadius').getValue()\r\n            const zaxis = globalXfo.ori.getZaxis()\r\n            const zaxisDist = hitPos.subtract(globalXfo.tr).dot(zaxis)\r\n            const radiusAtPoint = startRadius + Math.tan(semiAngle) * zaxisDist\r\n            let hitPos2 = hitPos\r\n            if (closestTo) {\r\n              const vec2 = closestTo.tr.subtract(globalXfo.tr)\r\n              vec2.subtractInPlace(zaxis.scale(vec2.dot(zaxis)))\r\n              hitPos2 = globalXfo.tr.add(vec2.normalize().scale(radiusAtPoint))\r\n              hitPos2.addInPlace(zaxis.scale(zaxisDist))\r\n            }\r\n            const vec = hitPos2.subtract(globalXfo.tr)\r\n            xfo.ori.setFromDirectionAndUpvector(zaxis, vec)\r\n            const rot = new Quat()\r\n            rot.setFromAxisAndAngle(new Vec3(1, 0, 0), semiAngle)\r\n            xfo.ori.multiplyInPlace(rot)\r\n            xfo.tr = hitPos2\r\n\r\n            const zaxis2 = globalXfo.ori.getZaxis()\r\n            const angle = zaxis2.angleTo(xfo.ori.getZaxis())\r\n            console.log(angle, semiAngle)\r\n            break\r\n          }\r\n          case 'Cylinder': {\r\n            const globalXfo = geomItem.getParameter('GlobalXfo').getValue()\r\n            const radius = geomItem.getParameter('Radius').getValue() * globalXfo.sc.x\r\n            const zaxis = globalXfo.ori.getZaxis()\r\n            const zaxisDist = hitPos.subtract(globalXfo.tr).dot(zaxis)\r\n            const pointOnAxis = globalXfo.tr.add(zaxis.scale(zaxisDist))\r\n\r\n            const axisToPnt = hitPos.subtract(pointOnAxis)\r\n            const length = axisToPnt.length()\r\n            let hitPos2 = pointOnAxis.add(axisToPnt.scale(radius / length))\r\n            if (closestTo) {\r\n              const vec2 = closestTo.tr.subtract(globalXfo.tr)\r\n              vec2.subtractInPlace(zaxis.scale(vec2.dot(zaxis)))\r\n              hitPos2 = globalXfo.tr.add(vec2.normalize().scale(radius))\r\n              hitPos2.addInPlace(zaxis.scale(zaxisDist))\r\n            }\r\n            const vec = hitPos2.subtract(globalXfo.tr)\r\n            xfo.ori.setFromDirectionAndUpvector(zaxis, vec)\r\n            const rot = new Quat()\r\n            rot.setFromAxisAndAngle(new Vec3(1, 0, 0), Math.PI * 0.5)\r\n            xfo.ori.multiplyInPlace(rot)\r\n            xfo.tr = hitPos2\r\n            break\r\n          }\r\n          default: {\r\n            console.log('Unhandled Surface Type: ', surfaceType)\r\n          }\r\n        }\r\n      }\r\n      return xfo\r\n    }\r\n\r\n    if (this.stage == 0) {\r\n      const { geomItem } = event.intersectionData\r\n      if (this.checkSurface(geomItem)) {\r\n        const color = this.colorParam.getValue()\r\n        this.measurement = new MeasureAngle('MeasureAngle', color)\r\n        this.appData.scene.getRoot().addChild(this.measurement)\r\n\r\n        const ray = event.pointerRay\r\n        const hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n        const xfoA = getSurfaceXfo(geomItem, hitPos)\r\n        this.measurement.setXfoA(xfoA)\r\n\r\n        this.geomItemA = geomItem\r\n        this.hitPosA = hitPos\r\n\r\n        this.stage++\r\n        event.stopPropagation()\r\n      }\r\n    } else if (this.stage == 1) {\r\n      const { geomItem } = event.intersectionData\r\n      if (this.checkSurface(geomItem)) {\r\n        const ray = event.pointerRay\r\n        const hitPos = ray.start.add(ray.dir.scale(event.intersectionData.dist))\r\n        const xfoB = getSurfaceXfo(geomItem, hitPos)\r\n        // this.measurement.setXfoB(xfoB)\r\n        const xfoA = getSurfaceXfo(this.geomItemA, this.hitPosA, xfoB)\r\n        this.measurement.setXfoA(xfoA)\r\n\r\n        // const xfoB2 = getSurfaceXfo(geomItem, hitPos, xfoA)\r\n        this.measurement.setXfoB(xfoB)\r\n\r\n        const measurementChange = new MeasurementChange(this.measurement)\r\n        UndoRedoManager.getInstance().addChange(measurementChange)\r\n\r\n        if (this.highlightedItemA) this.highlightedItemA.removeHighlight('measure', true)\r\n        if (this.highlightedItemB) this.highlightedItemB.removeHighlight('measure', true)\r\n\r\n        this.stage = 0\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerMove(event) {\r\n    // skip if the alt key is held. Allows the camera tool to work\r\n    if (event.altKey || (event.pointerType === 'mouse' && event.button !== 0)) return\r\n\r\n    if (this.stage == 0) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (this.checkSurface(geomItem)) {\r\n          if (geomItem != this.highlightedItemA) {\r\n            if (this.highlightedItemA) {\r\n              this.highlightedItemA.removeHighlight('measure', true)\r\n            }\r\n            this.highlightedItemA = geomItem\r\n            const color = this.colorParam.getValue().clone()\r\n            color.a = 0.2\r\n            this.highlightedItemA.addHighlight('measure', color, true)\r\n          }\r\n        }\r\n      } else {\r\n        if (this.highlightedItemA) {\r\n          this.highlightedItemA.removeHighlight('measure', true)\r\n          this.highlightedItemA = null\r\n        }\r\n      }\r\n    } else if (this.stage == 1) {\r\n      if (event.intersectionData) {\r\n        const { geomItem } = event.intersectionData\r\n        if (geomItem != this.highlightedItemA && geomItem != this.highlightedItemB && this.checkSurface(geomItem)) {\r\n          if (this.highlightedItemB) {\r\n            this.highlightedItemB.removeHighlight('measure', true)\r\n          }\r\n          this.highlightedItemB = geomItem\r\n\r\n          const color = this.colorParam.getValue().clone()\r\n          color.a = 0.2\r\n          this.highlightedItemB.addHighlight('measure', color, true)\r\n        }\r\n      } else {\r\n        if (this.highlightedItemB) {\r\n          this.highlightedItemB.removeHighlight('measure', true)\r\n          this.highlightedItemB = null\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {MouseEvent|TouchEvent} event - The event value\r\n   */\r\n  onPointerUp(event) {\r\n    if (this.dragging) {\r\n      this.dragging = false\r\n      this.measurementChange = null\r\n      if (this.highlightedItemA) this.highlightedItemA.removeHighlight('measure', true)\r\n      event.stopPropagation()\r\n    }\r\n  }\r\n}\r\n\r\nexport { MeasureAngleTool }\r\n"],"names":["TreeItem","ColorParameter","Color","Ray","EventEmitter","Registry","Parameter","GLShader","shaderLibrary","Material","Cylinder","Cone","GeomItem","Xfo","MathFunctions","Vec3","NumberParameter","Torus","Cuboid","EulerAngles","Operator","OperatorInput","OperatorOutput","Group","SelectionSet","BaseItem","MultiChoiceParameter","BaseTool","Rect","Vec2","Plane","DataImage","Lines","POINTER_TYPES","Quat","Cross","Circle","BooleanParameter","Sphere","XfoParameter","StringParameter","Label","BillboardItem","sphere","line"],"mappings":"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CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAC;EAC3C,GAAG;EACH,CAAC;AACD;EACA,eAAe,CAAC,cAAc,CAAC,sBAAsB,EAAE,oBAAoB;;EC5H3E;EACA;EACA;EACA;EACA;EACA,MAAM,YAAY,SAASC,kBAAQ,CAAC;EACpC;EACA;EACA;EACA;EACA;EACA,EAAE,WAAW,CAAC,EAAE,EAAE;EAClB,IAAI,KAAK,CAAC,EAAE,EAAC;AACb;EACA,IAAI,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,GAAGC,uBAAa,CAAC,WAAW;EACpE,MAAM,2BAA2B;EACjC,MAAM,CAAC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;EACD,MAAK;AACL;EACA,IAAI,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,GAAGA,uBAAa,CAAC,WAAW;EACtE,MAAM,6BAA6B;EACnC,MAAM,CAAC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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"}