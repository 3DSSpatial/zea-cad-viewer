var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function a(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){e.appendChild(t)}function i(e){e.parentNode.removeChild(e)}function s(e){return document.createElement(e)}function c(e){return document.createTextNode(e)}function u(){return c(" ")}function d(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function m(e,t,n){t in e?e[t]=n:d(e,t,n)}let f;function p(e){f=e}function g(e){(function(){if(!f)throw new Error("Function called outside component initialization");return f})().$$.on_mount.push(e)}const h=[],w=[],z=[],b=[],y=Promise.resolve();let $=!1;function v(e){z.push(e)}let M=!1;const _=new Set;function C(){if(!M){M=!0;do{for(let e=0;e<h.length;e+=1){const t=h[e];p(t),T(t.$$)}for(p(null),h.length=0;w.length;)w.pop()();for(let e=0;e<z.length;e+=1){const t=z[e];_.has(t)||(_.add(t),t())}z.length=0}while(h.length);for(;b.length;)b.pop()();$=!1,M=!1,_.clear()}}function T(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(v)}}const k=new Set;function A(e,t){-1===e.$$.dirty[0]&&(h.push(e),$||($=!0,y.then(C)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function E(r,l,s,c,u,d,m=[-1]){const g=f;p(r);const h=l.props||{},w=r.$$={fragment:null,ctx:null,props:d,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(g?g.$$.context:[]),callbacks:n(),dirty:m,skip_bound:!1};let z=!1;if(w.ctx=s?s(r,h,((e,t,...n)=>{const o=n.length?n[0]:t;return w.ctx&&u(w.ctx[e],w.ctx[e]=o)&&(!w.skip_bound&&w.bound[e]&&w.bound[e](o),z&&A(r,e)),t})):[],w.update(),z=!0,o(w.before_update),w.fragment=!!c&&c(w.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);w.fragment&&w.fragment.l(e),e.forEach(i)}else w.fragment&&w.fragment.c();l.intro&&((b=r.$$.fragment)&&b.i&&(k.delete(b),b.i(y))),function(e,n,r){const{fragment:l,on_mount:i,on_destroy:s,after_update:c}=e.$$;l&&l.m(n,r),v((()=>{const n=i.map(t).filter(a);s?s.push(...n):o(n),e.$$.on_mount=[]})),c.forEach(v)}(r,l.target,l.anchor),C()}var b,y;p(g)}const{Color:x,GLRenderer:P,Scene:V,MathFunctions:N}=window.zeaEngine,S=async()=>{const e=x.random(),t=["Phil","Froilan","Alvaro","Dan","Mike","Rob","Steve"],n=["Taylor","Smith","Haines","Moore","Elías Pájaro Torreglosa","Moreno"];return{given_name:t[N.randomInt(0,t.length)],family_name:n[N.randomInt(0,n.length)],id:Math.random().toString(36).slice(2,12),color:e.toHex()}},{Xfo:F,EulerAngles:I}=window.zeaEngine,{CADAsset:H}=window.zeaCad,L=()=>{const e=new H,t=new F;return t.sc.set(2),t.ori.setFromEulerAngles(new I(0,-.5*Math.PI,0,"ZXY")),e.getParameter("GlobalXfo").setValue(t),e.getParameter("FilePath").setValue("servo_mestre-visu.zcad"),e};function j(t){let n,o,a,r,f,p,g,h,w,z,b,y,$,v,M,_,C,T,k,A,E,x,P,V,N,S;return{c(){n=s("zea-layout"),o=s("div"),a=s("img"),f=u(),p=s("div"),g=s("zea-menu"),h=s("zea-menu-item"),w=c("Tools\r\n          "),z=s("zea-menu-subitems"),b=s("zea-menu-item"),y=c("Camera Manipulator"),$=u(),v=s("zea-menu-item"),M=c("Measurement Tool"),_=u(),C=s("div"),T=s("zea-user-chip-set"),k=u(),A=s("zea-user-chip"),E=u(),x=s("zea-layout"),P=s("zea-scroll-pane"),P.innerHTML='<zea-tree-view id="zea-tree-view"></zea-tree-view>',V=u(),N=s("div"),S=s("canvas"),d(a,"alt","ZEA logo"),d(a,"class","App-logo"),a.src!==(r="logo-zea.svg")&&d(a,"src","logo-zea.svg"),m(b,"class","MenuItem"),m(b,"hotkey","c"),m(b,"id","camera-manipulator"),m(b,"callback",t[4]),m(v,"class","MenuItem"),m(v,"hotkey","m"),m(v,"id","measurement-tool"),m(v,"callback",t[3]),m(g,"type","dropdown"),m(g,"show-anchor","true"),d(p,"class","MenuHolder"),m(T,"id","zea-user-chip-set"),d(C,"class","UserChipSetHolder"),m(A,"id","zea-user-chip"),d(o,"slot","a"),d(o,"class","App-header"),m(P,"slot","a"),d(S,"id","renderer"),d(N,"slot","b"),d(N,"id","scene-host"),m(x,"slot","b"),m(x,"cell-a-size","200"),m(x,"cell-b-size","100%"),m(x,"cell-c-size","0"),m(x,"resize-cell-c","false"),m(n,"orientation","vertical"),m(n,"cell-a-size","50"),m(n,"resize-cell-a","false"),m(n,"cell-b-size","100%"),m(n,"cell-c-size","0"),m(n,"resize-cell-c","false")},m(e,r){!function(e,t,n){e.insertBefore(t,n||null)}(e,n,r),l(n,o),l(o,a),l(o,f),l(o,p),l(p,g),l(g,h),l(h,w),l(h,z),l(z,b),l(b,y),l(z,$),l(z,v),l(v,M),l(o,_),l(o,C),l(C,T),t[5](T),l(o,k),l(o,A),t[6](A),l(n,E),l(n,x),l(x,P),l(x,V),l(x,N),l(N,S),t[7](S)},p:e,i:e,o:e,d(e){e&&i(n),t[5](null),t[6](null),t[7](null)}}}function R(e,t,n){const{Xfo:o,Vec3:a,CuttingPlane:r,Color:l}=window.zeaEngine,{MeasurementTool:i,CreateFreehandLineTool:s,LinearMovementHandle:c}=window.zeaUx,{Session:u,SessionSync:d}=window.zeaCollab;let m,f,p,h,z,b,y,$,v,M;const _=()=>{if(h.getViewport().getManipulator()===y)return h.getViewport().setManipulator(v),void n(0,m.style.cursor="auto",m);h.getViewport().setManipulator(y),n(0,m.style.cursor="cell",m)},C=()=>{h.getViewport().setManipulator(v),$.deactivateTool(),n(0,m.style.cursor="auto",m)};return g((async()=>{const e=(e=>{const t=new P(e),n=new V;return t.setScene(n),{scene:n,renderer:t}})(m);p=e.scene,h=e.renderer;const t=await S(),g=new u(t,"https://websocket-staging.zea.live");g.joinRoom("zea-template-svelte");new d(g,e,t,{});n(2,b.session=g,b),n(1,z.userData=t,z),M=L(),p.getRoot().addChild(M);const w=document.getElementById("zea-tree-view");w.appData=e,w.rootItem=M,y=new i({scene:p}),y.activateTool(),$=new s(e),v=h.getViewport().getManipulator(),h.getViewport().getCamera().setPositionAndTarget(new a(2.5,0,0),new a(0,0,0));const T=document.createElement("zea-toolbar");T.tools={cameraManipulator:{tag:"zea-toolbar-tool",data:{iconName:"camera-outline",toolName:"Camera Manipulator",callback:()=>C()}},measurementTool:{tag:"zea-toolbar-tool",data:{iconName:"resize-outline",toolName:"Measurement Tool",callback:()=>_()}},freeHandLineTool:{tag:"zea-toolbar-tool",data:{iconName:"draw-freehand",iconType:"zea",toolName:"Free Hand Line Tool",callback:()=>(()=>{if(h.getViewport().getManipulator()===$)return $.deactivateTool(),h.getViewport().setManipulator(v),void n(0,m.style.cursor="auto",m);$.activateTool(),h.getViewport().setManipulator($),n(0,m.style.cursor="cell",m)})()}},cuttingPlaneTool:{tag:"zea-toolbar-tool",data:{iconName:"cut-outline",toolName:"Add Cutting Plane",callback:()=>(()=>{f=new r("CuttingPlane");const e=new o;e.tr.set(0,0,0),e.ori.setFromAxisAndAngle(new a(0,1,0),1.55),f.getParameter("CutAwayEnabled").setValue(!0);const t=new c("linear1",.05,.002,new l("#FF0000"));t.getParameter("LocalXfo").setValue(e),t.addChild(f,!1),p.getRoot().addChild(t),f.addItem(M)})()}}};document.getElementById("scene-host").prepend(T)})),[m,z,b,_,C,function(e){w[e?"unshift":"push"]((()=>{b=e,n(2,b)}))},function(e){w[e?"unshift":"push"]((()=>{z=e,n(1,z)}))},function(e){w[e?"unshift":"push"]((()=>{m=e,n(0,m)}))}]}return new class extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),E(this,e,R,j,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
